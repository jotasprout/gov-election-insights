function ElectionModel(a,b,c){function d(a,b,c){Ba.develop=a.develop||!1,Ba.isSVG=a.isSVG||!1,Ba.serverDate=ha(a.serverDate)||new Date,Ba.checkzeros=a.checkzeros||!1,Ba.statesInfo=c||{},Ba.stateAbbs=b||[],Ba.statesToCheck=[],!0===Ba.checkzeros&&(Ba.statesToCheck=Ba.stateAbbs.slice(0)),a.selected||(a.selected={}),a.path||(a.path={}),Ba.path={js:a.path.js||"/js/election/",lines:a.path.lines||"/js/election/vectors/",data:a.path.data||"/mapdata/"},Ba.isHomepage=a.isHomepage||!1,Ba.isMobile=!!a.isMobile&&a.isMobile,Ba.isIpad=a.isIpad||!1,Ba.cacheDuration=1e3*(a.cacheDuration||30),Ba.cacheStart=new Date(Ba.serverDate.getTime()),Ba.cacheStart.setSeconds(0),Ba.cacheUserStart=new Date,Ba.cacheUserStart.setSeconds(0),Ba.timerDuration=a.timerDuration||30,Ba.lazy=a.lazy||!1,Ba.isUS=a.isUS||!1,Ba.isSchedule=!!a.hasOwnProperty("isSchedule")&&a.isSchedule,Ba.selected={yearDefault:a.selected.yearDefault||"2014",year:a.selected.year||"2014",yearType:a.selected.yearType||"P",yearSeason:a.selected.yearSeason||"P",race:a.selected.hasOwnProperty("race")?a.selected.race:"S",state:a.selected.state||"US",date:a.selected.date||"",party:a.selected.party||"",district:a.selected.district||"",special:!!a.selected.hasOwnProperty("special")&&a.selected.special,runoff:!!a.selected.hasOwnProperty("runoff")&&a.selected.runoff}}function e(){B(),Ea=!0,Ka=[],La=[],k(),Ka.hasOwnProperty(0)||(ea(Ba.selected.year,Ba.selected.yearType,"timestamps",!0),g("timestamps")),f()}function f(){Ka.hasOwnProperty(0)?i(Ka[0]):l()}function g(a){""==Ba.selected.date&&"LIVE"!=a&&"US_primaries"!=a&&"US"!=a&&"CONFIG"!=a&&"config_primaries"!=a&&"CONFIG_primaries"!=a&&"timestamps"!=a||Ka.push(a)}function h(a){La[a]=void 0,delete La[a]}function i(a){var b=a,c=Ba.path.data+Ba.selected.year+"/",d=c+a+".xml"+na(),e="text/plain; charset=x-user-defined",g="text";("config"==a.toLowerCase()&&"G"==Ba.selected.yearType||"config_primaries"==a.toLowerCase()&&"P"==Ba.selected.yearType)&&(d=c+a.toLowerCase()+".json"+na(),e="application/json",g="json"),$.ajax({url:d,mimeType:e,dataType:g,cache:!0,error:function(a,b,c){xa("Error loading data...",b),xa("Error loading data...",c)},success:function(a){La[b]=a},complete:function(){Ka.shift(),f()}})}function j(){var a,b=!0;for(a in Aa)if(!1===Aa[a]){b=!1;break}return b}function k(){Aa={timestamps:!1}}function l(){var a=[],b="",c="";if(""!==Ba.selected.state&&"US"!=Ba.selected.state){a=Ba.selected.date.split(",");var d=0;for(d;d<a.length&&(b=a[d],c=Ba.selected.state+"_"+b,!La.hasOwnProperty(c));d++)c=""}!1===Aa.timestamps?o(La.timestamps,"timestamps"):Aa.timestamps&&La.hasOwnProperty("CONFIG")?p(La.CONFIG,"CONFIG"):Aa.timestamps&&(La.hasOwnProperty("config_primaries")||La.hasOwnProperty("CONFIG_primaries"))?La.hasOwnProperty("config_primaries")?p(La.config_primaries,"config_primaries"):La.hasOwnProperty("CONFIG_primaries")&&p(La.CONFIG_primaries,"CONFIG_primaries"):Aa.timestamps&&La.hasOwnProperty("US_primaries")?q(La.US_primaries,"US_primaries"):Aa.timestamps&&La.hasOwnProperty("US")?q(La.US,"US"):Aa.timestamps&&La.hasOwnProperty("LIVE")?q(La.LIVE,"LIVE"):Aa.timestamps&&""!=c?q(La[c],c):Ka.hasOwnProperty(0)?f():Ka.hasOwnProperty(0)||1!=j()||(B(),m())}function m(){Ea=!1,Ca?wa("dataLoaded"):wa("initComplete",{detail:{value:"model"}})}function n(){Ca=!0}function o(a,b){if(void 0!==a){var c,d,e,i,j,k,l=Ba.selected.year,m=Ba.selected.yearType,n=a.split(/\r\n|\r|\n/),o=ga($.trim(n[0].split("|")[1]));for(Ja[l][m][b].loaded=o,Ja[l][m][b].needData=!0,Na=o,c=1;c<n.length;c++)if(""!=(d=n[c])&&(e=d.split("|"),i=$.trim(e[0]),j=ga($.trim(e[1])),l+"_"+m+"_"+i,Ja[l].hasOwnProperty(m)))if(Ja[l][m].hasOwnProperty(i)){if(k=Ja[l][m][i].loaded,(j.getTime()!=k.getTime()||"LIVE"==i&&(Ba.isIpad||Ba.isHomepage||Ba.isMobile))&&("US"!=i&&"US_primaries"!=i&&i==Ba.selected.state||"LIVE"==i&&(Ba.isUS||Ba.isHomepage||Ba.isIpad||Ba.isMobile))&&("LIVE"==i&&Da||"US_primaries"!=i&&"US"!=i&&"CONFIG"!=i&&"config_primaries"!=i&&"CONFIG_primaries"!=i&&"timestamps"!=i))if("LIVE"==i)Ja[l][m].hasOwnProperty(i)?Ja[l][m][i].needData=!0:ea(l,m,i,!0),g(i);else{var p,q,r=Ba.selected.date.split(","),s=0;for(s;s<r.length;s++)p=r[s],q=i+"_"+p,Ja[l][m].hasOwnProperty(q)?Ja[l][m][q].needData=!0:ea(l,m,q,!0),g(q)}}else if(i==Ba.selected.state&&!Ba.isUS&&"US"!=i||"US"==i&&"G"==m&&Ba.isUS||"US_primaries"==i&&"P"==m&&Ba.isUS||"CONFIG"==i&&"G"==m||"config_primaries"==i&&"P"==m||"CONFIG_primaries"==i&&"P"==m)if("LIVE"!=i&&"US_primaries"!=i&&"US"!=i&&"CONFIG"!=i&&"config_primaries"!=i&&"CONFIG_primaries"!=i&&"timestamps"!=i){var p,q,r=Ba.selected.date.split(","),s=0;for(s;s<r.length;s++)p=r[s],q=i+"_"+p,ea(l,m,q,!0),g(q)}else ea(l,m,i,!0),g(i);else ea(l,m,i,!0);Aa.timestamps=!0,h(b),f()}else B(!0)}function p(a,b){var c=!1;if(void 0!==a){if(Ia=a,Ia.hasOwnProperty("timestamp")){var d=Ba.selected.year,e=Ba.selected.yearType,i=ga($.trim(Ia.timestamp));Ja[d][e][b].loaded=i,Ja[d][e][b].needData=!1}if(Ia.hasOwnProperty("livedate")&&ta(),Ia.hasOwnProperty("pollsClosing")){var j,k=0;for(k;k<Ba.stateAbbs.length;k++)j=Ba.stateAbbs[k],Ia.pollsClosing.hasOwnProperty(j)&&(Ha[j]=Ia.pollsClosing[j])}c=!0}c&&(Aa[b]=!0),h(b),(Da||Ba.isSchedule)&&(Ba.isUS||Ba.isHomepage||Ba.isIpad||Ba.isMobile)?(ea(Ba.selected.year,Ba.selected.yearType,"LIVE",!0),g("LIVE"),f()):!Da&&Ba.isHomepage?(ea(Ba.selected.year,Ba.selected.yearType,"LIVE",!0),g("US_primaries"),f()):l()}function q(a,b){var c=!1;if(void 0!==a){var d=Ba.selected.year,e=Ba.selected.yearType,f=a.split(/\r\n|\r|\n/),g=Ja[d][e][b].loaded,i=ga($.trim(f[0].split(";")[2]));g.getTime()!=i.getTime()?Ja[d][e][b].needData=!0:Ja[d][e][b].needData=!1,Ja[d][e][b].loaded=i,r(f[1],d,e),"US"!=b&&"LIVE"!=b||"G"!=Ba.selected.yearSeason||"G"!=e||1==f[2].split("|").length||z(f[2],d,e);var j,k,m,n;for(j=3;j<f.length;j++)k=f[j],""!=k.replace(/\s*/g,"")&&(m=s(d,k),u(d,m),m.officeID&&(n=v(d,m,k),w(m,n.raceVotes,n.numCandidates),x(d,m),y(d,m)));c=!0}c&&(Aa[b]=!0),h(b),l()}function r(a,b,c){if(void 0!==a){Oa.hasOwnProperty(b)||(Oa[b]={}),Oa[b].hasOwnProperty(c)||(Oa[b][c]={});var d,e,f=a.split("|");for(e=0;e<f.length;e++){d=f[e];var g=d.split(";"),h=g[0],i=$.trim(g[1]),j=$.trim(g[2]),k=Y(h);Z(h);Oa[b][c][h]=new D(h,i,j,k)}}}function s(a,b){var c=b.split("||")[0].split(";"),d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i="X"==c[5],j=parseFloat(c[6]),k="X"==c[7],l=parseFloat(c[8]);(-1==l||isNaN(l))&&(l=0);var m=parseInt(c[9],10);(-1==m||isNaN(m))&&(m=0);var n=!1,o=!1,p=!1;c.hasOwnProperty(10)&&(n="X"==c[10]),c.hasOwnProperty(11)&&(o="X"==c[11]),c.hasOwnProperty(12)&&(p="X"==c[12]),m=d+m;var q=parseInt(h,10);return q>0&&(g=q),new E(d,e,f,g,h,i,j,k,l,m,n,o,p)}function u(a,b){var c=b.stateAbb,d=b.fips,e=c+d,f=b.officeID,g=b.raceTypeID,h=(b.raceNum,b.raceNum),i=b.subunitName,j=b.homepagePick;Pa.hasOwnProperty(a)||(Pa[a]={},isNewRace=!0),Pa[a].hasOwnProperty(c)?Pa[a][c].hasHomepagePicks||(Pa[a][c].hasHomepagePicks=j):(Pa[a][c]={},Pa[a][c].hasHomepagePicks=j,isNewRace=!0),Pa[a][c].hasOwnProperty(e)||(Pa[a][c][e]={},isNewRace=!0),Pa[a][c][e].hasOwnProperty(f)||(Pa[a][c][e][f]={},isNewRace=!0),Pa[a][c][e][f].hasOwnProperty(g)||(Pa[a][c][e][f][g]={},isNewRace=!0),Pa[a][c][e][f][g].hasOwnProperty(h)||(Pa[a][c][e][f][g][h]={},isNewRace=!0),Pa[a][c][e].subunitName=i,Pa[a][c][e].fips=d,Pa[a][c][e][f][g][h]=b}function v(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c.split("||")[1].split("|"),q=(b.stateAbb,b.officeID,b.raceTypeID,b.fips),r=b.precinctsPercent,s=b.raceNum,t=q>999,u=0,v={};for(raceVoteDataIndex=0;raceVoteDataIndex<p.length;raceVoteDataIndex++)o=p[raceVoteDataIndex],u++,d=o.split(";"),e=d[0],f=d[1],g=parseFloat(d[2]),h=parseFloat(d[3]),i="X"==d[4],j="X"==d[5],k="X"==d[6],l=parseFloat(d[7]),m=parseInt(d[8],10),n="R"==d[4]&&!t,(-1==l||isNaN(l))&&(l=0),v[e]=new F(e,f,g,h,i,j,k,l,m,n,s,r);return{raceVotes:v,numCandidates:u}}function w(a,b,c){a.raceVotes=b,a.numCandidates=c}function x(a,b){var c,d,e=b.stateAbb,f=b.officeID,g=b.raceTypeID,h=b.fips,i=e+h,j=(b.raceNum,b.raceNum),k=h>999,l=!1,m=!1,n=Pa[a][e][i][f][g][j].raceVotes,o=0;for(d in n)c=n[d],o+=c.ev,(c.votecount>0||c.votepercent>0||1==c.winner&&!k)&&(l=!0),c.politicoPick&&(m=!0);Pa[a][e][i][f][g][j].hasResults=l,Pa[a][e][i][f][g][j].hasPicks=m,Pa[a][e][i][f][g][j].numEVsWon=o,Ga.hasOwnProperty(f)||(Ga[f]=!1),Ga[f]||(Ga[f]=l)}function y(a,b){var c=b.stateAbb,d=b.officeID,e=b.raceTypeID,f=parseInt(b.fips,10),g=c+f,h=(b.raceNum,b.raceNum),i=f>999,j=1==b.numCandidates,k=b.raceVotes,l=(b.precinctsPercent,!1),m=!1,n=!1,o="",p=0;if(i){var q,r,s;for(s in k)q=k[s],(0!=q.votecount||0!=q.votepercent||q.winner&&j)&&(r=!0),q.incumbent&&(n=!0);if(r)for(s in k)q=k[s],q.winner&&j&&(l=!0),q.votecount>=p&&(p=q.votecount,o=q.party)}else{var t,u;for(u in k)t=k[u],t.winner&&(t.winner=!0,l=!0,o=t.party,p=t.votecount),t.runoff&&(m=!0,p=t.votecount),t.incumbent&&(n=!0,p=t.votecount)}Pa[a][c][g][d][e][h].hasIncumbent=n,Pa[a][c][g][d][e][h].hasRunoff=m,Pa[a][c][g][d][e][h].hasWinner=l,Pa[a][c][g][d][e][h].winningParty=o}function z(a,b,c){if(""!=a){a=a.split("||");var d,e,f,g,h,i,j=["P","S","H","G"],k=["D","I","R"],l=["total","gained","lost","net"],m=0,n=0;for(Pa.hasOwnProperty(b)||(Pa[b]={}),Pa[b].hasOwnProperty("bop")||(Pa[b].bop={}),m;m<j.length;m++)if(n=0,d=j[m],e=a[m],Pa[b].bop.hasOwnProperty(d)||(Pa[b].bop[d]={}),"P"==d)for(f=e.split(";"),n;n<k.length;n++)g=k[n],Pa[b].bop[d][g]=parseInt(f[n],10);else for(h=e.split("|"),0,n;n<k.length;n++)for(g=k[n],void 0===h&&xa("setBalanceOfPower",h),f=h[n].split(";"),t=0,t;t<l.length;t++)i=l[t],Pa[b].bop[d].hasOwnProperty(g)||(Pa[b].bop[d][g]={}),Pa[b].bop[d][g].hasOwnProperty(i)||(Pa[b].bop[d][g][i]={}),Pa[b].bop[d][g][i]=parseInt(f[t])}}function A(){clearTimeout(za)}function B(a){a="boolean"==typeof a&&a,clearTimeout(za),(Ba.selected.year==Ba.selected.yearDefault||a)&&(Da||a)&&(Fa=0,C())}function C(){if(Fa!=Ba.timerDuration)Fa+=1,za=setTimeout(C,1e3);else{var a=(new Date).getTime()-Ba.cacheUserStart.getTime();Ba.cacheUserStart=new Date,Ba.serverDate.setMilliseconds(Ba.serverDate.getMilliseconds()+a),Fa=0,e()}}function D(a,b,c,d){if("No Votes"==c&&"Uncommitted"==b&&(c="",b="Uncommitted"),"None of these candidates"!=b&&"None of these candidates"!=c||(b="None of these candidates",c=""),null!=c&&null!=b){c==b&&(c="");var e=c.split(" ");e[e.length-1]==b&&e.length>1&&(b="")}this.id=a,this.firstName=c,this.lastName=b,this.url=d}function E(a,b,c,d,e,f,g,h,i,j,k,l,m){this.stateAbb=a,this.officeID=b,this.raceTypeID=c,this.fips=d,this.subunitName=e,this.homepagePick=f,this.precinctsPercent=parseFloat(g),this.politicoPick=h,this.ev=parseInt(i,10),this.raceNum=String(j),this.raceVotes={},this.hasResults=!1,this.hasPicks=!1,this.special=k,this.runoff=l,this.recall=m}function F(a,b,c,d,e,f,g,h,i,j,k,l){this.candID=a,this.party=b,this.votecount=parseInt(c,10),this.votepercent=parseFloat(d),this.winner=e,this.politicoPick=f,this.incumbent=g,this.ev=parseFloat(h),this.order=parseInt(i,10),this.runoff=j,this.raceNum=String(k),this.precinctsPercent=parseFloat(l)}function G(a,b,c){c=c||"All",b=b||"All",returned={};return Pa.hasOwnProperty(a)&&Pa[a].hasOwnProperty("bop")&&("All"==b?returned=Pa[a].bop:Pa[a].bop.hasOwnProperty(b)&&("All"==c?returned=Pa[a].bop[b]:Pa[a].bop[b].hasOwnProperty(c)&&(returned=Pa[a].bop[b][c]))),returned}function H(a){return K(la(a))}function I(a){var b=a.stateAbb,c=new Date;return Ha.hasOwnProperty(b)&&Ha[b].hasOwnProperty("datetime")&&(c=ga(Ha[b].datetime)),c}function J(a,b,c){var d="",e=a.stateAbb;return Ha.hasOwnProperty(e)&&Ha[e].hasOwnProperty("string")&&(d=Ha[e].string),d}function K(a){a=a||Na;var b=M(a,!0,!0),c=b.month<10?"0"+String(b.month):b.month,a=b.date<10?"0"+String(b.date):b.date;return b.year+"-"+c+"-"+a+"T"+b.hours+":"+b.minutes+":"+b.seconds+"-05:00"}function L(a,b,c){c=c||Na;var d="",e="",f=M(c,!1,!1);return a&&(e=f.month+"/"+f.date+"/"+f.year+(b?" ":"")),b&&(d=f.hours+":"+f.minutes+" "+f.amOrpm),e+d}function M(a,b,c){var d=a.getFullYear()-(b?0:2e3),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),i=a.getSeconds(),j="AM ET";return g>11&&(j="PM ET"),g>12&&!c?g-=12:0!=g||c||(g=12),h<10&&(h="0"+String(h)),i<10&&(i="0"+String(i)),{year:d,month:e,date:f,hours:g,minutes:h,seconds:i,amOrpm:j}}function N(a,b,c,d,e,f){var g,h,i,j,k,l,m={},n=0,o=0,p=c+d;if(Pa.hasOwnProperty(a)&&Pa[a].hasOwnProperty(c)&&Pa[a][c].hasOwnProperty(p)&&Pa[a][c][p].hasOwnProperty(e)){for(o=0;o<f.length;o++)g=f[o].raceType,i=f[o].raceNum,j=c+i,k=f[o].special,l=f[o].runoff,h=g+(k?"S":"")+(l?"R":""),Pa[a][c][p][e].hasOwnProperty(g)&&Pa[a][c][p][e][g].hasOwnProperty(j)&&(i==Pa[a][c][p][e][g][j].raceNum&&(m.hasOwnProperty(n)?m[n].hasOwnProperty(g)&&(n++,m[n]={fips:d}):m[n]={fips:d}),m[h]=Pa[a][c][p][e][g][j]);m.hasOwnProperty(n)&&n++}return m}function O(a,b,c,d,e,f){var g,h,i,j,k,l,m=[],d=1,n=0,o=0;if(Pa.hasOwnProperty(a)&&Pa[a].hasOwnProperty(c))for(d;d<60;d++)if(h=c+d,Pa[a][c].hasOwnProperty(h)&&Pa[a][c][h].hasOwnProperty(e))for(o=0;o<f.length;o++)("G"==(g=f[o].raceType)&&"G"==b||"G"!=g&&"P"==b||Ba.isUS)&&(i=f[o].raceNum,j=c+i,k=f[o].special,l=f[o].runoff,g+(k?"S":"")+(l?"R":""),Pa[a][c][h][e].hasOwnProperty(g)&&Pa[a][c][h][e][g].hasOwnProperty(j)&&(m.push(Pa[a][c][h][e][g][j]),n++));return m}function P(a,b,c,d,e,f){var g,h,i,j,k,l,m,n=[],d=1e3*parseInt(d)+1,o=d+999,p=0,q=0;if(Pa.hasOwnProperty(a)&&Pa[a].hasOwnProperty(c))for(d;d<o;d++)if(h=c+d,Pa[a][c].hasOwnProperty(h)&&Pa[a][c][h].hasOwnProperty(e)){for(q=0;q<f.length;q++)("G"==(g=f[q].raceType)&&b==g||"G"!=g&&"P"==b)&&(j=f[q].raceNum,k=c+j,l=f[q].special,m=f[q].runoff,i=g+(l?"S":"")+(m?"R":""),Pa[a][c][h][e].hasOwnProperty(g)&&Pa[a][c][h][e][g].hasOwnProperty(k)&&j==Pa[a][c][h][e][g][k].raceNum&&(n.hasOwnProperty(p)?n[p].hasOwnProperty(g)&&(p++,n[p]={fips:d}):n[p]={fips:d},n[p][i]=Pa[a][c][h][e][g][k]));n.hasOwnProperty(p)&&p++}return n}function Q(a,b,c,d){a="string"==typeof a?a:Ba.selected.year,b=sa(b)?b:[],d=d||"";var e,f,g,h,i,j,k,l,m,n=[],o=0;if(Pa.hasOwnProperty(a)&&b.length>0)for(m=0;m<b.length;m++)if(e=b[m],f=e.stateAbb,k=e.officeID,raceType=e.raceType,l=e.raceNum,h=null==c?e.fips:c,Pa[a].hasOwnProperty(f))for(""!=d?"counties"==d?(g=parseInt(Ba.statesInfo[f].fips+"000",10),h=g,i=h+999):"districts"==d&&(g=0,h=g,i=60):(g=h,i=g),h;h<=i;h++)j=h==g&&"counties"==d?f+0:f+h,Pa[a][f].hasOwnProperty(j)&&Pa[a][f][j].hasOwnProperty(k)&&Pa[a][f][j][k].hasOwnProperty(raceType)&&Pa[a][f][j][k][raceType].hasOwnProperty(l)&&(n[o]={fips:h,raceType:raceType,config:e,data:Pa[a][f][j][k][raceType][l]},o++);return n}function R(a,b,c,d,e,f){a="string"==typeof a?a:Ba.selected.year,b="string"==typeof b?b:Ba.selected.yearType,c="string"==typeof c?c:"All",d="string"==typeof d?d:"All",f=sa(f)?f:[];var g;"H"==c||"All"==c?g=Ba.statesInfo[d].numDistricts2012:e>999&&(g=Ba.statesInfo[d].fips+999);var h,i,j,k=[],l=0,m=0;j="All"==c?["P","S","H","G","I","L","M"]:[c];var n,d,o=0,p="US"==d||"All"==d?Ba.stateAbbs:[d],q=0;if(Pa.hasOwnProperty(a)&&f.length>0)for(q;q<p.length;q++)if(d=p[q],Pa[a].hasOwnProperty(d))for(e;e<=g;e++)if(fipsStr=d+e,Pa[a][d].hasOwnProperty(fipsStr))for(o=0;o<j.length;o++)if(n=j[o],Pa[a][d][fipsStr].hasOwnProperty(n))for(m=0;m<f.length;m++)i=f[m].raceType,h=f[m].raceNum,Pa[a][d][fipsStr][n].hasOwnProperty(i)&&Pa[a][d][fipsStr][n][i].hasOwnProperty(h)&&(k[l]=Pa[a][d][fipsStr][n][i][h],l++);return k}function S(a){var b={};return Ia.races.hasOwnProperty(a)&&(b=Ia.races[a]),b}function T(a,b,c,d,e,f,g,h,i,j,k){a="string"==typeof a?a:Ba.selected.year,b="string"==typeof b?b:Ba.selected.yearSeason,c="string"==typeof c?c:Ba.selected.yearType,d="string"==typeof d?d:["All"],e="string"==typeof e?e:"All",f="string"==typeof f?f:"All",g="boolean"==typeof g?g:"All",h="boolean"==typeof h?h:"All",i="boolean"==typeof i?i:"All",j="boolean"==typeof j?j:"All",k="boolean"==typeof k?k:"All";var l,m=[];l="LIVE"==d?Ia.livedate:d.split?d.split(","):d;var n,o,p,q,r,s,t,u,v,w,x="US"==f||"All"==f||""==f?Ba.stateAbbs:[f],y=0;for(y;y<x.length;y++)if(f=x[y],Ia.calendar.hasOwnProperty(f)){s=Ia.calendar[f];for(r in s){for(t=!1,w=0;w<l.length;w++)if((u=l[w])==r||"All"==u){t=!0;break}if(t)for(q=s[r],v=0;v<q.length;v++)n=q[v],o=Ia.races[n],p=o.raceType,o.hasOwnProperty("homepagePick")||(j="All"),o.hasOwnProperty("politicoPick")||(k="All"),Ia.races.hasOwnProperty(n)&&(p!=c&&("G"==p||"P"!=c)||o.officeID!=e&&"All"!=e&&""!=e||o.special!=g&&"All"!=g||o.runoff!=h&&"All"!=h||o.homepagePick!=j&&"All"!=j||o.politicoPick!=k&&"All"!=k||m.push(o))}}return m}function U(a,b,c,d,e,f,g,h,i){var j,k,l=[],m=[],n=[],o=[];i="boolean"==typeof i&&i;for(j in a)if(k=a[j],b==k.raceNum||isNaN(k.raceNum)){var p={candID:k.candID,lastName:aa(k.candID,c,d),sortNum:k.order};f?l.push(p):g&&h?g&&h&&(k.incumbent?o.push(p):k.politicoPick&&k.order>0?n.push(p):l.push(p)):k.incumbent?o.push(p):l.push(p)}var q=0;if(o.length>0)for(o.sort(function(a,b){var c=a.lastName,d=b.lastName;return c<d?-1:c>d?1:0}),q;q<o.length;q++)m.push(a[o[q].candID]);var r=0;if(n.length>0)for(i?n.sort(function(a,b){var c=a.lastName.toLowerCase(),d=b.lastName.toLowerCase();return c<d?-1:c>d?1:0}):n.sort(function(a,b){return a.sortNum-b.sortNum}),r;r<n.length;r++)m.push(a[n[r].candID]);if(n.length,0==n.length){l.sort(function(a,b){return a.sortNum-b.sortNum});var s,t;for(t in l)s=l[t],m.push(a[s.candID])}return m}function V(a){var b="";return Ia.hasOwnProperty("explainertext")&&Ia.explainertext.hasOwnProperty(a)&&(b=Ia.explainertext[a]),b}function W(a,b,c,d,e,f,g){d=void 0!==d&&d,f=!e&&f,g="boolean"==typeof g&&g;var h,i,j=a.raceVotes,k=a.raceNum,l=[],m=[],n=[],o={},p=0,q=[],r=[];for(i in j)h=j[i],h.winner&&!d?r.push(h):h.runoff&&!d?r.push(h):h.votecount>0?m.push(h):h.votepercent>0?n.push(h):(p++,o[h.candID]=h);if(p>0&&(q=U(o,k,b,c,a.numCandidates,a.hasResults,a.hasPicks,f,g)),m.length>0&&(m=m.sort(function(a,b){return b.votecount-a.votecount})),n.length>0&&(m=m.concat(n.sort(function(a,b){return b.votepercent-a.votepercent}))),l=m.concat(q),r.length>0){r=r.sort(function(a,b){return b.votecount-a.votecount}),l=r.concat(l)}return l}function X(a,b,c){var d="";return Oa.hasOwnProperty(b)&&Oa[b].hasOwnProperty(c)&&Oa[b][c].hasOwnProperty(a)&&(d=Oa[b][c][a]),d}function Y(a,b,c){var d="";return Ia.hasOwnProperty("candidates")&&Ia.candidates.hasOwnProperty(a)&&(d=Ia.candidates[a].url),d}function Z(a,b,c){var d="";return Ia.hasOwnProperty("candidates")&&(Ia.candidates.hasOwnProperty(a)?d=Ia.candidates[a].image:Ia.candidates.hasOwnProperty("default")&&(d=Ia.candidates.default.image)),d}function _(a,b,c){var d="",e=X(a,b,c);return e&&(d=e.firstName.charAt(0)),d}function aa(a,b,c){var d="",e=X(a,b,c);return e&&(d=e.lastName),d}function ba(a){var b="";return Qa.hasOwnProperty(a)&&(b=Qa[a]),b}function ca(a,b,c){var d=!1;return Pa.hasOwnProperty(a)&&Pa[a].hasOwnProperty(c)&&Pa[a][c].hasHomepagePicks&&(d=Pa[a][c].hasHomepagePicks),d}function da(a,b,c){var d=!1;return Ja.hasOwnProperty(a)&&Ja[a].hasOwnProperty(b)&&Ja[a][b].hasOwnProperty(c)&&Ja[a][b][c].needData&&(d=!0),d}function ea(a,b,c,d){Ja.hasOwnProperty(a)||(Ja[a]={}),Ja[a].hasOwnProperty(b)||(Ja[a][b]={}),Ja[a][b].hasOwnProperty(c)||(Ja[a][b][c]={},Ja[a][b][c].loaded=Ma,Ja[a][b][c].needData=d)}function fa(a,b){var c=Math.abs(b-a)/1e3,d=Math.floor(c/86400);c-=86400*d;var e=Math.floor(c/3600)%24;c-=3600*e;var f=Math.floor(c/60)%60;return c-=60*f,{days:d,hours:e,minutes:f,seconds:Math.floor(c%60)}}function ga(a){var b=a.split("'")[1].split(" ")[0],c=a.split("'")[1].split(" ")[1].split("'")[0],d=parseInt(b.split("-")[0],10),e=parseInt(b.split("-")[1]-1,10),f=parseInt(b.split("-")[2],10),g=parseInt(c.split(":")[0],10),h=parseInt(c.split(":")[1],10),i=parseInt(c.split(":")[2].split(".")[0],10);return new Date(d,e,f,g,h,i,0)}function ha(a){var b=a.split("'")[1].split(" "),c=b[0].split("-"),d="-",e=b[1].split("'")[0].split(d);0===e.length&&(d="+",e=b[1].split("'")[0].split(d));var f=e[0].split(":"),g=e[1].split(":"),h=parseInt(g[0]);"-"===d&&(h=-h);var i=parseInt(c[0],10),j=parseInt(c[1]-1,10),k=parseInt(c[2],10),l=parseInt(f[0],10)-h,m=parseInt(f[1],10),n=parseInt(f[2].split(".")[0],10),o=new Date(i,j,k,l,m,n),p=ka(new Date(o.getTime()));return o.setHours(o.getHours()-("EDT"===p?4:5)),o}function ia(a){var b=new Date(Ba.serverDate.getTime());if(a){var c=new Date;b.setSeconds(c.getSeconds()),b.setMinutes(c.getMinutes())}return b}function ja(a,b,c){var d=a||new Date,e=a.getTimezoneOffset()/60;d.setHours(d.getHours()+e);var f=ka(new Date(d.getTime()));return d.setHours(d.getHours()-("EDT"===f?4:5)),d}function ka(a){var b=a||new Date,c=new Date(b.getFullYear(),10,1);c.setHours(2);var d=0;for(d;d<7&&(c.setDate(c.getDate()+1),0!=c.getDay());d++);var e=new Date(b.getFullYear(),2,7);e.setHours(2),d=0;var f=0;for(d;d<15&&(e.setDate(e.getDate()+1),0==e.getDay()&&f++,2!=f);d++);return c.getTime()>b.getTime()&&b.getTime()>e.getTime()?"EDT":"EST"}function la(a){return ga("{ts '"+a+"'}")}function ma(a){var b="",c=["January","February","March","April","May","June","July","August","September","October","November","December"];return c.hasOwnProperty(a)&&(b=c[a]),b}function na(a,b){a=a||Ba.cacheDuration,b=b||!1;var c,d=new Date(Ba.serverDate.getTime()),e=d.getTime(),f=Ba.cacheStart.getTime(),g=e-f,h=new Date(Ba.cacheStart.getTime());if(0===a||isNaN(a))h=d;else{if(g<0)c=0;else{c=0;var i=(e-f)/6e4,j=a/6e4;c=b?Math.floor(i/j)*a:Math.ceil(i/j)*a}h.setSeconds(c/1e3,0)}return"?cachebuster="+oa(h)}function oa(a){var b=a.getUTCFullYear(),c=a.getUTCMonth()+1,d=a.getUTCDate(),e=a.getUTCHours(),f=a.getUTCMinutes(),g=a.getUTCSeconds();return b.toString()+(c<10?"0":"")+c.toString()+(d<10?"0":"")+d.toString()+(e<10?"0":"")+e.toString()+(f<10?"0":"")+f.toString()+(g<10?"0":"")+g.toString()}function pa(a,b){var c="";if(10<a&&a<14)c="th";else switch(a%10){case 1:c="st";break;case 2:c="nd";break;case 3:c="rd";break;default:c="th"}return c="html"==b?a+"<sup>"+c+"</sup>":a+c}function qa(a){return a.toString().search(/\./)>-1?a.toString():a.toString()+".0"}function ra(a){for(var b=a.toString().split("."),c=b.length>1?b[1].toString():"",d=b[0];/(-?[0-9]+)([0-9]{3})/.test(d);)d=d.replace(/(-?[0-9]+)([0-9]{3})/,"$1,$2");return d+(c?"."+c:"")}function sa(a){var b=!1;return void 0!==a&&(b="[object Array]"===Object.prototype.toString.call(a)),b}function ta(){if(Ia.livedate.length>0){var a,b=[];b=Ba.selected.date.split(",");var c,d=0;for(d;d<Ia.livedate.length;d++){for(a=Ia.livedate[d],c=0;c<b.length;c++)if(b[c]==a){Da=!0;break}if(Da)break}}}function ua(a){Ba.isHomepage&&(Ba.selected.state=a)}function va(a){Ba.isIpad||Ba.isHomepage||Ba.isMobile||(Ba.selected.date=a)}function wa(a,b){try{var c=new window.CustomEvent(a,b)}catch(d){var c=document.createEvent("CustomEvent");void 0!==b&&(b=b.detail),c.initCustomEvent(a,!0,!0,b)}document.dispatchEvent(c)}function xa(a,b){wa("debug",{detail:{type:"MODEL: "+a,debug:b}})}function ya(){A();var a,b,c,d,f,g,h,i,j,k={},l=[],m=[],n=[],o=[],p=Ba.selected.yearType;for(a in Pa)for(b in Pa[a])if("bop"!=b)for(c in Pa[a][b])if("hasHomepagePicks"!=c)for(d in Pa[a][b][c])if("fips"!=d&&"subunitName"!=d)for(f in Pa[a][b][c][d])if("G"==p&&f!=p||"G"!=p&&"G"==f)l.push(Pa[a][b][c][d][f]);else for(g in Pa[a][b][c][d][f])if(h=Pa[a][b][c][d][f][g],k.hasOwnProperty(d)||(k[d]=[]),k[d].push(h),0!==parseInt(h.precinctsPercent,10)||!1!==h.hasWinner||!1!==h.hasRunoff||""!==h.winningParty)m.push(h);else for(i in h.raceVotes)j=h.raceVotes[i],""===j.party&&"I"!=d&&n.push({raceVote:j,race:h}),0===parseInt(j.votecount,10)&&0===parseInt(j.votepercent,10)&&!1===j.winner&&!1===j.runoff||o.push({raceVote:j,race:h});Ba.develop&&(Pa[Ba.selected.year].hasOwnProperty("bop")&&console.log("Balance Of Power:",Pa[a].bop),l.length>0&&console.log("Found Wrong Race Type:",l),m.length>0&&console.log("Found Race with Non-Zeros:",m),o.length>0&&console.log("Found RaceVote with Non-Zeros:",o),n.length>0&&console.log("Found Candidate without a Party:",n)),Pa={},Ba.statesToCheck.hasOwnProperty(0)&&(Ba.selected.state=Ba.statesToCheck.shift(),e())}var za,Aa,Ba={},Ca=!1,Da=!1,Ea=!1,Fa=0,Ga={},Ha={AL:{datetime:"{ts '2016-11-08 19:00:00'}",string:"7:00 PM ET"},AK:{datetime:"{ts '2016-11-08 23:00:00'}",string:"11:00 PM ET"},AZ:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},AR:{datetime:"{ts '2016-11-08 20:30:00'}",string:"8:30 PM ET"},CA:{datetime:"{ts '2016-11-08 23:00:00'}",string:"11:00 PM ET"},CO:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},CT:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},DE:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},DC:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},FL:{datetime:"{ts '2016-11-08 19:00:00'}",string:"7:00 PM ET"},GA:{datetime:"{ts '2016-11-08 19:00:00'}",string:"7:00 PM ET"},HI:{datetime:"{ts '2016-11-08 23:00:00'}",string:"11:00 PM ET"},ID:{datetime:"{ts '2016-11-08 22:00:00'}",string:"10:00 PM ET"},IL:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},IN:{datetime:"{ts '2016-11-08 18:00:00'}",string:"6:00 PM ET"},IA:{datetime:"{ts '2016-11-08 22:00:00'}",string:"10:00 PM ET"},KS:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},KY:{datetime:"{ts '2016-11-08 18:00:00'}",string:"6:00 PM ET"},LA:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},ME:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},MD:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},MA:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},MI:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},MN:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},MS:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},MO:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},MT:{datetime:"{ts '2016-11-08 22:00:00'}",string:"10:00 PM ET"},NE:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},NV:{datetime:"{ts '2016-11-08 22:00:00'}",string:"10:00 PM ET"},NH:{datetime:"{ts '2016-11-08 19:00:00'}",string:"7:00 PM ET"},NJ:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},NM:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},NY:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},NC:{datetime:"{ts '2016-11-08 19:30:00'}",string:"7:30 PM ET"},ND:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},OH:{datetime:"{ts '2016-11-08 19:30:00'}",string:"7:30 PM ET"},OK:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},OR:{datetime:"{ts '2016-11-08 22:00:00'}",string:"10:00 PM ET"},PA:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},RI:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},SC:{datetime:"{ts '2016-11-08 19:00:00'}",string:"7:00 PM ET"},SD:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},TN:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},TX:{datetime:"{ts '2016-11-08 20:00:00'}",string:"8:00 PM ET"},UT:{datetime:"{ts '2016-11-08 22:00:00'}",string:"10:00 PM ET"},VT:{datetime:"{ts '2016-11-08 19:00:00'}",string:"7:00 PM ET"},VA:{datetime:"{ts '2016-11-08 19:00:00'}",string:"7:00 PM ET"},WA:{datetime:"{ts '2016-11-08 23:00:00'}",string:"11:00 PM ET"},WV:{datetime:"{ts '2016-11-08 19:30:00'}",string:"7:30 PM ET"},WI:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},WY:{datetime:"{ts '2016-11-08 21:00:00'}",string:"9:00 PM ET"},US:{datetime:"{ts '2016-11-08 18:00:00'}",string:"6:00 PM ET"}},Ia={timestamp:"{ts '1000-01-01 00:00:01'}",livedate:[],calendar:{},races:{}},Ja={},Ka=[],La=[],Ma=new Date(1900,0,1),Na=new Date(1900,0,1),Oa={},Pa={},Qa={ACP:"A Connecticut Party",AFP:"American Freedom",AGN:"Against",AHP:"American Heritage",AIP:"American Independent",AKI:"Alaskan Independence",AMC:"American Constitution",AME:"Americans Elect",AMF:"America First",AMI:"American Indian",AMP:"America's Party",AMR:"American Party",AMS:"Americans",AO:"All Others",ATP:"American Third Position",BEP:"Blue Enigma Party",BLD:"Builders Party",BOT:"Boston Tea",BUC:"Buchanan Reform",CAM:"Constitutional Americans",CC:"Concerned Citizens",CEN:"Centrist Party",CF:"Citizens First",CIP:"Connecticut Independent Party",CM:"Cool Moose",CMT:"Communist",CNL:"Constitutional Government",CNP:"Concerns Of People",CON:"Conservative",CRK:"Politicians Are Crooks",CST:"Constitution",CTL:"CT For Lieberman",DAS:"Descendants Of American Slaves",DCG:"DC Statehood Green",DEM:"Democrat",EFP:"Earth Federation",EPF:"Ecology Party Of FL",FAA:"Fair",FDL:"Fair Deal",FEP:"Free Energy",FOR:"For",FRE:"Freedom",FRU:"Friends United",FSB:"Farmers and Small Business",FSO:"Freedom Socialist",FVP:"Family Values Party",GNW:"Greens No To War",GOP:"Republican",GRN:"Green",GRP:"Grass Roots",HCP:"Healthcare Party",HP:"Home Protection",HQ8:"Heartquake 08",IAP:"Independent American",IF:"Independent Fusion",IG:"Independent Grassroots",IGR:"Independent Green",ILS:"Illinois Solidarity",IND:"Independent",INP:"Independence",INR:"Independent Reform",INT:"Integrity Party",IP:"Independent Party",IPD:"Independent Party Of De",IPH:"Independent Party Of Hawaii",ISC:"Independent Save Our Children",IX:"Illinois Green",JP:"Justice Party",JS:"Jesus Party",LBL:"Liberal",LBP:"Looking Back",LEC:"Liberty,ecology,community",LFM:"Labor And Farm",LIB:"Libertarian",LMJ:"Legalize Marijuana",LTP:"Louisiana Taxpayers Party",LUN:"Liberty Union",LUP:"Liberty Union/progressive",MDE:"Moderate Democrat",MIP:"Maryland Independent Party",MJP:"Marijuana Party",MML:"Make Marijuana Legal",MNT:"Mountain Party",MOD:"Moderate",MRP:"Marijuana Reform",NAL:"New Alliance",NEB:"Nebraska",NEW:"New",NLP:"Natural Law",NMI:"New Mexico Independent Party",NNT:"No New Taxes",NO:"No",NON:"None Of The Above",NP:"Non Partisan",NPA:"No Party Affiliation",NPD:"No Party Designation",OBJ:"Objectivist",ONE:"One Earth",OTE:"128 District",OTH:"Other",PAC:"Pacific",PAG:"Pacific Green",PAT:"Patriot Party",PCF:"Pacifist",PCH:"Personal Choice",PEC:"Petitioning Candidate",PFP:"Peace and Freedom",PIP:"Puerto Rican Independence",PJP:"Peace and Justice Party",PLC:"Pro-life Conservative",PLP:"Progressive Labor Party",PNP:"New Progressive",POP:"Populist",PPD:"Popular Democratic",PPO:"Peace Party Of Oregon",PRG:"Progressive",PRO:"Prohibition",PRT:"Preserve Our Town",PSL:"Socialism and Liberation",PTC:"Property Tax Cut",PWF:"Protect Working Families",RES:"Resource",RFC:"Randolph For Congress",RJF:"Restore Justice-freedom",RM:"Reform Minnesota",RP:"Reform",RPM:"Republican Moderate",RTL:"Right To Life",SCC:"School Choice",SCL:"Socialism",SEP:"Socialist Equality",SM:"Save Medicare",SOC:"Socialist",SPU:"Socialist Usa",Sta:"Statehood Party",SWP:"Socialist Workers",TBD:"To Be Determined",TBL:"The Better Life",TCN:"Tax Cuts Now",TEA:"Tea Party",TLM:"Term Limits",TS:"Timesizing.com Party",UCZ:"United Citizens",UNA:"Unaffiliated",UNI:"United Independent",UNP:"United Pacifists",UNR:"Unenrolled",UNT:"United Party",UST:"U.S. Taxpayers",UTY:"Unity",VET:"Veterans Party Of America",WCP:"Working Class",WF:"Working Families",WLG:"Worker's League",WRI:"Write-In",WSN:"West Side Neighbors",WTP:"We The People",WW:"Workers World",WYC:"Wyoming Country Party",YES:"Yes"};return function(a,b,c){xa("initModel",a),a||(a={}),d(a,b,c),e()}(a,b,c),{tasksComplete:n,checkZeros:ya,loadData:e,needData:da,getBalanceOfPower:G,getPollsClosingText:J,getPollsClosingHTMLTimestamp:H,getLastUpdatedText:L,getPollsClosingDate:I,getDateEasternTime:ja,getServerDate:ia,getDateDifference:fa,getLastUpdatedHTMLTimestamp:K,getSpecificRace:N,getRaces:R,getRacesByRaceNums:Q,getCountyRaces:P,getDistrictRaces:O,getRaceNums:T,getRaceNumConfig:S,getDelegateExplainer:V,getSortedRaceVotesByVoteCount:W,getCandidateURL:Y,getCandidateImageURL:Z,getCandidateFirstIntial:_,getCandidateLastName:aa,getCandidate:X,getPartyName:ba,cacheBuster:na,setSelectedState:ua,setSelectedDate:va,getSelectedDate:function(){return Ba.selected.date},getMonthNameByNum:ma,stateHasHomepagePicks:ca,formatNumberNthName:pa,formatNumberDecimal:qa,formatNumberCommas:ra,isArray:sa,isLive:function(){return Da},officeHasResults:function(a){return Ga[a]}}}function modelLoadComplete(){}!function(electionApp,$,undefined){function queueJS(a,b,c){electionApp._config.jsFilesToLoad.push({URL:b,callback:c,loaded:!1});var d=document.createElement("script");d.setAttribute("type","text/javascript"),
d.setAttribute("src",b),void 0!==d&&document.getElementsByTagName("head")[0].appendChild(d)}function onFunctionAvailable(callback){var funcFound=!1;return"string"==typeof callback&&"function"==eval("typeof "+callback)&&(funcFound=!0),funcFound}function loadJS(){var a=!0,b=0;for(b;b<electionApp._config.jsFilesToLoad.length;b++)electionApp._config.jsFilesToLoad[b].loaded||(a=!1,electionApp._config.jsFilesToLoad[b].loaded=onFunctionAvailable(electionApp._config.jsFilesToLoad[b].callback));a?doNextTask():setTimeout(loadJS,100)}function loadJSComplete(){initEvents(),electionApp._config.initComplete={model:!1},electionApp.model=new ElectionModel(electionApp.options,electionApp.stateAbbs,electionApp.statesInfo),addTasks([{task:"initViews"}])}function initViews(){electionApp.options.map?("US"==electionApp.options.selected.state||""==electionApp.options.selected.state||""==electionApp.options.selected.state||electionApp.options.isHomepage||electionApp.options.isIpad||electionApp.options.isMobile)&&(electionApp.options.isHomepage&&"P"===electionApp.options.raceType||addTasks([{task:"setStateColors"}])):doNextTask(),electionApp._viewManager.init()}function childInitComplete(a){electionApp._config.initComplete[a]=!0;var b,c=!0;for(b in electionApp._config.initComplete)if(!1===electionApp._config.initComplete[b]){c=!1;break}!electionApp._config.init&&c&&doNextTask()}function initEvents(){document.addEventListener("initComplete",function(a){a.detail&&childInitComplete(a.detail.value)}),document.addEventListener("debug",function(a){doDebug(a.detail.type,a.detail.debug)}),document.addEventListener("dataLoaded",function(a){dataLoaded()}),electionApp.options.map&&(document.addEventListener("zoomComplete",function(a){zoomComplete()}),document.addEventListener("popupHide",function(a){popupHideClicked()}))}function dataLoaded(a){if(doDebug("dataLoaded - isLive?:"+electionApp.model.isLive()),electionApp.model&&electionApp.model.isLive()){if(electionApp.map){var b=electionApp.options.selected.state,c=("KS"==b||"MN"==b)&&!electionApp.options.isUS&&"2016"==electionApp.options.selected.year&&"P"==electionApp.options.selected.race&&"P"==electionApp.options.selected.yearType;if(electionApp.options.isUS&&!electionApp.options.mapShowNationalDistricts&&!electionApp.options.isHomepage||("US"==electionApp.options.selected.state||""==electionApp.options.selected.state)&&(electionApp.options.isHomepage||electionApp.options.isIpad||electionApp.options.isMobile))setStateColors("US");else if("H"==electionApp.options.selected.race||c){if("H"==electionApp.options.selected.race||c)if(electionApp.options.mapShowNationalDistricts){var b,d=0;for(d;d<electionApp.stateAbbs.length;d++)b=electionApp.stateAbbs[d],setDistrictColors(b)}else setDistrictColors(electionApp.options.selected.state)}else setCountyColors(electionApp.options.selected.state)}electionApp.options.selected.popup.hasOwnProperty("stateAbb")&&updatePopup(null,!0),updateHTML()}doNextTask()}function updateHTML(){if(doDebug("updateHTML"),electionApp.model&&electionApp.model.isLive()){var a=electionApp.options.selected.year,b=electionApp.options.selected.yearSeason,c=electionApp.options.selected.yearType;electionApp._viewManager.update();var d=electionApp.options.selected.race,e=!(""!=d&&!electionApp.options.isUS)||null,f=electionApp.options.isUS?"All":electionApp.options.selected.state,g=[],h=[],i=!electionApp.options.isUS&&"H"!=electionApp.options.selected.race&&""!=electionApp.options.selected.race;g=electionApp.model.getRaceNums(a,b,c,"LIVE",d,f,null,null,null,null,e);var j="",k=("KS"==f||"MN"==f)&&!electionApp.options.isUS&&"2016"==electionApp.options.selected.year&&"P"==electionApp.options.selected.race&&"P"==electionApp.options.selected.yearType;if(i&&!k?j="counties":k&&(j="districts"),h=electionApp.model.getRacesByRaceNums(a,g,null,j),h.length>0){!electionApp._config.updatedOnce&&electionApp.options.isUS&&electionApp.options.isSchedule;var l,m,n,o,p,q,r,s,t,u=0;for(u;u<h.length;u++)l=h[u].data,m=h[u].config,n=l.fips,o=m.raceType,(!(s=!!(n>999||n>0&&k))&&"I"===d||"I"!==d)&&(p=electionApp.model.getSortedRaceVotesByVoteCount(l,a,c,s,!1,!1),q=getRaceVotesHTML(l,p,a,c,d,o,!1,s),r="<tbody>"+q.join("")+"</tbody>",t="I"==d?s?"county-ballot":"state-ballot":"state-primary",setTableHTML(r,t,n,l,p,m))}}}function setTableHTML(a,b,c,d,e,f){var g,h,i,j=electionApp.options.selected.year,k=electionApp.options.selected.yearType,l=d.raceNum,m=d.stateAbb,n="",o="ballot"==b.split("-")[1],p=c>999,q=("KS"==d.stateAbb||"MN"==d.stateAbb)&&c>0&&!electionApp.options.isUS&&"2016"==j&&"P"==d.officeID&&"P"==k,r=d.numEVsWon,s=d.ev,t=electionApp.model.getPollsClosingText(f),u="",v="";"P"!=d.officeID||"P"!=k||p||q?"G"!=k||p||q||("I"!=d.officeID&&""!==t&&(u+='<p class="pos-1">Polls Closing: '+t+"</p>"),"P"==d.officeID&&r>0&&(u+='<p class="pos-2">Electoral Votes</p>')):(u+='<p class="pos-1">Delegates Allocated: '+r+"/"+s+"</p>",r>0&&(u+='<p class="pos-2">Delegates</p>')),v=d.precinctsPercent+"% Reporting","P"!=d.officeID||"G"!=k||p||q||(v+="&nbsp;&nbsp;&nbsp;Electoral Votes: "+s),o?(g=".results-detail",h=".share",i=".results-about"):(g=".results-data",h=".actions",i=".results-meta"),n=".results-group[data-fips='"+c+"'] "+g+"[data-racenum='"+l.slice(2)+"'][data-stateabb="+m+"]",$(n+" "+i+" "+h+" a.twitter, "+n+" "+i+" "+h+" a.js-twitter").attr("href",getTwitterLink(getTwitterJSON(j,k,d,f,e))),""!=u&&($(n+" .results-headings").length?$(n+" .results-headings").html(u):$(n+" .results-table").before('<div class="results-headings">'+u+"</div>")),$(n+" .results-table").html(a),$(n+" "+i+" .reporting").html(v)}function getRaceVotesHTML(a,b,c,d,e,f,g,h){var i,j,k,l,m=a.numEVsWon,n=1==b.length,o=0,p=[];for(o;o<b.length;o++){if(j=b[o],k=electionApp.model.getCandidate(j.candID,c,d),l=j.ev>0&&!h?j.ev:"",i="",j&&k){if(!a.hasResults&&g&&h&&!j.politicoPick)continue;i+="I"!=e?'<tr class="type-'+getPartyClass(j.party)+'">':'<tr class="type-ballot">',i+='<th scope="row" class="results-name">',""!=k.url&&(i+='<a href="'+k.url+'">'),i+='<span class="name-combo">',"O"!=f&&"G"!=f||"I"==e||(i+='<span class="token token-party"><abbr title="'+getPartyName(j.party,!1)+'">'+getPartySingleCharacter(j.party)+"</abbr></span> "),!j.winner&&!j.runoff||h||(i+='<span class="token token-winner"><b aria-hidden="true" class="icon icon-check"></b><span class="icon-text">Winner</span></span>'),j.runoff&&!h&&(i+="*"),i+=" "+(""!=k.firstName?k.firstName.charAt(0)+". ":"")+k.lastName,j.incumbent&&(i+=" (i)"),i+="</span>",""!=k.url&&(i+="</a>"),i+="</th>",n?i+='<td class="results-exception">Uncontested</td>':(i+='<td class="results-percentage"><span class="percentage-combo"><span class="number">'+electionApp.model.formatNumberDecimal(j.votepercent)+"%</span>",g||electionApp.options.isHomepage||electionApp.options.isIpad||electionApp.options.isMobile||(i+='<span class="graph"><span class="bar"><span class="index" style="width:'+electionApp.model.formatNumberDecimal(j.votepercent)+'%;"></span></span></span>'),i+="</span></td>",i+='<td class="results-popular">'+electionApp.model.formatNumberCommas(j.votecount)+"</td>","P"==a.officeID&&m>0&&!h&&(i+='<td class="delegates-cell">'+(0!==l&&""!==l?l:"")+"</td>")),i+="</tr>"}p.push(i)}return g&&p.length>6&&(p=p.slice(0,6-p.length)),p}function updateLastUpdated(){var a;if(electionApp.options.isHomepage||electionApp.options.isIpad||electionApp.options.isMobile)a=electionApp.model.getLastUpdatedText(!1,!0),$(".election-banner .banner-branding .timestamp").html("Updated: "+a);else{a=electionApp.model.getLastUpdatedText(!0,!0);var b=electionApp.model.getLastUpdatedHTMLTimestamp();$("dl.updated dd").html('<time datetime="'+b+'">'+a+"</time>")}}function getTwitterJSON(a,b,c,d,e){var f,g,h=0,i=[];for(h;h<e.length;h++)f=e[h],g=electionApp.model.getCandidateLastName(f.candID,a,b).replace(/'/g,"&quot;"),i.push({votepercent:f.votepercent,votecount:f.votecount,lastName:g,winner:f.winner,runoff:f.runoff,party:f.party});return{year:electionApp.options.selected.year,date:electionApp.options.selected.date,hasResults:c.hasResults,hasWinner:c.hasWinner,hasRunoff:c.hasRunoff,special:d.special,runoff:d.runoff,stateAbb:c.stateAbb,precincts:c.precinctsPercent,fips:c.fips,officeID:c.officeID,raceType:c.raceTypeID,yearType:b,unitName:c.subunitName,candidates:i,bitly:d.bitly,title:d.title.toLowerCase()}}function getTwitterLink(a){return"G"!==a.raceType?getTwitterLinkPrimaries(a):getTwitterLinkGeneral(a)}function getTwitterLinkGeneral(a){var b,c="",d=a.candidates,e=1==d.length,f=[],g=[],h="",i=0,j=0;for(j;j<d.length;j++)b=d[j],b.lastName=b.lastName.replace(/\&quot\;/g,"%27"),1===j&&(i=d[0].votepercent===b.votepercent?d[0].votecount-d[1].votecount:0),b.runoff&&f.push(b),b.winner&&g.push(b);var k="%23"+a.stateAbb;switch(a.officeID){case"P":k+="Pres";break;case"S":k+="Sen";break;case"H":k+=a.fips<10?"0"+a.fips:a.fips;break;case"G":k+="Gov";break;case"I":k+=""}"I"===a.officeID&&(a.title=a.title+" ballot measure");var l="",m=a.fips>999&&"DC"!=a.stateAbb&&"AK"!=a.stateAbb;if(m&&(l=a.unitName+" "+("LA"==a.stateAbb?"Parish":"County")),a.hasResults)if(a.hasWinner||m&&100===a.precincts)if("I"!==a.officeID)c=d[0].lastName+" wins "+(e?"uncontested ":"")+k+(m?" in "+l:"")+"%3B "+a.precincts+"%25 reporting.";else{var h="No"==d[0].lastName||"Against"==d[0].lastName||"Reject"==d[0].lastName||"Repealed"==d[0].lastName?"does not pass":"passes";c=k+" "+a.title+" "+h+"%3B "+a.precincts+"%25 reporting."}else a.hasRunoff?c="Runoff "+k+(m?" in "+l:"")+"%3B "+a.precincts+"%25 reporting.":a.hasResults&&0!==i&&"I"!==a.officeID?c="Race tied within "+i+" votes "+k+(m?" in "+l:"")+"%3B "+a.precincts+"%25 reporting.":a.hasResults&&(c="I"!==a.officeID?d[0].lastName+" leads "+k+(m?" in "+l:"")+"%3B "+a.precincts+"%25 reporting.":k+" "+a.title+" not called%3B "+a.precincts+"%25 reporting.");else c="I"!==a.officeID?k+(m?" in "+l:"")+"%3B "+a.precincts+"%25 reporting.":k+" "+a.title+"%3B "+a.precincts+"%25 reporting.";var n="";return n="string"==typeof _bitlyURL?_bitlyURL:a.hasOwnProperty("bitly")?a.bitly:"http%3A%2F%2Fpolitico.com","https://twitter.com/intent/tweet?text="+c+"&url="+n+"&hashtags=election"+a.year}function getTwitterLinkPrimaries(a){var b,c="",d="",e=a.candidates,f=1==e.length,g=!1,h=!0,i="",j=[],k=[],l="",m=0,n=0;for(n;n<e.length;n++)b=e[n],1==n&&e[0].votecount==e[1].votecount&&(g=!0),b.lastName=b.lastName.replace(/\&quot\;/g,"%27"),!0===h&&(0==n?i=b.party:""!=i&&i==b.party||(h=!1)),b.runoff&&j.push(b),b.winner&&k.push(b);var o="%23"+a.stateAbb;switch(a.officeID){case"S":o+="Sen";break;case"H":o+=electionApp.statesInfo[a.stateAbb].atLarge?"":a.fips<10?"0"+a.fips:a.fips;break;case"G":o+="Gov";break;case"I":o+="";break;case"M":o+="Mayor";break;case"L":o+="LTGov"}var p="",q=a.fips>999;p=q&&"DC"!=a.stateAbb&&"AK"!=a.stateAbb?a.unitName+" "+("LA"==a.stateAbb?"Parish":"County")+" in "+o+" ":o+("H"==a.officeID&&electionApp.statesInfo[a.stateAbb].atLarge?" At-Large":"")+" ";var r="";r="I"==a.officeID?a.title+" ballot measure":"O"==a.raceType&&a.hasWinner&&!q?"general election"+(a.runoff?" runoff":""):"G"==a.raceType?(a.runoff?"runoff ":"")+"election":"O"==a.raceType?"open primary"+(a.runoff?" runoff":""):("P"==a.officeID?"presidential ":"")+("E"==a.raceType||"S"==a.raceType?"caucus":"primary")+(a.runoff?" runoff":"");var s=h?i:getPartyAbb(a.raceType),t=p+("O"!=a.raceType&&"G"!=a.raceType?s+" ":"")+(a.special?"special ":"")+r;if("I"==a.officeID&&q&&"DC"!=a.stateAbb&&"AK"!=a.stateAbb&&(t=o+" "+r+" in "+a.unitName+" "+("LA"==a.stateAbb?"Parish":"County")),q&&"DC"!=a.stateAbb&&"AK"!=a.stateAbb||!a.hasWinner&&!a.hasRunoff)if(q&&100==a.precincts&&"DC"!=a.stateAbb&&"AK"!=a.stateAbb&&!g)c="I"!=a.officeID?e[0].lastName+" carries "+t+"%3B "+a.precincts+"%25 reporting.":o+" "+r+": %22"+e[0].lastName+"%22 carries "+a.unitName+" "+("LA"==a.stateAbb?"Parish":"County")+"%3B "+a.precincts+"%25 reporting.";else if(a.hasResults){for(n=0;n<e.length&&(b=e[n],b.lastName=b.lastName.replace(/\&quot\;/g,"%27"),d+=b.lastName+" "+b.votepercent+"%25",1!=n&&n!=e.length-1);n++)d+=", ";c=d+"%3B "+a.precincts+"%25 reporting "+("I"==a.officeID?"for":"in")+" "+t+"."}else a.hasResults||(c="No results for "+t+". Check back soon on");else{if(k.length>0)if("I"!=a.officeID){var u=0;for(u;u<k.length;u++)0!=u&&(u==k.length-1?c+=" and ":k.length>2&&(c+=", ")),c+=e[u].lastName;k.length>1||"O"==a.raceType&&"P"==electionApp.options.selected.yearType?c+=(1==k.length?" advances to ":" advance to ")+t:k.length>0&&(c+=(1==k.length?" wins ":" win ")+(f?"uncontested ":"")+t),a.hasWinner&&a.hasRunoff&&(c+="%3B ")}else 0,l="No"==k[0].lastName||"Against"==k[0].lastName||"Reject"==k[0].lastName||"Repealed"==k[0].lastName?"does not pass":"passes",c=o+" "+r+" "+l;if(j.length>0){for(m=0;m<j.length;m++)0!=m&&(m==j.length-1?c+=" and ":j.length>2&&(c+=", ")),c+=j[m].lastName;c+=(1==j.length?" advances ":" advance ")+"to runoff"}!a.hasWinner&&a.hasRunoff&&(c+=" in "+t),c+="%3B "+a.precincts+"%25 reporting."}var v="";return v="string"==typeof _bitlyURL?_bitlyURL:a.hasOwnProperty("bitly")?a.bitly:"http%3A%2F%2Fpolitico.com","https://twitter.com/intent/tweet?text="+c+"&url="+v+"&hashtags=election"+a.year}function popupHideClicked(){if(electionApp.options.selected.popup.hasOwnProperty("stateAbb")){var a,b=electionApp.options.selected.popup.stateAbb,c=electionApp.options.selected.popup.fips,d=electionApp.statesInfo[b].fips,e=("KS"==b||"MN"==b)&&!electionApp.options.isUS&&"2016"==electionApp.options.selected.year&&"P"==electionApp.options.selected.race&&"P"==electionApp.options.selected.yearType;a=!electionApp.options.mapShowNationalDistricts&&("H"!=electionApp.options.selected.race&&!e||"H"==electionApp.options.selected.race&&electionApp.options.isUS&&"P"==electionApp.options.selected.yearType)?b+"_"+(0!=c&&d>0&&d<10?"0"+c:c):b+"_"+(0!=c&&c<10?"0"+c:c),electionApp.map.setStyle(a,"clicked",!1),electionApp.map.setStyle(a,"selected",!1),electionApp.options.selected.popup={}}}function hidePopup(){electionApp.popup&&(electionApp.options.selected.popup={},electionApp.popup.hidePopup(!1)),electionApp.map}function showPopup(a,b){if(electionApp.popup&&a&&""!=a){if(b)electionApp.popup.setPopup(a);else{var c=getXY();electionApp.popup.setPopup(a,c.x,c.y)}electionApp.popup.showPopup()}}function popupCloseClicked(){hidePopup()}function updatePopup(a,b){void 0===a||null===a?a=electionApp.options.selected.popup:electionApp.options.selected.popup=a;var c=electionApp.model.getRaceNums(a.year,a.yearSeason,a.yearType,"All",a.officeID,a.stateAbb,electionApp.options.selected.special,electionApp.options.selected.runoff,electionApp.options.selected.recall,null,null);c.length>0||electionApp.options.isSchedule?electionApp.map&&electionApp.map.showPopup(getPopupHTML(a.tableType,a.year,a.yearSeason,a.yearType,a.stateAbb,a.fips,a.officeID,c,a.countyName)):0==c.length?electionApp.map&&electionApp.map.showPopup(getPopupHTML(a.tableType,a.year,a.yearSeason,a.yearType,a.stateAbb,a.fips,a.officeID,c,a.countyName)):hidePopup()}function getPopupHTML(a,b,c,d,e,f,g,h,i){var j="",k="",l=f>0||electionApp.options.mapShowNationalDistricts?f:null,m=electionApp.model.getRacesByRaceNums(b,h,l),n="state-district-primary"==a||"state-district-general"==a||"state-ballot"==a||"county-ballot"==a,o=getPopupHeaderHTML(a,b,c,d,e,f,g,null,null,!1,!1,!1,h,i),p=getPopupFooterHTML(a,b,c,d,e,g,null,null,!1,!1,!1,m);if("state-schedule"==a)k=getScheduleHTML(e),j=o+'<div class="tooltip-content"><article class="results-group">'+k+p+"</article></div>";else if(m.length>0||n)k='<div class="results-dataset">'+getPopupResultsHTML(a,!0,!1,m,h,b,c,d,f)+"</div>",j=o+'<div class="tooltip-content"><article class="results-group">'+k+p+"</article></div>";else{var q={default:"<h6>Results Coming Soon</h6><p>Please stay tuned to this page for live results coverage as it becomes available.</p>"};"2016"==b&&"P"==d&&"P"==g&&f>0&&("ME"==e||"WY"==e||"CO"==e||"ND"==e)?(k=" ","ME"==e?q.R="<p>No county-level results will be reported for "+electionApp.statesInfo[e].name+"'s "+b+" GOP caucus.</p>":"WY"==e?q.R="<p>Twelve delegates will be allocated in the winner-takes-all GOP caucus. County-level results will not be displayed, as the AP reports them in county pairs.</p>":"CO"==e?q.R="<p>Coloradoâ€™s Republican party does not conduct a presidential preference poll. The state's 37 delegates to the Republican National Convention were selected at a statewide convention on April 9, 2016.</p>":"ND"==e&&(q.D="<p>No county-level results will be displayed for North Dakota's 2016 Democratic caucus, as results are reported by Legislative District.</p>",q.R="<p>North Dakota's Republican party does not conduct a presidential preference poll. The state's 25 delegates to the Republican National Convention were selected at a statewide convention on April 2-3, 2016.</p>"),k+='<div class="results-dataset"><div class="results-row layout-split"><div class="results-data pos-alpha contains-democrat" data-racenum="99999" data-stateabb="'+e+'"><div class="results-meta"><div class="title"><h5>Democratic</h5></div></div><div class="system-message">'+(q.hasOwnProperty("D")?q.D:q.default)+'</div></div><div class="results-data pos-beta contains-republican" data-racenum="99999" data-stateabb="'+e+'"><div class="results-meta"><div class="title"><h5>Republican</h5></div></div><div class="system-message">'+(q.hasOwnProperty("R")?q.R:q.default)+"</div></div></div></div>"):k='<div class="system-message">'+q.default+"</div>",j=o+'<div class="tooltip-content"><article class="results-group">'+k+p+"</article></div>"}return j}function getPopupHeaderHTML(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o;o=f>0&&!electionApp.options.isUS?"javascript:electionPage.gotoDetail('"+f+"')":getDetailedResultsURL(b,c,d,e,g,h,i,j,k,l);var p="",q=!1;if("state-schedule"==a)p=electionApp.statesInfo[e].name+" Election Schedule";else switch(a=a.split("-")[0],void 0!==n&&(q=n.split(" City").length>1),a){case"state":p=electionApp.statesInfo[e].name+" "+("G"!==d?getOfficeName(g)+" ":"")+getPopupRaceName(m);break;case"district":p=(electionApp.options.mapShowNationalDistricts?electionApp.statesInfo[e].name+" ":"")+getDistrictTitle(e,f,"html");break;case"county":"AK"!=e&&"DC"!=e?(p=n,q||(p+=" "+("LA"==e?"Parish":"County"))):p=n}return'<header class="tooltip-header"><div class="title"><h2><a href="'+o+'">'+p+'</a></h2></div><div class="actions"><a href="javascript:void(0);" class="close"><b aria-hidden="true" class="icon icon-close"></b> <span class="icon-text">Close</span></a></div></header>'}function getPopupFooterHTML(a,b,c,d,e,f,g,h,i,j,k,l){var m=getDetailedResultsURL(b,c,d,e,f,g,h,i,j,k),n="/"+b+"-election/results/"+getStateURLName(e)+"/",o="",p="",q="",r="",s=0,t=!1,u=!1,v=l.length>0;for(s;s<l.length;s++)l[s].hasOwnProperty("data")&&(l[s].data.hasIncumbent&&(u=!0),l[s].data.hasRunoff&&(t=!0));if("state-schedule"==a)o='<li><a href="'+n+'">State Overview</a></li>';else switch(a=a.split("-")[0],r=electionApp.model.getDelegateExplainer(e),q=v&&"P"==f&&"P"==d&&"state"==a?'<p class="fs-12">'+r+"</p>":"",p='<div class="text-key"><dl>'+(u?" <dt>(i)</dt> <dd>Incumbent"+(t?",":"")+"</dd>":"")+(t?" <dt>*</dt> <dd>Runoff</dd>":"")+"</dl></div>",a){case"state":o='<li><a href="'+m+'">Detailed Results</a></li> <li><a href="'+n+'">State Overview</a></li>';break;case"district":o='<li><a href="'+(electionApp.options.isUS?m:"javascript:electionPage.gotoElectionResults()")+'">Detailed Results</a></li>'+(electionApp.options.isUS?' <li><a href="'+n+'">State Overview</a></li>':"");break;case"county":o='<li><a href="javascript:electionPage.gotoElectionResults()">Detailed Results</a></li>'}return'<footer class="results-footer"><div class="clear"><div class="supplement-links"><ul>'+o+"</ul></div>"+p+"</div>"+q+"</footer>"}function getPopupResultsHTML(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,l,v,w,x,y,z,A=0,B=0,C="",D=0,E={},F="",G="",H=!1,I=!1,J=!1,K=!1,L=!1,M="county"==a.split("-")[0],N="state-district-primary"==a||"state-district-general"==a||"state-ballot"==a||"county-ballot"==a,O=0,P=0;0==d.length&&0!=e.length&&(d=e),"state-district-primary"!=a&&"state-district-general"!=a||d.sort(function(a,b){if(a.fips===b.fips){var c=a.raceType.toLowerCase(),d=b.raceType.toLowerCase();return c<d?-1:c>d?1:0}return a.fips-b.fips});var Q="";for(P;P<d.length;P++)j=d[P].data||d[P],k=d[P].config||d[P],m=k.raceType,n=j.stateAbb,o=j.officeID,p=j.precinctsPercent,q=k.date,raceFIPS=j.fips,r=j.hasRunoff||!1,s=j.hasWinner||!1,t=j.hasResults||!1,u=j.winningParty||"",l=j.raceNum,isSpecialCase=("KS"==n||"MN"==n)&&!electionApp.options.isUS&&"2016"==f&&"P"==o&&"P"==h,G="",C=electionApp.model.getPollsClosingText(k),v="O"!=m?getPartyName(m,!1):"Open Primary",(N&&(!c&&k.politicoPick||c)||"state-district-primary"!=a&&"state-district-general"!=a&&"state-ballot"!=a&&"county-ballot"!=a)&&(N?"H"==o?(y="Key House races",z="P"==h?getPartyClass(m):s&&""!=u&&!r&&"O"!=m?getPartyClass(u):"O"==m&&s?"complete":t||p>0?"partial":"none",O++,Q=getDetailedResultsURL(f,g,h,n,o,m,q,!1,!1,!1),x=electionApp.statesInfo[n].atLarge?"At-Large":n+"-"+raceFIPS,F+='<li class="type-'+z+'"><a href="'+Q+'"><h6>'+x+" "+getPartyAbb(m)+"</h6>"+(void 0!==p?"<p>"+p+"% Reporting</p>":"")+"</a></li>"):"I"==o&&(y="Key Ballot Measures",w=electionApp.model.getSortedRaceVotesByVoteCount(j,f,h,M,c,!0),O++,F+='<div class="results-detail" data-racenum="'+k.raceNum.slice(2)+'" data-stateabb="'+n+'"><div class="macro"><div class="results-about"><h6>'+k.title+"</h6>"+(c?'<p class="summary">'+k.description+" </p>":"")+'<p class="reporting">'+p+"% Reporting</p>"+(c?'<p class="share"><a href="'+getTwitterLink(getTwitterJSON(f,h,j,k,w))+'" class="twitter" target="_blank"><b aria-hidden="true" class="icon icon-twitter"></b> Tweet</a></p>':"")+'</div></div><div class="micro"><table class="results-table"><tbody>'+getRaceVotesHTML(j,w,f,h,o,m,b,M).join("")+"</tbody></table></div></div>"):raceFIPS==i&&("D"==m||"E"==m?H=!0:"R"==m||"S"==m?I=!0:"I"==m?J=!0:"G"==m?K=!0:"O"==m&&(L=!0),B=j.ev,A=j.numEVsWon,w=electionApp.model.getSortedRaceVotesByVoteCount(j,f,h,M||isSpecialCase,c,!0),G="P"===h?'<div class="results-meta"><div class="title"><h5>'+v+'</h5> <p class="reporting">'+p+"% Reporting</p></div>":"G"===h?'<div class="results-meta"><div class="title"><p class="reporting">'+p+"% Reporting"+(M||"P"!==o?"":"&nbsp;&nbsp;&nbsp;Electoral Votes: "+B)+"</p></div>":'<div class="results-meta"><div class="title"><p class="reporting">'+p+"% Reporting</p></div>",c&&(G+='<div class="actions"><a href="'+getTwitterLink(getTwitterJSON(f,h,j,k,w))+'" class="twitter" target="_blank"><b aria-hidden="true" class="icon icon-twitter"></b> <span class="icon-text">Tweet</span></a></div>'),G+="</div>","P"!=o||"P"!=h||M||isSpecialCase?"G"!=h||M||isSpecialCase||(G+='<div class="results-headings">',"I"!=o&&""!==C&&(G+='<p class="pos-1">Polls Closing: '+C+"</p>"),"P"==o&&A>0&&(G+='<p class="pos-2">Electoral Votes</p>'),G+="</div>"):(G+='<div class="results-headings"><p class="pos-1">Delegates Allocated: '+A+"/"+B+"</p>",A>0&&(G+='<p class="pos-2">Delegates</p>'),G+="</div>"),F='<table class="results-table"><tbody>',F+=getRaceVotesHTML(j,w,f,h,o,m,b,M||isSpecialCase).join(""),F+="</tbody></table>",E.hasOwnProperty(m)||(E[m]="I"==m?[]:{}),"I"==m?E[m].push({html:G+F,raceNum:l}):(E[m].html=G+F,E[m].raceNum=l),O++));0==O&&N?"H"==electionApp.options.selected.race?y="No Key House races":"I"==electionApp.options.selected.race&&(y="No Key Ballot measures"):(1==d.length||d.length>1&&(M||isSpecialCase)&&c)&&"P"==o&&"P"==h&&(H&&!I?(I=!0,E.R={},E.R.raceNum=n+99999,"2016"!=f||"P"!=h||"P"!=o||"ME"!=n&&"WY"!=n&&"CO"!=n&&"ND"!=n?E.R.html='<div class="results-meta"><div class="title"><h5>Republican</h5></div></div><div class="system-message"><h6>Results Coming Soon</h6><p>Please stay tuned to this page for live results coverage as it becomes available.</p></div>':"ME"==n?E.R.html='<div class="results-meta"><div class="title"><h5>Republican</h5></div></div><div class="system-message"><p>No county-level results will be reported for Maine\'s 2016 GOP caucus.</p></div>':"WY"==n?E.R.html='<div class="results-meta"><div class="title"><h5>Republican</h5></div></div><div class="system-message"><p>Twelve delegates will be allocated in the winner-takes-all GOP caucus. County-level results will not be displayed, as the AP reports them in county pairs.</p></div>':"CO"==n?E.R.html='<div class="results-meta"><div class="title"><h5>Republican</h5></div></div><div class="system-message"><p>Coloradoâ€™s Republican party does not conduct a presidential preference poll. The state\'s 37 delegates to the Republican National Convention were selected at a statewide convention on April 9, 2016.</p></div>':"ND"==n&&(E.R.html='<div class="results-meta"><div class="title"><h5>Republican</h5></div></div><div class="system-message"><p>North Dakota\'s Republican party does not conduct a presidential preference poll. The state\'s 25 delegates to the Republican National Convention were selected at a statewide convention on April 2-3, 2016.</p></div>')):I&&!H&&(H=!0,E.D={},E.D.raceNum=n+99999,"2016"==f&&"P"==h&&"P"==o&&"ND"==n?"ND"==n&&(E.D.html='<div class="results-meta"><div class="title"><h5>Democratic</h5></div></div><div class="system-message"><p>No county-level results will be displayed for North Dakota\'s 2016 Democratic caucus, as results are reported by Legislative District.</p></div>'):E.D.html='<div class="results-meta"><div class="title"><h5>Democratic</h5></div></div><div class="system-message"><h6>Results Coming Soon</h6><p>Please stay tuned to this page for live results coverage as it becomes available.</p></div>'));var R,S=(H&&I||d.length>1)&&!L,T=["E","D"],U=["S","R"],D=0,V="beta";if("state-district-primary"!=a&&"state-district-general"!=a&&"state-ballot"!=a&&"county-ballot"!=a){var W='<div class="results-row '+(S?"layout-split":"layout-full")+'">';if(F=W,H)for(D=0;D<T.length;D++)E.hasOwnProperty(T[D])&&(R=T[D],V=S?"beta"==V?"alpha":"beta":"omega",F+='<div class="results-data pos-'+V+' contains-democrat" data-racenum="'+E[R].raceNum.slice(2)+'" data-stateabb="'+n+'">'+E[R].html+"</div>");if(I)for(D=0;D<U.length;D++)E.hasOwnProperty(U[D])&&(R=U[D],V=S?"beta"==V?"alpha":"beta":"omega",F+='<div class="results-data pos-'+V+' contains-republican" data-racenum="'+E[R].raceNum.slice(2)+'" data-stateabb="'+n+'">'+E[R].html+"</div>");if(J)for(D=0;D<E.I.length;D++)V=S?"beta"==V?"alpha":"beta":"omega","alpha"==V&&(F+="</div>"+W),F+='<div class="results-data pos-'+V+' contains-independent" data-racenum="'+E.I[D].raceNum.slice(2)+'" data-stateabb="'+n+'">'+E.I[D].html+"</div>";L&&(F+='<div class="results-data pos-omega contains-mix" data-racenum="'+E.O.raceNum.slice(2)+'" data-stateabb="'+n+'">'+E.O.html+"</div>"),K&&(F+='<div class="results-data pos-omega contains-mix" data-racenum="'+E.G.raceNum.slice(2)+'" data-stateabb="'+n+'">'+E.G.html+"</div>"),F+="</div>"}else"H"==electionApp.options.selected.race?F='<div class="results-row layout-full"><div class="results-data pos-omega contains-mix"><div class="results-meta"><div class="title"><h5>'+y+'</h5></div></div><div class="reporting-summary"><ul class="reporting-list">'+F+"</ul></div></div></div>":"I"==electionApp.options.selected.race&&(F='<div class="results-row layout-full"><div class="results-data pos-omega contains-ballot"><div class="results-meta"><div class="title"><h5>'+y+"</h5></div></div>"+(M||""==C?"":'<div class="results-headings"><p class="pos-1">Polls Closing: '+C+"</p></div>")+F+"</div></div>");return F}function getScheduleHTML(a){var b,c,d,e,f,g,h,i=$("li[data-state|='"+a+"']"),j="",k="",l="",m="",n=0;for(n;n<i.length;n++)b=i[n],c=b.dataset.date,d!=c&&(""!=k&&(j+="<tr>"+k+'<td class="event-list"><ul>'+l+"</ul></td></tr>",l=""),d=c,e=d.substr(0,4),f=d.substr(4,2),g=d.substr(6,2),h=parseInt(g,10),k='<th scope="row" class="event-date"><time datetime="'+e+"-"+f+"-"+g+'">'+electionApp.model.getMonthNameByNum(f-1)+" "+h+", "+e+"</time></th>"),m=$(b).hasClass("inactive")?b.innerText||b.textContent:b.innerHTML,l+="<li>"+m+"</li>";return j+="<tr>"+k+'<td class="event-list"><ul>'+l+"</ul></td></tr>",'<div class="results-dataset"><div class="results-row layout-full"><div class="results-data pos-omega contains-mixed"><div class="results-meta"><div class="title"><h5>Available Elections &amp; Dates</h5></div></div>'+('<table class="event-table"><tbody>'+j+"</tbody></table>")+"</div></div></div>"}function enableLazyLoad(){var a=-1;electionApp.options.isUS?"H"==electionApp.options.selected.race&&electionApp.options.isUS&&(_$lazyLoadedGroup=$(".timeline-group .results-group .results-data"),a=0):(_$lazyLoadedGroup=$(".election-results .results-group"),a=10);var b=0;for(b;b<_$lazyLoadedGroup.length;b++)b%a==0&&0!=b&&($(_$lazyLoadedGroup[b]).attr("data-z",b),$(_$lazyLoadedGroup[b]).waypoint(function(a){"down"===a&&triggerLazyLoad(this)},{triggerOnce:!0,offset:"bottom-in-view"}))}function triggerLazyLoad(a){var b,c=$(a),d=c.index()+1;if(electionApp.options.isUS){if("H"==electionApp.options.selected.race&&electionApp.options.isUS){var e=$(a).attr("data-racenum");if(!_lazyLoaded.hasOwnProperty(e)){_lazyLoaded[e]=!0,d=parseInt(c.attr("data-z"),10);var f,g,h,i,f,j,k,l,m,n,o,p,q,r=d+10,s=electionApp.options.selected.year,t=electionApp.options.selected.yearType,u=[],v="";for(d;d<r;d++)h=$(_$lazyLoadedGroup[d]).parent().parent().parent(),i=h.attr("data-fips"),h.find(".is-loading").removeClass("is-loading"),f=$(_$lazyLoadedGroup[d]).parent().parent().parent().parent().parent().parent().attr("id").split("state")[1],g=f+$(_$lazyLoadedGroup[d]).attr("data-racenum"),u=[electionApp.model.getRaceNumConfig(g)],j=electionApp.model.getRacesByRaceNums(s,u,i),k=j[0].data,l=j[0].config,m=l.raceType,n=!1,o=electionApp.model.getSortedRaceVotesByVoteCount(k,s,t,n,!0,!0),p=getRaceVotesHTML(k,o,electionApp.options.selected.year,electionApp.options.selected.yearType,k.officeID,m,!1,n),q="<tbody>"+p.join("")+"</tbody>",$(_$lazyLoadedGroup[d]).html('<div class="results-meta"><div class="title"><p class="reporting">'+k.precinctsPercent+'% Reporting</p></div><div class="actions"><a href="" class="twitter"><b aria-hidden="true" class="icon icon-twitter"></b> <span class="icon-text">Tweet</span></a></div></div><table class="results-table"></table>'),setTableHTML(q,"state-district",i,k,o,l);refreshLazy()}}}else if(b=$(a).attr("data-fips"),!_lazyLoaded.hasOwnProperty(b)){_lazyLoaded[b]=!0;var w,r=d+10,i=-1,u=[],v="";for(d;d<r;d++)i=$(_$lazyLoadedGroup[d]).attr("data-fips"),u=electionApp.model.getRaceNums(electionApp.options.selected.year,electionApp.options.selected.yearSeason,electionApp.options.selected.yearType,electionApp.options.selected.date,electionApp.options.selected.race,electionApp.options.selected.state,electionApp.options.selected.special,electionApp.options.selected.runoff,electionApp.options.selected.recall,null,null),void 0!==i&&u.length>0&&(w="G"==electionApp.options.selected.yearType?"-general":"-primary",0==i?w="state"+w:i<=999?w="district"+w:i>999&&(w="I"==electionApp.options.selected.race?"county-ballot":"county"+w),v=getLazyHTML(w,electionApp.options.selected.year,electionApp.options.selected.yearSeason,electionApp.options.selected.yearType,electionApp.options.selected.state,i,electionApp.options.selected.race,u),$(".results-group[data-fips='"+i+"'] header h4").removeClass("is-loading"),$(".results-group[data-fips='"+i+"']").append(v));refreshLazy()}}function refreshLazy(){$.waypoints("refresh"),reenableTwitterClicks()}function reenableTwitterClicks(){$("a.twitter, a.js-twitter").off("click"),$("a.twitter, a.js-twitter").on("click",function(){return window.open(this.href,"Share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"),!1})}function getLazyHTML(a,b,c,d,e,f,g,h){var i="",j="",k=f>999,l=f>0?f:null,m=electionApp.model.getRacesByRaceNums(b,h,l),n='<footer class="results-footer">'+(k?"":getLazyFooterHTML(m))+"</footer>";return m.length>0&&"string"==typeof(j=getPopupResultsHTML(a,!1,!0,m,h,b,c,d,f))&&""!=j&&(i='<div class="results-dataset">'+j+"</div>"+n),i}function getLazyFooterHTML(a){
var b=0,c=!1,d=!1;for(b;b<a.length;b++)a[b].hasOwnProperty("data")&&(a[b].data.hasIncumbent&&(d=!0),a[b].data.hasRunoff&&(c=!0));return'<div class="text-key"><dl>'+(d?" <dt>(i)</dt> <dd>Incumbent"+(c?",":"")+"</dd>":"")+(c?" <dt>*</dt> <dd>Runoff</dd>":"")+"</dl></div>"}function stateOver(a){electionApp.map.doOver(a,0)}function stateOut(a){electionApp.map.doOut(a,0)}function countyOver(a,b,c){electionApp.map&&electionApp.map.doOver(a,b)}function countyOut(a,b,c){electionApp.map&&electionApp.map.doOut(a,b)}function countyClicked(a,b,c){var d,e=("KS"==a||"MN"==a)&&"2016"==electionApp.options.selected.year&&"P"==electionApp.options.selected.race&&"P"==electionApp.options.selected.yearType,f=electionApp.options.selected.year,g=electionApp.options.selected.yearType,h=electionApp.options.selected.yearSeason,i=electionApp.options.selected.race,j=electionApp.statesInfo[a].fips,k=a+"_"+(j>0&&j<10?"0"+b:b);"I"==i?(d="county-ballot",b="AK"==a||"DC"==a?0:b):"AK"==a||"DC"==a||e?(d="state-"+("P"==electionApp.options.selected.yearType?"primary":"general"),b=0):d="county-"+("P"==electionApp.options.selected.yearType?"primary":"general"),popupHideClicked(),electionApp.map.setStyle(k,"clicked"),updatePopup({tableType:d,date:electionApp.options.selected.date,year:f,yearType:g,yearSeason:h,stateAbb:a,fips:b,officeID:i,countyName:c})}function districtOver(a,b){electionApp.map&&electionApp.map.doOver(a,b)}function districtOut(a,b){electionApp.map&&electionApp.map.doOut(a,b)}function districtClicked(a,b){var c=electionApp.options.selected.year,d=electionApp.options.selected.yearType,e=electionApp.options.selected.yearSeason,f=electionApp.options.selected.race,g=a+"_"+(b<10?"0"+b:b),h="district-"+("P"==electionApp.options.selected.yearType?"primary":"general");popupHideClicked(),electionApp.map.setStyle(g,"clicked"),updatePopup({tableType:h,date:electionApp.options.selected.date,year:c,yearType:d,yearSeason:e,stateAbb:a,fips:b,officeID:f})}function stateClicked(a,b){var c=electionApp.options.selected.year,d=electionApp.options.selected.yearType,e=electionApp.options.selected.yearSeason,f=electionApp.options.selected.raceType,g=electionApp.options.selected.race,h=(electionApp.options.selected.date,("KS"==a||"MN"==a)&&"2016"==c&&"P"==g&&"P"==d);if("P"===f&&(electionApp.options.isHomepage||electionApp.options.isIpad||electionApp.options.isMobile))if(electionApp._config.init);else;else if(electionApp.options.isUS){var i,j=a+"_0";i="H"==g?"state-district-"+("P"==electionApp.options.selected.yearType?"primary":"general"):"I"==g?"state-ballot":electionApp.options.isSchedule?"state-schedule":"state-"+("P"==electionApp.options.selected.yearType?"primary":"general"),popupHideClicked(),electionApp.map.setStyle(j,"clicked");var k={tableType:i,date:electionApp.options.selected.date,year:c,yearType:d,yearSeason:e,stateAbb:a,fips:0,officeID:g};updatePopup(k)}else electionApp.options.isUS||"AK"!=a&&"DC"!=a&&!h||countyClicked(a,0,electionApp.statesInfo[a].name)}function zoomComplete(a){var b=electionApp.options.selected,c=electionApp.options.isUS,d=("KS"==b.state||"MN"==b.state)&&!c&&"P"==b.yearType&&"2016"==b.year&&"P"==b.race;if("US"!=b.state&&""!=b.state){electionApp.map,electionApp.model,"H"==electionApp.options.selected.race||d?setDistrictColors(electionApp.options.selected.state):setCountyColors(electionApp.options.selected.state),setAnimating(!1)}else setAnimating(!1);electionApp.options.tasks.length>0&&doNextTask()}function fullExtent(){electionApp.options.isAnimating||"US"==electionApp.options.selected.state||""==electionApp.options.selected.state||(setAnimating(!0),"P"==electionApp.options.selected.race||"S"==electionApp.options.selected.race||"G"==electionApp.options.selected.race?electionApp.map.hideCountiesByStateAbb(electionApp.options.selected.state):"H"==electionApp.options.selected.race&&electionApp.map.hideDistrictsByStateAbb(electionApp.options.selected.state),setSelected("US"),setStateColors(),electionApp.map.fullExtent())}function setAnimating(a){electionApp.options.isAnimating!=a&&(electionApp.options.isAnimating=a,electionApp.map)}function setDraggable(a){}function getSelected(a){}function showNationalDistricts(a){if(electionApp.map){var b,c=0;for(c;c<electionApp.stateAbbs.length;c++)b=electionApp.stateAbbs[c],setDistrictColors(b);doNextTask()}}function setStateColors(a){if(electionApp.map&&electionApp.model){a=electionApp.options.isHomepage||electionApp.options.isIpad||electionApp.options.isMobile?"US":a||electionApp.options.selected.state;var b=!1,c=!1,d=!1;electionApp.options.isUS?c="All":(b=electionApp.options.selected.special,c=electionApp.options.selected.runoff,d=electionApp.options.selected.recall);var e=getColors(electionApp.options.selected.year,electionApp.options.selected.yearSeason,electionApp.options.selected.yearType,electionApp.options.selected.race,electionApp.options.selected.date,a,b,c,d,"");electionApp.map.setStateColors(e)}}function setDistrictColors(a){if(electionApp.map&&electionApp.model){var b=!1,c=!1,d=!1;electionApp.options.isUS?c="All":(b=electionApp.options.selected.special,c=electionApp.options.selected.runoff,d=electionApp.options.selected.recall);var e=getColors(electionApp.options.selected.year,electionApp.options.selected.yearSeason,electionApp.options.selected.yearType,electionApp.options.selected.race,electionApp.options.selected.date,a,b,c,d,"");electionApp.map.setDistrictColorsByState(a,e[a])}}function setCountyColors(a){if(electionApp.map&&electionApp.model){var b=!1,c=!1,d=!1;electionApp.options.isUS||(b=electionApp.options.selected.special,c=electionApp.options.selected.runoff,d=electionApp.options.selected.recall);var e=getColors(electionApp.options.selected.year,electionApp.options.selected.yearSeason,electionApp.options.selected.yearType,electionApp.options.selected.race,electionApp.options.selected.date,a,b,c,d,"counties");electionApp.map.setCountyColorsByState(a,e[a])}}function getColors(a,b,c,d,e,f,g,h,i,j){electionApp.options.isSchedule&&(d="All");var k,l,m,n,o,p,q,r=!1,s=!1,t={},u=electionApp.options.isUS?0:parseInt(electionApp.statesInfo[f].fips),v=0,w=0,x=electionApp.stateAbbs;for(x="US"==f||""==f?x:[f],v;v<x.length;v++)if("US"!==(f=x[v])){if(r=("KS"==f||"MN"==f)&&!electionApp.options.isUS&&"P"==c&&"2016"==a&&"P"==d,j=r?"districts":j,s=!1,m=electionApp.model.getRaceNums(a,b,c,"All",d,f,g,h,i,null,null),n=electionApp.model.getRacesByRaceNums(a,m,null,j),n.length>0){if(w=0,electionApp.options.isUS&&!electionApp.options.isSchedule&&"P"!=c&&n.length>1){var y,z,A,B,C={},D=[];for(w;w<n.length;w++){z=n[w].config.fips;var a=n[w].config.date.slice(0,4),E=n[w].config.date.slice(4,6)-1,F=n[w].config.date.slice(6,8);A=new Date(a,E,F),C.hasOwnProperty(z)?(B=C[n[w].config.fips].race,a=B.config.date.slice(0,4),E=B.config.date.slice(4,6)-1,F=B.config.date.slice(6,8),y=new Date(a,E,F),A.getTime()>y.getTime()&&(C[n[w].config.fips]={index:C[n[w].config.fips].index,race:n[w]},D.splice(C[n[w].config.fips].index,1,C[n[w].config.fips].race))):(C[n[w].config.fips]={index:D.length,race:n[w]},D.push(n[w]))}n=D,w=0}for(w;w<n.length;w++)o=n[w].data,p=o.fips,("counties"!=j&&p<1e3||"counties"==j&&p>999||"AK"==f||"DC"==f||r)&&(s=!0),"H"!=electionApp.options.selected.race||!electionApp.options.mapShowNationalDistricts&&electionApp.options.isUS?electionApp.options.mapShowNationalDistricts&&"H"===electionApp.options.selected.race||(q="counties"!=j||"AK"!=f&&"DC"!=f?r?f+"_"+(p<10?"0"+p:p):f+"_"+(u>0&&u<10?"0"+p:p):f+"_"+electionApp.statesInfo[f].fips+"000"):q=f+"_"+(p<10?"0"+p:p),("H"==electionApp.options.selected.race&&!electionApp.options.mapShowNationalDistricts||electionApp.options.isSchedule)&&electionApp.options.isUS&&(q=f+"_0"),k="",void 0===t[f]&&(t[f]={}),void 0===t[f][q]?t[f][q]={}:k=t[f][q],l=getColor(a,c,f,p,k,r,o),("H"!=electionApp.options.selected.race||electionApp.options.mapShowNationalDistricts)&&!electionApp.options.isSchedule||!electionApp.options.isUS||"gop"!=l&&"dem"!=l&&"ind"!=l||(l="complete"),t[f][q]=l}if(!electionApp.options.isUS&&"H"==electionApp.options.selected.race){var G=1;for(G;G<55;G++)q=f+"_"+(G<10?"0"+G:G),t.hasOwnProperty(f)||(t[f]={}),t[f].hasOwnProperty(q)||(t[f][q]="null")}s||g||i||!electionApp.statesCalendar.hasOwnProperty(a)||electionApp.statesCalendar[a].hasOwnProperty(c)&&electionApp.statesCalendar[a][c].hasOwnProperty(f)&&(electionApp.statesCalendar[a][c][f].hasOwnProperty(d)||"All"==d)&&(electionApp.statesCalendar[a][c][f][d]||"All"==d)&&(p=""!=j||"H"==d?"_default":"_0",q=f+p,k="none",void 0===t[f]&&(t[f]={}),void 0===t[f][q]?t[f][q]={}:k=t[f][q],l=getColor(a,c,f,p,k),t[f][q]=l)}return t}function getColor(a,b,c,d,e,f,g){var h=!!(d>999||d>0&&f),i=!1,j=!1,k=!1,l="";switch(e){case"null":!0;break;case"none":k=!0;break;case"partial":j=!0;break;case"complete":i=!0}if(g){var m=g.special,n=g.runoff;electionApp.statesCalendar[a][b][c][g.officeID]||m||n?(!1,(100==g.precinctsPercent||1==g.numCandidates)&&h||g.hasWinner&&!h?j||k?(i=!1,j=!0,k=!1):i=!0:g.precinctsPercent>0||g.hasResults&&!h?(i=!1,j=!0,k=!1):0==g.precinctsPercent&&(j||i?j=!0:k=!0,i=!1)):!0}else k=!0,i&&(j=!0,i=!1);return i?(l="complete","P"==b||"I"==g.officeID||"G"==b&&(l=getColorByParty(g.winningParty))):j?l="partial":(k||electionApp.options.isSchedule)&&(l="none"),l}function getColorByParty(a){return"string"==typeof a&&""!=a?"Dem"!=a&&"GOP"!=a&&(a="Ind"):a="none",a.toLowerCase()}function getRandomColor(){}function setSelected(a,b,c,d){void 0!==a&&null!=a&&(electionApp.options.selected.state=a,electionApp.model&&electionApp.model.setSelectedState(electionApp.options.selected.state)),void 0!==b&&null!=b&&(electionApp.options.selected.race=b,electionApp.model),void 0!==d&&null!=a&&(electionApp.options.selected.date=d,electionApp.model&&electionApp.model.setSelectedDate(electionApp.options.selected.date))}function getPartyClass(a){var b="";if("string"==typeof a&&""!=a)switch(a){case"Dem":b="democrat";break;case"GOP":b="republican";break;case"D":b="democrat";break;case"R":b="republican";break;default:b="independent"}return b}function getPartyName(a,b){var c="";return"string"==typeof a&&""!=a&&(a=getPartyAbb(a),c=electionApp.model.getPartyName(a.toUpperCase()),b||"Democrat"!=c||(c="Democratic")),c}function getPartyAbb(a){var b="";if("string"==typeof a&&""!=a)switch(a){case"D":b="Dem";break;case"R":b="GOP";break;case"E":b="Dem";break;case"S":b="GOP";break;case"I":b="Ind";break;case"O":b="Open";break;case"Dem":b="Dem";break;case"GOP":b="GOP";break;case"Ind":b="Ind";break;case"Open":b="Open"}return b}function getPartySingleCharacter(a){var b="";return"string"==typeof a&&""!=a&&(a="GOP"==a?"R":a,b=a.charAt(0),b=""==b?"O":b),b}function getRaceName(a,b){var c="";return a.special&&(c="Special "),"G"==a.raceType?c+="General Election":"G"!=a.raceType&&(b&&!a.runoff?c+="Primaries":c+="Primary"),a.runoff&&(c+=b?" Runoffs":" Runoff"),c}function getPopupRaceName(a){var b,c=0,d="";if(0==a.length)"P"==electionApp.options.selected.yearType&&(d="Primaries");else for(c;c<a.length;c++){b=a[c],b.special&&(d="Special "),"O"==b.raceType&&(d+="Open "),"G"==b.raceType&&"P"==b.yearType&&"I"!=b.officeID?d+="General Election":"G"!=b.raceType&&("D"==b.raceType||"R"==b.raceType||"O"==b.raceType?d+=a.length>0?"Primaries":"Primary":"E"!=b.raceType&&"S"!=b.raceType||(d+=a.length>0?"Caucuses":"Caucus")),b.runoff&&(d+=a.length>0?" Runoffs":" Runoff");break}return d}function getOfficeName(a,b){var c="";switch(a){case"P":c="Presidential";break;case"S":c="Senate";break;case"H":c="House";break;case"G":c="Governor";break;case"I":c="Ballot Measures";break;case"L":c=b?"Lieutenant Governor":"Lt. Gov.";break;case"M":c="Mayor"}return c}function getStateURLName(a){return electionApp.statesInfo[a].name.split(" ").join("-").toLowerCase()}function getOfficeURLName(a){var b="";switch(a){case"P":b="president";break;case"S":b="senate";break;case"H":b="house";break;case"G":b="governor";break;case"I":b="ballot-measures";break;case"L":b="lieutenant-governor";break;case"M":b="mayor"}return b}function getDistrictTitle(a,b,c){return electionApp.statesInfo[a].atLarge?"At-Large":electionApp.model.formatNumberNthName(b,c)+" District"}function getDetailedResultsURL(a,b,c,d,e,f,g,h,i,j){var k="G"!=b||"G"==c||h||j?"":"primary/",l="";if(h||i||j){var m=g.split(a)[1],n=electionApp.model.getMonthNameByNum(parseFloat(m.substring(0,2))-1).toLowerCase(),o=parseFloat(m.substring(2,4));o=o<10?"0"+o:o;var p=n+"-"+o;l="/"+a+"-election/"+(h||j?"special/":"")+(h?"":k)+"results/map/"+getOfficeURLName(e)+"/"+getStateURLName(d)+"/",(h||j)&&(l+="G"==f?"general/":"primary/"),i&&(l+="runoff/"),l+=p+"/"}else l="/"+a+"-election/"+k+"results/map/"+getOfficeURLName(e)+"/"+getStateURLName(d)+"/";return l}function addTasks(a){var b=0;for(b;b<a.length;b++)electionApp.options.tasks.push(a[b])}function prependTasks(a){for(var b=a.length;b--;)electionApp.options.tasks.unshift(a[b])}function doNextTask(){var a=0;for(a;a<electionApp.options.tasks.length;a++);electionApp.options.tasks.length>0?(electionApp._config.lastTask=electionApp.options.tasks.shift(),doTask(electionApp._config.lastTask)):tasksComplete()}function doTask(a){switch(doDebug("Performing task: "+a.task),a.task){case"loadJS":loadJS();break;case"loadJSComplete":loadJSComplete();break;case"loadData":electionApp.model.loadData();break;case"initViews":initViews();break;case"showNationalDistricts":showNationalDistricts();break;case"zoomComplete":zoomComplete();break;case"stateClicked":stateClicked(a.params[0],a.params[1]);break;case"initHomepage":initHomepage();break;case"setStateColors":setStateColors(),doNextTask();break;case"hidePopup":hidePopup();break;case"setSelected":setSelected(a.params[0],a.params[1]);break;case"changeState":electionApp._viewManager.changeState(a.params[0]);break;case"changeOffice":electionApp._viewManager.changeOffice(a.params[0],a.params[1]);break;case"changeDistrict":electionApp._viewManager.changeDistrict();break;case"zoomToStateAbb":electionApp.map.zoomToStateAbb(a.params[0])}}function tasksComplete(){doDebug("------------------------------- tasksComplete -------------------------------"),electionApp.map&&electionApp.map.tasksComplete(),electionApp.model&&(electionApp.model.tasksComplete(),updateLastUpdated()),electionApp._config.init||(electionApp._config.init=!0,electionApp.options.hasLazy&&enableLazyLoad(),electionApp.map&&electionApp.map.show(),electionApp.options.checkzeros||electionApp.options.isHomepage||electionApp.options.isIpad||electionApp.options.isMobile||electionApp._config.updatedOnce||updateHTML(),electionApp._config.updatedOnce=!0,electionApp.options.isUniversalApp&&electionApp._viewManager.resize(),electionApp.options.isHomepage&&$(".election-overview").removeClass("erase")),electionApp.options.checkzeros&&electionApp.model.checkZeros()}function taskError(){doDebug("taskError")}function doDebug(a,b){electionApp.options.develop&&console.log("ROOT",a,b)}function PoliticoElectionViewManager(){return this.views=[],this}function PoliticoElectionView(a,b){return void 0!==a&&(this.options=electionApp.setOptions(a)),void 0!==b&&(this.$elem=b),this}function PoliticoElectionPageView(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionHomepageGeneralMenu(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionBalanceOfPowerView(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionStoryPageView(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionHomepageGeneralView(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionHomepageDataBlockView(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoDonutChart(a,b,c){var d=this;d.$elem=a,d.selector=b,d.data=c;var e=Math.min(200,200)/2;d.dimensions={width:200,height:200,radius:e},d.outerpath,d.innerpath,d.pie=d3.layout.pie().sort(null).value(function(a,b){return a.value}),d.arc=d3.svg.arc().outerRadius(d.dimensions.radius).innerRadius(d.dimensions.radius-12),d.innerArc=d3.svg.arc().innerRadius(d.dimensions.radius-24).outerRadius(0),d.arcTween=function(a){var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return d.arc(b(a))}}}function PoliticoElectionHomepagePrimariesView(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionSmallHomepageView(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionHubPage(a,b){PoliticoElectionView.call(this,a,b)}function PoliticoElectionMapView(a,b){PoliticoElectionView.call(this,a,b)}if(0===$("html.lt-ie9").length){electionApp._config={},electionApp._config.init=!1,electionApp._config.initComplete={},electionApp._config.jsFilesToLoad=[],electionApp._config.lastTask,electionApp._config.updatedOnce=!1,electionApp._viewManager,electionApp.options={},electionApp.stateAbbs=["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","US"],electionApp.statesInfo={AL:{name:"Alabama",apabb:"Ala.",postalabb:"AL",atLarge:!1,fips:"01",evPercent:2,evTotal:9},AK:{name:"Alaska",apabb:"Alaska",postalabb:"AK",atLarge:!0,fips:"02",evPercent:.5,evTotal:3},AZ:{name:"Arizona",apabb:"Ariz.",postalabb:"AZ",atLarge:!1,fips:"04",evPercent:2,evTotal:11},AR:{name:"Arkansas",apabb:"Ark.",postalabb:"AR",atLarge:!1,fips:"05",evPercent:1,evTotal:6},CA:{name:"California",apabb:"Calif.",postalabb:"CA",atLarge:!1,fips:"06",evPercent:10,evTotal:55},CO:{name:"Colorado",apabb:"Colo.",postalabb:"CO",atLarge:!1,fips:"08",evPercent:2,evTotal:9},CT:{name:"Connecticut",apabb:"Conn.",postalabb:"CT",atLarge:!1,fips:"09",evPercent:1,evTotal:7},DE:{name:"Delaware",apabb:"Del.",postalabb:"DE",atLarge:!0,fips:"10",evPercent:.5,evTotal:3},DC:{name:"District of Columbia",apabb:"D.C.",postalabb:"DC",atLarge:!0,fips:"11",evPercent:.5,evTotal:3},FL:{name:"Florida",apabb:"Fla.",postalabb:"FL",atLarge:!1,fips:"12",evPercent:5,evTotal:29},GA:{name:"Georgia",apabb:"Ga.",postalabb:"GA",atLarge:!1,fips:"13",evPercent:3,evTotal:16},HI:{name:"Hawaii",apabb:"Hawaii",postalabb:"HI",atLarge:!1,fips:"15",evPercent:1,evTotal:4},ID:{name:"Idaho",apabb:"Idaho",postalabb:"ID",atLarge:!1,fips:"16",evPercent:1,evTotal:4},IL:{name:"Illinois",apabb:"Ill.",postalabb:"IL",atLarge:!1,fips:"17",evPercent:4,evTotal:20},IN:{name:"Indiana",apabb:"Ind.",postalabb:"IN",atLarge:!1,fips:"18",evPercent:2,evTotal:11},IA:{name:"Iowa",apabb:"Iowa",postalabb:"IA",atLarge:!1,fips:"19",evPercent:1,evTotal:6},KS:{name:"Kansas",apabb:"Kan.",postalabb:"KS",atLarge:!1,fips:"20",evPercent:1,evTotal:6},KY:{name:"Kentucky",apabb:"Ky.",postalabb:"KY",atLarge:!1,fips:"21",evPercent:1.5,evTotal:8},LA:{name:"Louisiana",apabb:"La.",postalabb:"LA",atLarge:!1,fips:"22",evPercent:1.5,evTotal:8},ME:{name:"Maine",apabb:"Maine",postalabb:"ME",atLarge:!1,fips:"23",evPercent:1,evTotal:4},MD:{name:"Maryland",apabb:"Md.",postalabb:"MD",atLarge:!1,fips:"24",evPercent:2,evTotal:10},MA:{name:"Massachusetts",apabb:"Mass.",postalabb:"MA",atLarge:!1,fips:"25",evPercent:2,evTotal:11},MI:{name:"Michigan",apabb:"Mich.",postalabb:"MI",atLarge:!1,fips:"26",evPercent:3,evTotal:16},MN:{name:"Minnesota",apabb:"Minn.",postalabb:"MN",atLarge:!1,fips:"27",evPercent:2,evTotal:10},MS:{name:"Mississippi",apabb:"Miss.",postalabb:"MS",atLarge:!1,fips:"28",evPercent:1,evTotal:6},MO:{name:"Missouri",apabb:"Mo.",postalabb:"MO",atLarge:!1,fips:"29",evPercent:2,evTotal:10},MT:{name:"Montana",apabb:"Mont.",postalabb:"MT",atLarge:!0,fips:"30",evPercent:.5,evTotal:3},NE:{name:"Nebraska",apabb:"Neb.",postalabb:"NE",atLarge:!1,fips:"31",evPercent:1,evTotal:5},NV:{name:"Nevada",apabb:"Nev.",postalabb:"NV",atLarge:!1,fips:"32",evPercent:1,evTotal:6},NH:{name:"New Hampshire",apabb:"N.H.",postalabb:"NH",atLarge:!1,fips:"33",evPercent:1,evTotal:4},NJ:{name:"New Jersey",apabb:"N.J.",postalabb:"NJ",atLarge:!1,fips:"34",evPercent:3,evTotal:14},NM:{name:"New Mexico",apabb:"N.M.",postalabb:"NM",atLarge:!1,fips:"35",evPercent:1,evTotal:5},NY:{name:"New York",apabb:"N.Y.",postalabb:"NY",atLarge:!1,fips:"36",evPercent:5,evTotal:29},NC:{name:"North Carolina",apabb:"N.C.",postalabb:"NC",atLarge:!1,fips:"37",evPercent:3,evTotal:15},ND:{name:"North Dakota",apabb:"N.D.",postalabb:"ND",atLarge:!0,fips:"38",evPercent:.5,evTotal:3},OH:{name:"Ohio",apabb:"Ohio",postalabb:"OH",atLarge:!1,fips:"39",evPercent:3,evTotal:18},OK:{name:"Oklahoma",apabb:"Okla.",postalabb:"OK",atLarge:!1,fips:"40",evPercent:1,evTotal:7},OR:{name:"Oregon",apabb:"Ore.",postalabb:"OR",atLarge:!1,fips:"41",evPercent:1,evTotal:7},PA:{name:"Pennsylvania",apabb:"Pa.",postalabb:"PA",atLarge:!1,fips:"42",evPercent:4,evTotal:20},RI:{name:"Rhode Island",apabb:"R.I.",postalabb:"RI",atLarge:!1,fips:"44",evPercent:1,evTotal:4},SC:{name:"South Carolina",apabb:"S.C.",postalabb:"SC",atLarge:!1,fips:"45",evPercent:2,evTotal:9},SD:{name:"South Dakota",apabb:"S.D.",postalabb:"SD",atLarge:!0,fips:"46",evPercent:.5,evTotal:3},TN:{name:"Tennessee",apabb:"Tenn.",postalabb:"TN",atLarge:!1,fips:"47",evPercent:2,evTotal:11},TX:{name:"Texas",apabb:"Texas",postalabb:"TX",atLarge:!1,fips:"48",evPercent:7,evTotal:38},UT:{name:"Utah",apabb:"Utah",postalabb:"UT",atLarge:!1,fips:"49",evPercent:1,evTotal:6},VT:{name:"Vermont",apabb:"Vt.",postalabb:"VT",atLarge:!0,fips:"50",evPercent:.5,evTotal:3},VA:{name:"Virginia",apabb:"Va.",postalabb:"VA",atLarge:!1,fips:"51",evPercent:2,evTotal:13},WA:{name:"Washington",apabb:"Wash.",postalabb:"WA",atLarge:!1,fips:"53",evPercent:2,evTotal:12},WV:{name:"West Virginia",apabb:"W.Va.",postalabb:"WV",atLarge:!1,fips:"54",evPercent:1,evTotal:5},WI:{name:"Wisconsin",apabb:"Wis.",postalabb:"WI",atLarge:!1,fips:"55",evPercent:2,evTotal:10},WY:{name:"Wyoming",apabb:"Wyo.",postalabb:"WY",atLarge:!0,fips:"56",evPercent:.5,evTotal:3},US:{name:"United States",apabb:"US",postalabb:"US",atLarge:!0,fips:"0",evPercent:100,evTotal:538}},electionApp.statesCalendar={2014:{P:{AL:{P:!1,S:!0,H:!0,G:!0,I:!1},AK:{P:!1,S:!0,H:!0,G:!0,I:!1},AZ:{P:!1,S:!1,H:!0,G:!0,I:!1},AR:{P:!1,S:!0,H:!0,G:!0,I:!1},CA:{P:!1,S:!1,H:!0,G:!0,I:!1},CO:{P:!1,S:!0,H:!0,G:!0,I:!1},CT:{P:!1,S:!1,H:!0,G:!0,I:!1},DE:{P:!1,S:!0,H:!0,G:!1,I:!1},DC:{P:!1,S:!1,H:!1,G:!1,I:!1},FL:{P:!1,S:!1,H:!0,G:!0,I:!1},GA:{P:!1,S:!0,H:!0,G:!0,I:!1},HI:{P:!1,S:!1,H:!0,G:!0,I:!1},ID:{P:!1,S:!0,H:!0,G:!0,I:!1},IL:{P:!1,S:!0,H:!0,G:!0,I:!1},IN:{P:!1,S:!1,H:!0,G:!1,I:!1},IA:{P:!1,S:!0,H:!0,G:!0,I:!1},KS:{P:!1,S:!0,H:!0,G:!0,I:!1},KY:{P:!1,S:!0,H:!0,G:!1,I:!1},LA:{P:!1,S:!1,H:!1,G:!1,I:!1},ME:{P:!1,S:!0,H:!0,G:!0,I:!1},MD:{P:!1,S:!1,H:!0,G:!0,I:!1},MA:{P:!1,S:!0,H:!0,G:!0,I:!1},MI:{P:!1,S:!0,H:!0,G:!0,I:!1},MN:{P:!1,S:!0,H:!0,G:!0,I:!1},MS:{P:!1,S:!0,H:!0,G:!1,I:!1},MO:{P:!1,S:!1,H:!0,G:!1,I:!1},MT:{P:!1,S:!0,H:!0,G:!1,I:!1},NE:{P:!1,S:!0,H:!0,G:!0,I:!1},NV:{P:!1,S:!1,H:!0,G:!0,I:!1},NH:{P:!1,S:!0,H:!0,G:!0,I:!1},NJ:{P:!1,S:!0,H:!0,G:!1,I:!1},NM:{P:!1,S:!0,H:!0,G:!0,I:!1},NY:{P:!1,S:!1,H:!0,G:!0,I:!1,L:!0},NC:{P:!1,S:!0,H:!0,G:!1,I:!1},ND:{P:!1,S:!1,H:!0,G:!1,I:!1},OH:{P:!1,S:!1,H:!0,G:!0,I:!1},OK:{P:!1,S:!0,H:!0,G:!0,I:!1},OR:{P:!1,S:!0,H:!0,G:!0,I:!1},PA:{P:!1,S:!1,H:!0,G:!0,I:!1},RI:{P:!1,S:!0,H:!0,G:!0,I:!1},SC:{P:!1,S:!0,H:!0,G:!0,I:!1,L:!0},SD:{P:!1,S:!0,H:!0,G:!0,I:!1},TN:{P:!1,S:!0,H:!0,G:!0,I:!1},TX:{P:!1,S:!0,H:!0,G:!0,I:!1,L:!0},UT:{P:!1,S:!1,H:!0,G:!1,I:!1},VT:{P:!1,S:!1,H:!0,G:!0,I:!1},VA:{P:!1,S:!1,H:!0,G:!1,I:!1},WA:{P:!1,S:!1,H:!0,G:!1,I:!1},WV:{P:!1,S:!0,H:!0,G:!1,I:!1},WI:{P:!1,S:!1,H:!0,G:!0,I:!1},WY:{P:!1,S:!0,H:!0,G:!0,I:!1}},G:{AL:{P:!1,S:!0,H:!0,G:!0,I:!0},AK:{P:!1,S:!0,H:!0,G:!0,I:!0},AZ:{P:!1,S:!1,H:!0,G:!0,I:!1},AR:{P:!1,S:!0,H:!0,G:!0,I:!0},CA:{P:!1,S:!1,H:!0,G:!0,I:!0},CO:{P:!1,S:!0,H:!0,G:!0,I:!0},CT:{P:!1,S:!1,H:!0,G:!0,I:!0},DE:{P:!1,S:!0,H:!0,G:!1,I:!1},DC:{P:!1,S:!1,H:!1,G:!1,I:!0,M:!0},FL:{P:!1,S:!1,H:!0,G:!0,I:!0},GA:{P:!1,S:!0,H:!0,G:!0,I:!0},HI:{P:!1,S:!1,H:!0,G:!0,I:!1},ID:{P:!1,S:!0,H:!0,G:!0,I:!1},IL:{P:!1,S:!0,H:!0,G:!0,I:!1},IN:{P:!1,S:!1,H:!0,G:!1,I:!1},IA:{P:!1,S:!0,H:!0,G:!0,I:!1},KS:{P:!1,S:!0,H:!0,G:!0,I:!1},KY:{P:!1,S:!0,H:!0,G:!1,I:!1},LA:{P:!0,S:!0,H:!0,G:!1,I:!1},ME:{P:!1,S:!0,H:!0,G:!0,I:!1},MD:{P:!1,S:!1,H:!0,G:!0,I:!1},MA:{P:!1,S:!0,H:!0,G:!0,I:!0},MI:{P:!1,S:!0,H:!0,G:!0,I:!1},MN:{P:!1,S:!0,H:!0,G:!0,I:!1},MS:{P:!1,S:!0,H:!0,G:!1,I:!1},MO:{P:!1,S:!1,H:!0,G:!1,I:!0},MT:{P:!1,S:!0,H:!0,G:!1,I:!0},NE:{P:!1,S:!0,H:!0,G:!0,I:!0},NV:{P:!1,S:!1,H:!0,G:!0,I:!1,L:!0},NH:{P:!1,S:!0,H:!0,G:!0,I:!1},NJ:{P:!1,S:!0,H:!0,G:!1,I:!1},NM:{P:!1,S:!0,H:!0,G:!0,I:!1},NY:{P:!1,S:!1,H:!0,G:!0,I:!0,L:!0},NC:{P:!1,S:!0,H:!0,G:!1,I:!1},ND:{P:!1,S:!1,H:!0,G:!1,I:!0},OH:{P:!1,S:!1,H:!0,G:!0,I:!1},OK:{P:!1,S:!0,H:!0,G:!0,I:!1},OR:{P:!1,S:!0,H:!0,G:!0,I:!0},PA:{P:!1,S:!1,H:!0,G:!0,I:!1},RI:{P:!1,S:!0,H:!0,G:!0,I:!1},SC:{P:!1,S:!0,H:!0,G:!0,I:!1,L:!0},SD:{P:!1,S:!0,H:!0,G:!0,I:!1},TN:{P:!1,S:!0,H:!0,G:!0,I:!0},TX:{P:!1,S:!0,H:!0,G:!0,I:!1,L:!0},UT:{P:!1,S:!1,H:!0,G:!1,I:!1},VT:{P:!1,S:!1,H:!0,G:!0,I:!1},VA:{P:!1,S:!0,H:!0,G:!1,I:!1},WA:{P:!1,S:!1,H:!0,G:!1,I:!0},WV:{P:!1,S:!0,H:!0,G:!1,I:!1},WI:{P:!1,S:!1,H:!0,G:!0,I:!1},WY:{P:!1,S:!0,H:!0,G:!0,I:!1}}},2016:{P:{AL:{P:!0,S:!0,H:!0,G:!1,I:!1},AK:{P:!0,S:!0,H:!0,G:!1,I:!1},AZ:{P:!0,S:!0,H:!0,G:!1,I:!1},AR:{P:!0,S:!0,H:!0,G:!1,I:!1},CA:{P:!0,S:!0,H:!0,G:!1,I:!1},CO:{P:!0,S:!0,H:!0,G:!1,I:!1},CT:{P:!0,S:!0,H:!0,G:!1,I:!1},DE:{P:!0,S:!1,H:!0,G:!0,I:!1},DC:{P:!0,S:!1,H:!1,G:!1,I:!1},FL:{P:!0,S:!0,H:!0,G:!1,I:!1},GA:{P:!0,S:!0,H:!0,G:!1,I:!1},HI:{P:!0,S:!0,H:!0,G:!1,I:!1},ID:{P:!0,S:!0,H:!0,G:!1,I:!1},IL:{P:!0,S:!0,H:!0,G:!1,I:!1},IN:{P:!0,S:!0,H:!0,G:!0,I:!1},IA:{P:!0,S:!0,H:!0,G:!1,I:!1},KS:{P:!0,S:!0,H:!0,G:!1,I:!1},KY:{P:!0,S:!0,H:!0,G:!1,I:!1},LA:{P:!0,S:!0,H:!1,G:!1,I:!1},ME:{P:!0,S:!1,H:!0,G:!1,I:!1},MD:{P:!0,S:!0,H:!0,G:!1,I:!1},MA:{P:!0,S:!1,H:!0,G:!1,I:!1},MI:{P:!0,S:!1,H:!0,G:!1,I:!1},MN:{P:!0,S:!1,H:!0,G:!1,I:!1},MS:{P:!0,S:!1,H:!0,G:!1,I:!1},MO:{P:!0,S:!0,H:!0,G:!0,I:!1},MT:{P:!0,S:!1,H:!0,G:!0,I:!1},NE:{P:!0,S:!1,H:!0,G:!1,I:!1},NV:{P:!0,S:!0,H:!0,G:!1,I:!1},NH:{P:!0,S:!0,H:!0,G:!0,I:!1},NJ:{P:!0,S:!1,H:!0,G:!1,I:!1},NM:{P:!0,S:!1,H:!0,G:!1,I:!1},NY:{P:!0,S:!0,H:!0,G:!1,I:!1},NC:{P:!0,S:!0,H:!0,G:!0,I:!1},ND:{P:!0,S:!0,H:!0,G:!0,I:!1},OH:{P:!0,S:!0,H:!0,G:!1,I:!1},OK:{P:!0,S:!0,H:!0,G:!1,I:!1},OR:{P:!0,S:!0,H:!0,G:!0,I:!1},PA:{P:!0,S:!0,H:!0,G:!1,I:!1},RI:{P:!0,S:!1,H:!0,G:!1,I:!1},SC:{P:!0,S:!0,H:!0,G:!1,I:!1},SD:{P:!0,S:!0,H:!0,G:!1,I:!1},TN:{P:!0,S:!1,H:!0,G:!1,I:!1},TX:{P:!0,S:!1,H:!0,G:!1,I:!1},UT:{P:!0,S:!0,H:!0,G:!0,I:!1},VT:{P:!0,S:!0,H:!0,G:!0,I:!1},VA:{P:!0,S:!1,H:!0,G:!1,I:!1},WA:{P:!0,S:!0,H:!0,G:!0,I:!1},WV:{P:!0,S:!1,H:!0,G:!0,I:!1},WI:{P:!0,S:!0,H:!0,G:!1,I:!1},WY:{P:!0,S:!1,H:!0,G:!1,I:!1},US:{P:!0}},G:{US:{P:!0,S:!0,H:!0,G:!0,I:!0},AL:{P:!0,S:!0,H:!0,G:!1,I:!0},AK:{P:!0,S:!0,H:!0,G:!1,I:!0},AZ:{P:!0,S:!0,H:!0,G:!1,I:!0},AR:{P:!0,S:!0,H:!0,G:!1,I:!0},CA:{P:!0,S:!0,H:!0,G:!1,I:!0},CO:{P:!0,S:!0,H:!0,G:!1,I:!0},CT:{P:!0,S:!0,H:!0,G:!1,I:!1},DE:{P:!0,S:!1,H:!0,G:!0,I:!1},DC:{P:!0,S:!1,H:!1,G:!1,I:!0},FL:{P:!0,S:!0,H:!0,G:!1,I:!0},GA:{P:!0,S:!0,H:!0,G:!1,I:!0},HI:{P:!0,S:!0,H:!0,G:!1,I:!0},ID:{P:!0,S:!0,H:!0,G:!1,I:!0},IL:{P:!0,S:!0,H:!0,G:!1,I:!0},IN:{P:!0,S:!0,H:!0,G:!0,I:!0},IA:{P:!0,S:!0,H:!0,G:!1,I:!1},KS:{P:!0,S:!0,H:!0,G:!1,I:!0},KY:{P:!0,S:!0,H:!0,G:!1,I:!1},LA:{P:!0,S:!0,H:!0,G:!1,I:!0},ME:{P:!0,S:!1,H:!0,G:!1,I:!0},MD:{P:!0,S:!0,H:!0,G:!1,I:!0},MA:{P:!0,S:!1,H:!0,G:!1,I:!0},MI:{P:!0,S:!1,H:!0,G:!1,I:!1},MN:{P:!0,S:!1,H:!0,G:!1,I:!0},MS:{P:!0,S:!1,H:!0,G:!1,I:!1},MO:{P:!0,S:!0,H:!0,G:!0,I:!0},MT:{P:!0,S:!1,H:!0,G:!0,I:!0},NE:{P:!0,S:!1,H:!0,G:!1,I:!0},NV:{P:!0,S:!0,H:!0,G:!1,I:!0},NH:{P:!0,S:!0,H:!0,G:!0,I:!1},NJ:{P:!0,S:!1,H:!0,G:!1,I:!0},NM:{P:!0,S:!1,H:!0,G:!1,I:!0},NY:{P:!0,S:!0,H:!0,G:!1,I:!1},NC:{P:!0,S:!0,H:!0,G:!0,I:!1},ND:{P:!0,S:!0,H:!0,G:!0,I:!0},OH:{P:!0,S:!0,H:!0,G:!1,I:!1},OK:{P:!0,S:!0,H:!0,G:!1,I:!0},OR:{P:!0,S:!0,H:!0,G:!0,I:!0},PA:{P:!0,S:!0,H:!0,G:!1,I:!0},RI:{P:!0,S:!1,H:!0,G:!1,I:!0},SC:{P:!0,S:!0,H:!0,G:!1,I:!1},SD:{P:!0,S:!0,H:!0,G:!1,I:!0},TN:{P:!0,S:!1,H:!0,G:!1,I:!1},TX:{P:!0,S:!1,H:!0,G:!1,I:!1},UT:{P:!0,S:!0,H:!0,G:!0,I:!0},VT:{P:!0,S:!0,H:!0,G:!0,I:!1},VA:{P:!0,S:!1,H:!0,G:!1,I:!0},WA:{P:!0,S:!0,H:!0,G:!0,I:!0},WV:{P:!0,S:!1,H:!0,G:!0,I:!1},WI:{P:!0,S:!0,H:!0,G:!1,I:!1},WY:{P:!0,S:!1,H:!0,G:!1,I:!0}}}},electionApp.bopWidths={CT:1.35,OR:1.35,OK:1.35,AL:1.7,CO:1.7,CA:10.3},electionApp.vectorVersions={SD:{counties:["20160607"]}},electionApp.loadData=function(){electionApp.model.loadData()},electionApp.addViews=function(){var a,b,c,d,e,f,g={},h={path:{},selected:{}};return $(".js-live-results:not(.is-loading)").each(function(i,j){for($(j).addClass("is-loading"),g={path:{},selected:{},sponsored:{},eyebrow:{}},a=0,b=j.attributes,a;a<b.length;a++)if(c=b[a].name,d=b[a].value,e=c.split("data-"),e.length>1)switch(f=e[1].toLowerCase()){case"module-name":g.moduleName=d;break;case"develop":g.develop="true"===d,h.develop=!(void 0!==h.develop||!g.develop)||void 0;break;case"server-date":g.serverDate=d,h.serverDate=d;break;case"path-js":g.path.js=d,h.path.js=g.path.js;break;case"path-data":g.path.data=d,g.path.lines=d,h.path.data=g.path.data,h.path.lines=g.path.lines;break;case"path-modeljs":g.path.modeljs=d,h.path.modeljs=g.path.modeljs;break;case"path-mapjs":g.path.mapjs=d,h.path.mapjs=g.path.mapjs;break;case"map":g.map="true"===d,h.map=void 0===h.map?g.map:void 0;break;case"map-show-national-districts":g.mapShowNationalDistricts="true"===d,g.mapShowNationalDistricts&&(h.mapShowNationalDistricts=!0);break;case"candidate-picks":var k,l=JSON.parse(d);g.candidatePicks={};for(k in l){var m=0;for(g.candidatePicks[k]={},m;m<l[k].length;m++)g.candidatePicks[k][l[k][m]]=""}break;case"isschedule":g.isSchedule="true"===d,h.isSchedule=void 0===h.isSchedule?g.isSchedule:h.isSchedule;break;case"ishomepage":g.isHomepage="true"===d,h.isHomepage=void 0===h.isHomepage?g.isHomepage:h.isHomepage;break;case"isuniversalapp":g.isUniversalApp="true"===d,h.isUniversalApp=void 0===h.isUniversalApp?g.isUniversalApp:h.isUniversalApp;break;case"haslazy":g.hasLazy="true"===d,h.hasLazy=void 0===h.hasLazy?g.hasLazy:h.hasLazy;break;case"senate-bop-dek":g.bopdekSenate=d,h.bopdekSenate=d;break;case"house-bop-dek":g.bopdekHouse=d,h.bopdekHouse=d;break;case"cache-interval":isNaN(parseInt(d))||(g.cacheDuration=parseInt(d),h.cacheDuration=parseInt(d));break;case"refresh-interval":isNaN(parseInt(d))||(g.timerDuration=parseInt(d),h.timerDuration=parseInt(d));break;case"selected-year":g.selected.year=d,h.selected.year=g.selected.year;break;case"selected-yeartype":g.selected.yearType=d,h.selected.yearType=g.selected.yearType;break;case"selected-yearseason":g.selected.yearSeason=d,h.selected.yearSeason=g.selected.yearSeason;break;case"selected-race":g.selected.race=d,h.selected.race=g.selected.race;break;case"selected-state":g.selected.state=d;break;case"selected-date":g.selected.date=d,h.selected.date=g.selected.date;break;case"selected-party":g.selected.party=d;break;case"selected-district":g.selected.district=d;break;case"selected-special":g.selected.special=d,h.selected.special=g.selected.special;break;case"selected-runoff":g.selected.runoff=d,h.selected.runoff=g.selected.runoff;break;case"selected-recall":g.selected.recall=d,h.selected.recall=g.selected.recall;break;case"eyebrow-title":g.eyebrow.title=d;break;case"eyebrow-link":g.eyebrow.link=d;break;case"sponsored-title":g.sponsored.title=d;break;case"sponsored-image":g.sponsored.image=d;break;case"sponsored-link":g.sponsored.link=d}void 0!==g.moduleName&&(g.path.lines=g.path.lines+"vectors/"+g.selected.year+"/",g.path.mapjs=g.develop?"/js/election/2016/development/map.js":g.path.mapjs,g.path.modeljs=g.develop?"/js/election/2016/development/model.js":g.path.modeljs,"election-map"===g.moduleName&&(electionApp.options.map=!0,g.map=!0,h.map=!0),"election-overview-page"===g.moduleName&&(g.selected.race=""),"story-primaries-2016"===g.moduleName&&(g.isStoryPage=!0),g.develop&&(electionApp.options.develop=!0),electionApp._viewManager.add(g,$(j)),"story-primaries-2016"!==g.moduleName&&(h.selected.state=g.selected.state))}),h.path.mapjs=g.develop?"/js/election/2016/development/map.js":g.path.mapjs,
h.path.modeljs=g.develop?"/js/election/2016/development/model.js":g.path.modeljs,h.path.lines=h.path.lines+"vectors/"+g.selected.year+"/",h},electionApp.setOptions=function(a){return void 0===a.path&&(a.path={}),void 0===a.selected&&(a.selected={}),void 0===a.sponsored&&(a.sponsored={}),void 0===a.eyebrow&&(a.eyebrow={}),a.develop=a.develop||!1,a.checkzeros=a.checkzeros||!1,a.serverDate=a.serverDate||"",a.path={js:a.path.js||(1==a.develop?"/js/election/2016/development/":"/assets/js.min/election/2016/"),modeljs:a.path.modeljs||"model",mapjs:a.path.mapjs||"map",data:a.path.data||"/mapdata/",lines:a.path.lines||a.path.data+"vectors/"},a.map="boolean"==typeof a.map&&a.map,a.cacheDuration=a.cacheDuration||30,a.cacheStart=a.cacheStart||new Date,a.timerDuration=a.timerDuration||30,a.selected={yearDefault:a.selected.yearDefault||"2016",year:a.selected.year||"2016",yearType:a.selected.yearType||"P",yearSeason:a.selected.yearSeason||"P",race:a.selected.hasOwnProperty("race")?a.selected.race:"S",state:a.selected.state||"",date:a.selected.date||"",party:a.selected.party||"",district:a.selected.district||"",special:"true"==a.selected.special,runoff:"true"==a.selected.runoff,recall:"true"==a.selected.recall,homepageState:"",popup:{}},a.isHomepage=!!a.hasOwnProperty("isHomepage")&&a.isHomepage,a.isStoryPage=!!a.hasOwnProperty("isStoryPage")&&a.isStoryPage,a.isGeneralElection=!!a.hasOwnProperty("isGeneralElection")&&a.isGeneralElection,a.isUniversalApp=!!a.hasOwnProperty("isUniversalApp")&&a.isUniversalApp,a.isIpad=!!a.hasOwnProperty("isIpad")&&a.isIpad,a.isMobile=!!a.hasOwnProperty("isMobile")&&a.isMobile,a.isTouch=a.isTouch||"undefined"!=typeof Modernizr&&Modernizr.touch,a.isSVG=a.isSVG||"undefined"==typeof Modernizr||Modernizr.inlinesvg,a.isSchedule=!!a.hasOwnProperty("isSchedule")&&a.isSchedule,a.isUS=""==a.selected.state||"US"==a.selected.state,a.hasLazy="boolean"==typeof a.hasLazy&&a.hasLazy,a.bopdekSenate=void 0!==a.bopdekSenate?a.bopdekSenate:"",a.bopdekHouse=void 0!==a.bopdekHouse?a.bopdekHouse:"",a.mapShowNationalDistricts="boolean"==typeof a.mapShowNationalDistricts&&a.mapShowNationalDistricts,a.mapRollover="boolean"!=typeof a.mapRollover||a.mapRollover,a.mapClick="boolean"!=typeof a.mapClick||a.mapClick,a.mapClickAction=a.mapClickAction||{state:"popup",district:"zoomAndPopup",county:"popup"},a.mapClickZoomedAction=a.mapClickZoomedAction||{state:"popup",district:"zoomAndPopup",county:"popup"},a.mapStateZoomContinuous="boolean"==typeof a.mapStateZoomContinuous&&a.mapStateZoomContinuous,a.mapAnimate="boolean"==typeof a.mapAnimate?a.mapAnimate:!a.isTouch,a.eyebrow={title:a.eyebrow.title||"",link:a.eyebrow.link||""},a.sponsored={title:a.sponsored.title||"",image:a.sponsored.image||"",link:a.sponsored.link||""},a.isAnimating=!1,a.tasks=[],a.isHomepage&&(a.selected.homepageState=a.selected.state),a};var _lazyLoaded={},_$lazyLoadedGroup=[];PoliticoElectionApp=function(){function a(){$(document).ready(function(){if(!electionApp._config.init&&$(".js-live-results:not(.is-loading)").length>0){var a=electionApp.addViews();electionApp.options=electionApp.setOptions(a),a.map&&queueJS("map",a.path.mapjs,"mapLoadComplete"),a.develop&&queueJS("election-model","/js/election/"+a.selected.year+"/development/election-model.js","modelLoadComplete"),addTasks([{task:"loadJS"},{task:"loadJSComplete"}]),doNextTask()}})}return a}(),PoliticoElectionViewManager.prototype.add=function(a,b){var c;if(void 0!==a.moduleName)switch(a.moduleName){case"balance-of-power":c=new PoliticoElectionBalanceOfPowerView(a,b);break;case"homepage-general-2016":c=new PoliticoElectionHomepageGeneralView(a,b);break;case"homepage-general-2016-menu":c=new PoliticoElectionHomepageGeneralMenu(a,b);break;case"homepage-general-2016-data-block":c=new PoliticoElectionHomepageDataBlockView(a,b);break;case"homepage-primaries-2016":c=new PoliticoElectionHomepagePrimariesView(a,b);break;case"homepage-small-primaries-2016":c=new PoliticoElectionSmallHomepageView(a,b);break;case"story-primaries-2016":c=new PoliticoElectionStoryPageView(a,b);break;case"election-map":c=new PoliticoElectionMapView(a,b);break;case"election-overview-page":c=new PoliticoElectionPageView(a,b);break;default:c=new PoliticoElectionView(a,b)}else c=new PoliticoElectionView(config);this.views.push(c)},PoliticoElectionViewManager.prototype.init=function(){var a=this,b=a.views,c=0;for(c;c<b.length;c++)b[c].$elem.hasClass("is-loading")&&b[c].init()},PoliticoElectionViewManager.prototype.update=function(){var a=this,b=a.views,c=0;for(c;c<b.length;c++)b[c].update()},PoliticoElectionViewManager.prototype.resize=function(){var a=this,b=a.views,c=0;for(c;c<b.length;c++)b[c].resize()},PoliticoElectionViewManager.prototype.changeState=function(a){var b=this,c=b.views,d=0;for(d;d<c.length;d++)c[d].changeState(a)},PoliticoElectionViewManager.prototype.changeOffice=function(a,b){var c=this,d=c.views,e=0;for(e;e<d.length;e++)d[e].changeOffice(a,b)},PoliticoElectionViewManager.prototype.changeDistrict=function(a){var b=this,c=b.views,d=0;for(d;d<c.length;d++)c[d].changeDistrict(a)},PoliticoElectionView.prototype.init=function(){},PoliticoElectionView.prototype.update=function(){},PoliticoElectionView.prototype.resize=function(){},PoliticoElectionPageView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionPageView.prototype.init=function(){},PoliticoElectionPageView.prototype.update=function(){},PoliticoElectionHomepageGeneralMenu.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionHomepageGeneralMenu.prototype.initEvents=function(){var a=this;a.$elem.find("li.subnav").not(".reveal-at-md").on("click",a,a.officeClicked)},PoliticoElectionHomepageGeneralMenu.prototype.addEvents=function(){},PoliticoElectionHomepageGeneralMenu.prototype.removeEvents=function(){},PoliticoElectionHomepageGeneralMenu.prototype.officeClicked=function(a){a.preventDefault();var b=a.data,c=b.options.selected,d=$(a.currentTarget),e=$(a.target),f=d.attr("data-office"),g=d.hasClass("current"),h=b.$elem.find("li.subnav").not(".reveal-at-md"),i=c.race;g||(h.removeClass("current"),h.find("a").removeClass("color-inverted"),d.addClass("current"),e.addClass("color-inverted"),b.options.selected.race=f,setSelected(b.options.selected.state,f),b.$fullResultsLink.attr("href","/"+c.year+"-election/results/map/"+getOfficeURLName(f)),b.$fullResultsLink.html("Full "+getOfficeName(c.race)+" Results &raquo;"),addTasks([{task:"changeOffice",params:[f,i]}]),doNextTask())},PoliticoElectionHomepageGeneralMenu.prototype.changeOffice=function(a,b){},PoliticoElectionHomepageGeneralMenu.prototype.resize=function(){},PoliticoElectionHomepageGeneralMenu.prototype.init=function(){var a=this,b=a.options.selected;a.$elem.find("li.subnav[data-office="+b.race+"]").addClass("current"),a.$elem.find("li.subnav[data-office="+b.race+"] a").addClass("color-inverted"),a.$lastUpdated=a.$elem.parent().siblings(".content-toolbar__metadata").find(".content-toolbar__date-source"),a.$lastUpdated.html(a.getLastUpdatedHTML()),a.$fullResultsLink=a.$elem.parent().siblings(".content-toolbar__metadata").find(".content-toolbar__view-results"),a.$fullResultsLink.attr("href","/"+b.year+"-election/results/map/"+getOfficeURLName(b.race)),a.initEvents()},PoliticoElectionHomepageGeneralMenu.prototype.update=function(){var a=this;a.$lastUpdated.html(a.getLastUpdatedHTML())},PoliticoElectionHomepageGeneralMenu.prototype.getLastUpdatedHTML=function(){return"Updated: "+electionApp.model.getLastUpdatedText(!0,!0)+" | Source: AP"},PoliticoElectionBalanceOfPowerView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionBalanceOfPowerView.prototype.resize=function(){},PoliticoElectionBalanceOfPowerView.prototype.init=function(){this.update()},PoliticoElectionBalanceOfPowerView.prototype.changeOffice=function(a,b){var c=this;c.options.selected.race=a,c.update()},PoliticoElectionBalanceOfPowerView.prototype.update=function(){var a=this,b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i=d.race,j="All",k=!1,l=!1,m=!1;b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,"All","All"),c=electionApp.model.getRacesByRaceNums(e,b,null);var n,o,p,q,r,s,t,u,v,w,x={},y={},z=0,A={},B={votecount:0,ev:0},C={votecount:0,ev:0},D="";"P"==i?(D='<div class="stats-group pos-alpha type-democrat"><div class="headshot"><a href="/2016-election/candidate-overview/hillaryclinton"><img src="http://s3.amazonaws.com/origin-east-elections.politico.com/mapdata/2016/images/clinton-90x90.jpg.jpeg" alt="Hillary Clinton"></a></div><div class="stats-content"><header class="stats-primary"><h2 class="mega"><a href="/2016-election/candidate-overview/hillaryclinton">Hillary Clinton (D)</a></h2></header><div class="stats-secondary"><div class="macro">-<span class="macro-label">Total</span></div><div class="micro"><h3>Electoral Votes</h3><p>- Popular Votes</p></div></div></div></div><div class="stats-group pos-beta type-republican"><div class="headshot"><a href="/2016-election/candidate-overview/donaldtrump"><img src="http://s3.amazonaws.com/origin-east-elections.politico.com/mapdata/2016/images/trumptracker.jpg" alt="Donald Trump"></a></div><div class="stats-content"><header class="stats-primary"><h2 class="mega"><a href="/2016-election/candidate-overview/donaldtrump">Donald Trump (R)</a></h2></header><div class="stats-secondary"><div class="macro">-<span class="macro-label">Total</span></div><div class="micro"><h3>Electoral Votes</h3><p>- Popular Votes</p></div></div></div></div>',D+='<footer class="stats-meta"><p>270 of 538 Electoral Votes needed to win</p></footer>'):"H"!=i&&"S"!=i||(D='<div class="stats-group pos-alpha type-democrat"><div class="stats-content"><div class="stats-secondary"><div class="macro">-<span class="macro-label">Total</span></div><div class="micro"><h3>Democrat</h3><p></p></div></div></div></div><div class="stats-group pos-beta type-republican"><div class="stats-content"><div class="stats-secondary"><div class="macro">-<span class="macro-label">Total</span></div><div class="micro"><h3>Republican</h3><p></p></div></div></div></div>',D+="H"==i?'<footer class="stats-meta"><p>218 of 435 Seats Needed for Majority</p><p class="meta-supplement">'+a.options.bopdekHouse+"</p></footer>":'<footer class="stats-meta"><p>51 of 100 Seats Needed for Majority</p><p class="meta-supplement">'+a.options.bopdekSenate+"</p></footer>"),a.$elem.find(".balance-bar .bar-democrat").each(function(a,b){0!==a?$(this).remove():$(this).find(".bar-details").html("<strong>-</strong>Democratic")}),a.$elem.find(".balance-bar .bar-independent").each(function(a,b){0!==a?$(this).remove():$(this).find(".bar-details").html("<strong>-</strong>Independent")}),a.$elem.find(".balance-bar .bar-not-called").each(function(a,b){0!==a?$(this).remove():$(this).find(".bar-details").html("<strong>-</strong>Not Yet Called")}),a.$elem.find(".balance-bar .bar-republican").each(function(a,b){0!==a?$(this).remove():$(this).find(".bar-details").html("<strong>-</strong>Republican")}),a.$elem.find(".balance-stats").html(D);var E=0;for(E;E<c.length;E++){if(n=c[E],o=n.data,p=n.config,p.date,j=o.stateAbb,q=o.fips,q<10&&q>0?"0"+q:q,i=o.officeID,p.raceType,k=o.special,l=o.runoff,m=o.recall,p.bitly,r=electionApp.statesInfo[j].name,!x.hasOwnProperty(j)&&"US"!=j){for(z=0,A=[],u=electionApp.model.getSortedRaceVotesByVoteCount(o,e,f,!1,!1,!1),z;z<u.length;z++)v=u[z],v.ev>0&&(s=getPartySingleCharacter(v.party),s="D"!=s&&"R"!=s?"I":s,t=electionApp.statesInfo[j].evTotal!==v.ev?v.ev/electionApp.statesInfo[j].evTotal:1,A.push({party:s,ev:v.ev,percentUSev:electionApp.statesInfo[j].evPercent*t}));x[j]=j,y[j]={stateAbb:j,stateName:r,"ev-available":electionApp.statesInfo[j].evTotal,"ev-won":A}}if("US"==j)for(z=0,A={},u=electionApp.model.getSortedRaceVotesByVoteCount(o,e,f,!1,!1,!1),z;z<u.length;z++)v=u[z],s=getPartySingleCharacter(v.party),partyClass=getPartySingleCharacter(v.party),w="D"==s?'<a href="/2016-election/candidate-overview/hillaryclinton">Hillary Clinton (D)</a>':'<a href="/2016-election/candidate-overview/donaldtrump">Donald Trump (R)</a>',v.winner?a.$elem.find(".balance-stats .stats-group.type-"+getPartyClass(s)+" .stats-content header h2").html(w+'<span class="token token-winner"> <b aria-hidden="true" class="icon icon-circle-check"></b><span class="icon-text">Winner</span></span>'):a.$elem.find(".balance-stats .stats-group.type-"+getPartyClass(s)+" .stats-content header h2").html(w),"D"==s?B={votecount:v.votecount,ev:v.ev}:"R"==s?C={votecount:v.votecount,ev:v.ev}:{votecount:v.votecount,ev:v.ev}}var F,G=electionApp.model.getBalanceOfPower("2016"),H=100/F*G[i].D.total,I=100/F*G[i].I.total,J=100/F*G[i].R.total,K=0,L=0;if(G.hasOwnProperty(i)&&"P"==i?(G.P.hasOwnProperty("D")&&a.$elem.find(".balance-stats .stats-group.type-democrat .stats-secondary .macro").html(G.P.D+'<span class="macro-label">Total</span>'),G.P.hasOwnProperty("R")&&a.$elem.find(".balance-stats .stats-group.type-republican .stats-secondary .macro").html(G.P.R+'<span class="macro-label">Total</span>')):G.hasOwnProperty(i)&&(G[i].hasOwnProperty("D")&&a.$elem.find(".balance-stats .stats-group.type-democrat .stats-secondary .macro").html(G[i].D.total+'<span class="macro-label">Total</span>'),G[i].hasOwnProperty("R")&&a.$elem.find(".balance-stats .stats-group.type-republican .stats-secondary .macro").html(G[i].R.total+'<span class="macro-label">Total</span>')),"P"==i?(a.$elem.find(".balance-stats .stats-group.type-democrat .stats-secondary .micro p").html("<p>"+electionApp.model.formatNumberCommas(B.votecount)+" Popular Votes</p>"),a.$elem.find(".balance-stats .stats-group.type-republican .stats-secondary .micro p").html("<p>"+electionApp.model.formatNumberCommas(C.votecount)+" Popular Votes</p>")):(G.hasOwnProperty(i)&&"S"==i||"H"==i)&&("S"==i?F=100:"H"==i&&(F=435),H=Math.floor(100/F*G[i].D.total*100)/100,I=Math.floor(100/F*G[i].I.total*100)/100,J=Math.floor(100/F*G[i].R.total*100)/100,K=100-H-I-J,L=F-G[i].D.total-G[i].I.total-G[i].R.total,a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-democrat").css({width:H+"%"}),a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-independent").css({width:I+"%"}),a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-not-called").css({width:K+"%"}),a.$elem.find(".balance-bar .bar-group.pos-beta .bar-republican").css({width:J+"%"}),a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-democrat .bar-details strong").html(G[i].D.total),a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-independent .bar-details strong").html(G[i].I.total),a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-not-called .bar-details strong").html(L),a.$elem.find(".balance-bar .bar-group.pos-beta .bar-republican .bar-details strong").html(G[i].R.total),a.$elem.find(".balance-stats .stats-group.type-democrat .stats-secondary .micro p").html("Net "+G[i].D.net+", Gained "+G[i].D.gained+", Lost "+G[i].D.lost),a.$elem.find(".balance-stats .stats-group.type-republican .stats-secondary .micro p").html("Net "+G[i].R.net+", Gained "+G[i].R.gained+", Lost "+G[i].R.lost),0===H?a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-democrat").hide():a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-democrat").show(),0===I?a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-independent").hide():a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-independent").show(),0===K?a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-not-called").hide():a.$elem.find(".balance-bar .bar-group.pos-alpha .bar-not-called").show(),0===J?a.$elem.find(".balance-bar .bar-group.pos-beta .bar-republican").hide():a.$elem.find(".balance-bar .bar-group.pos-beta .bar-republican").show()),"P"==i){var M=0,N={D:[],R:[],I:[]},O=0,P=[];for(M;M<electionApp.stateAbbs.length;M++)if(z=0,j=electionApp.stateAbbs[M],y.hasOwnProperty(j)){for(O=y[j]["ev-available"],r=y[j].stateName,z;z<y[j]["ev-won"].length;z++)A=y[j]["ev-won"][z].ev,s=y[j]["ev-won"][z].party,percentUSev=y[j]["ev-won"][z].percentUSev,O-=A,N[s].push('<li class="bar-'+getPartyClass(s)+'" style="width:'+percentUSev+'%;"><span class="bar-details"><b aria-hidden="true" class="state-icon stateface stateface-'+j.toLowerCase()+'"></b><span class="state-text">'+r+'</span><span class="details-stat">Electoral Votes: '+A+"</span></span></li>");O>0&&(t=electionApp.statesInfo[j].evTotal!==O?O/electionApp.statesInfo[j].evTotal:1,percentUSev=electionApp.statesInfo[j].evPercent*t,P.push('<li class="bar-not-called" style="width:'+percentUSev+'%;"><span class="bar-details"><b aria-hidden="true" class="state-icon stateface stateface-'+j.toLowerCase()+'"></b><span class="state-text">'+r+'</span><span class="details-stat">Electoral Votes: '+O+"</span></span></li>"))}0===N.D.length&&N.D.push('<li class="bar-democrat" style="width:0%; display:none;"><span class="bar-details"><strong>-</strong>Democratic</span></li>'),0===N.I.length&&N.I.push('<li class="bar-independent" style="width:0%; display:none;"><span class="bar-details"><strong>-</strong>Independent</span></li>'),0===P.length&&P.push('<li class="bar-not-called" style="width:0%; display:none;"><span class="bar-details"><strong>-</strong>Not Yet Called</span></li>'),0===N.R.length&&N.R.push('<li class="bar-republican" style="width:0%; display:none;"><span class="bar-details"><strong>-</strong>Republican</span></li>'),a.$elem.find(".balance-bar .bar-group.pos-alpha").html(N.D.join("")+N.I.join("")+P.join("")),a.$elem.find(".balance-bar .bar-group.pos-beta").html(N.R.join(""))}a.options.isHomepage&&("P"!=i&&"S"!=i&&"H"!=i?(a.$elem.find(".balance-bar").hide(),a.$elem.find(".balance-stats").hide()):(a.$elem.find(".balance-bar").show(),a.$elem.find(".balance-stats").show()))},PoliticoElectionStoryPageView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionStoryPageView.prototype.resize=function(){},PoliticoElectionStoryPageView.prototype.init=function(){var a=this;a.$elem.removeClass("is-loading");var b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i="All",j=d.state,k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null,n="";b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var o,p,q,r,s,t,u,v,w={},x=!1,y={},z=[],A=0;for(A;A<c.length;A++)o=c[A],p=o.data,q=o.config,r=q.date,j=p.stateAbb,s=p.fips,s<10&&s>0?"0"+s:s,i=p.officeID,t=q.raceType,k=p.special,l=p.runoff,m=p.recall,q.bitly,v=electionApp.statesInfo[j].name,y.hasOwnProperty(j)||(y[j]={},z.push({stateName:v})),y[j].hasOwnProperty(i)||(y[j][i]={}),y[j][i].hasOwnProperty(t)||(y[j][i][t]={}),y[j][i][t]=o,d.state==j&&d.date==r&&d.race==i&&(w[p.raceTypeID]={data:p,config:q},n=getDetailedResultsURL(e,g,f,j,i,t,r,k,l,m),x=!0,u=electionApp.model.getDelegateExplainer(j));z.sort(function(a,b){return a.stateName>b.stateName?1:a.stateName<b.stateName?-1:0});var B=w.hasOwnProperty("D"),C=w.hasOwnProperty("E"),D=w.hasOwnProperty("R"),E=w.hasOwnProperty("S"),F=(B||C)&&(D||E),G=F?"layout-split":"";if(x)var H='<div class="races-bar">'+(a.options.eyebrow.link?'<a href="'+a.options.eyebrow.link+'">':"")+"<h5>"+(a.options.eyebrow.title?a.options.eyebrow.title:"")+"</h5>"+(a.options.eyebrow.link?"</a>":"");if(x&&z.length>1){H+='<div class="races-menu">KEY RACES: <ul>';var I=0;for(I;I<z.length;I++)H+='<li><a href="">'+z[I].stateName+"</a> </li>";for(H+="</ul><select>",I=0;I<z.length;I++)H+="<option>"+z[I].stateName+"</option>";H+="</select></div>"}H+="</div>",x&&(H+='<article class="results-group" data-fips="0"><header class="results-header"><div class="title"><h1>'+electionApp.statesInfo[j].name+"</h1><p><strong>"+a.getHomepageHeader(w)+", </strong>"+a.getRaceDate(h)+"</p></div>",H+='<div class="actions"><a href="'+n+'">Detailed Results</a></div></header>',H+='<div class="results-dataset"><div class="results-row '+G+'">'+a.getResultsHTML(w)+'</div><footer class="results-footer"><div class="clear"><span class="updated">'+a.getLastUpdatedHTML()+'</span><div class="text-key"><dl></dl></div></div>',"P"==a.options.selected.race&&(H+='<p class="fs-12">'+u+"</p>"),H+="</footer></div>",H+="</article>",a.$elem.html(H))},PoliticoElectionStoryPageView.prototype.update=function(){var a=this,b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i="All",j="All",k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null;b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var n,o,p,q,r,s,t,u={},v=!1,w={},x=[],y=0;for(y;y<c.length;y++)n=c[y],o=n.data,p=n.config,q=p.date,j=o.stateAbb,r=o.fips,r<10&&r>0?"0"+r:r,i=o.officeID,s=p.raceType,k=o.special,l=o.runoff,m=o.recall,p.bitly,t=electionApp.statesInfo[j].name,w.hasOwnProperty(j)||(w[j]={},x.push({stateName:t})),w[j].hasOwnProperty(i)||(w[j][i]={}),w[j][i].hasOwnProperty(s)||(w[j][i][s]={}),w[j][i][s]=n,d.state==j&&d.date==q&&d.race==i&&(u[o.raceTypeID]={data:o,config:p},getDetailedResultsURL(e,g,f,j,i,s,q,k,l,m),v=!0,electionApp.model.getDelegateExplainer(j));x.sort(function(a,b){return a.stateName>b.stateName?1:a.stateName<b.stateName?-1:0});a.options.eyebrow.link&&a.options.eyebrow.link,a.options.eyebrow.title&&a.options.eyebrow.title,a.options.eyebrow.link;v&&$(".results-dataset .results-row").html(a.getResultsHTML(u)),a.$elem.find("footer .updated").html(a.getLastUpdatedHTML()),a.resize()},PoliticoElectionStoryPageView.prototype.getResultsHTML=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=v.options.selected.year,x=v.options.selected.yearType,y=0,z=0,A=a.hasOwnProperty("D"),B=a.hasOwnProperty("E"),C=a.hasOwnProperty("R"),D=a.hasOwnProperty("S"),E=(A||B)&&(C||D),F=0,G=0,H="",I="",J="",K="",L=["D","E","R","S"],M=0;for(M;M<L.length;M++)if(h=L[M],a.hasOwnProperty(h)){for(b=a[h].data,c=a[h].config,d=b.raceNum,e=b.stateAbb,f=b.officeID,g=b.raceTypeID,k=b.precinctsPercent,i=b.fips,j=i>999,b.ev,y=b.numEVsWon,electionApp.model.getPollsClosingText(c),m=electionApp.model.getSortedRaceVotesByVoteCount(b,w,x,!1,!1,!0),I=E?" "+(0==G?"pos-alpha":"pos-beta"):" pos-omega",J="","D"==g||"E"==g?(J="democrat",K="Democratic"):"R"!=g&&"S"!=g||(J="republican",K="Republican"),H+='<div class="results-data'+I+" contains-"+J+'" data-racenum="'+d.split(e)[1]+'" data-stateabb="'+e+'"><div class="results-meta"><div class="title"><h5>'+K+'</h5><p class="reporting">'+k+'% Reporting</p></div><div class="actions"><a href="'+getTwitterLink(getTwitterJSON(w,x,b,c,m))+'" class="twitter" target="_blank"><b aria-hidden="true" class="icon icon-twitter"></b> <span class="icon-text">Tweet</span></a></div></div>',"P"==x&&(H+='<div class="results-headings">',y>0&&(H+='<p class="pos-2">Delegates</p>'),H+="</div>"),H+='<table class="results-table"><tbody>',l=0,F=0,l;l<m.length&&!(F>5);l++)n=m[l],s=electionApp.model.formatNumberDecimal(n.votepercent),t=electionApp.model.formatNumberCommas(n.votecount),z=n.ev>0?n.ev:"",u=n.winner,o=n.candID,p=electionApp.model.getCandidateURL(o,w,x),r=electionApp.model.getCandidateFirstIntial(o,w,x),q=(""!==r?r+". ":"")+electionApp.model.getCandidateLastName(o,w,x),H+='<tr class="type-'+J+(l>5?" is-hidden":"")+'"><th scope="row" class="results-name">',""!=p&&(H+='<a href="'+p+'">'),H+='<span class="name-combo">',u&&(H+='<span class="token token-winner"><b aria-hidden="true" class="icon icon-check"></b><span class="icon-text">Winner</span></span> '),H+=q+"</span>",""!=p&&(H+="</a>"),H+='</th><td class="results-percentage"><span class="percentage-combo"><span class="number">'+s+'%</span><span class="graph"><span class="bar"><span class="index" style="width:'+s+'%;"></span></span></span></span></td><td class="results-popular">'+t+"</td>","P"==f&&"P"==x&&y>0&&!j&&(H+='<td class="delegates-cell">'+(0!==z?z:"")+"</td>"),H+="</tr>",F++;H+="</tbody></table>",H+="</div>",G++}return H},PoliticoElectionStoryPageView.prototype.getHomepageHeader=function(a){var b,c=a.hasOwnProperty("D"),d=a.hasOwnProperty("E"),e=a.hasOwnProperty("R"),f=a.hasOwnProperty("S"),g=(c||d)&&(e||f),h=["D","E","R","S"],i=0;for(i;i<h.length;i++)if(b=h[i],a.hasOwnProperty(b)){a[b].data.stateAbb;break}var j="",k="";return g?k=c||e?" Primaries":" Caucuses":(j=c||d?" Democratic":" Republican",k=c||e?" Primary":" Caucus"),j+" Presidential"+k},PoliticoElectionStoryPageView.prototype.getLastUpdatedHTML=function(){return"Updated: "+electionApp.model.getLastUpdatedText(!0,!0)+" | Source: AP"},PoliticoElectionStoryPageView.prototype.getRaceDate=function(a){var b=a.substr(0,4),c=a.substr(4,2),d=a.substr(6,2),e=parseInt(d,10);return electionApp.model.getMonthNameByNum(c-1)+" "+e+", "+b},PoliticoElectionHomepageGeneralView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionHomepageGeneralView.prototype.initEvents=function(){var a=this;a.options.map&&document.addEventListener("zoomComplete",function(){a.vectorsChanged()})},PoliticoElectionHomepageGeneralView.prototype.addEvents=function(){},PoliticoElectionHomepageGeneralView.prototype.removeEvents=function(){},PoliticoElectionHomepageGeneralView.prototype.vectorsChanged=function(){if("H"===this.options.selected.race){var a,b=0;for(b;b<electionApp.stateAbbs.length;b++)a=electionApp.stateAbbs[b],setDistrictColors(a)}setStateColors()},PoliticoElectionHomepageGeneralView.prototype.changeOffice=function(a,b){var c=this;c.map.changeOffice(a,b),c.options.selected.race=a,"P"==a||"H"==a?c.$elem.find(".map-meta .key-null").hide():c.$elem.find(".map-meta .key-null").show()},PoliticoElectionHomepageGeneralView.prototype.resize=function(){if(this.options.isUniversalApp){var a=document.getElementsByTagName("html")[0].scrollHeight;window.parent.postMessage(["setHeight",a,"major"],"*")}},PoliticoElectionHomepageGeneralView.prototype.init=function(){var a=this,b=a.options.selected;"P"==b.race||"H"==b.race?a.$elem.find(".map-meta .key-null").hide():a.$elem.find(".map-meta .key-null").show(),a.options.map&&(a.map=new PoliticoElectionMapView(a.options,$(".map-container .map-object")),a.map.init()),a.initEvents(),a.addEvents()},PoliticoElectionHomepageGeneralView.prototype.update=function(){if("H"===this.options.selected.race){var a,b=0;for(b;b<electionApp.stateAbbs.length;b++)a=electionApp.stateAbbs[b],setDistrictColors(a)}setStateColors()},PoliticoElectionHomepageDataBlockView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionHomepageDataBlockView.prototype.initComplete=!1,PoliticoElectionHomepageDataBlockView.prototype.viewingMore=!1,PoliticoElectionHomepageDataBlockView.prototype.initEvents=function(){var a=this;a.$elem.siblings(".donuts__more-option").on("click",function(b){b.preventDefault(),a.viewMoreDonuts()}),a.initComplete=!0},PoliticoElectionHomepageDataBlockView.prototype.addEvents=function(){var a=this;a.$elem.find(".donut__chart-info .js-donut-countdown").length&&a.startCountdownTimer()},PoliticoElectionHomepageDataBlockView.prototype.removeEvents=function(){var a=this;a.$elem.find(".donut__chart-info .js-donut-countdown").length&&a.stopCountdownTimer()},PoliticoElectionHomepageDataBlockView.prototype.startCountdownTimer=function(){var a=this;a.stopCountdownTimer(),a.timer=setTimeout(function(){a.countdownTimerTick()},1e3)},PoliticoElectionHomepageDataBlockView.prototype.stopCountdownTimer=function(){var a=this;void 0!==a.timer&&clearTimeout(a.timer)},PoliticoElectionHomepageDataBlockView.prototype.countdownTimerTick=function(){var a=this;a.$elem.find(".donut__chart-info .js-donut-countdown").each(function(){var b=$(this).attr("data-start"),c=$(this).attr("data-end");if(""!==b&&""!==c){var d=a.getNextSecond(b,c);"0:00:01"===d?($(this).attr("data-start",""),$(this).attr("data-end",""),$(this).html("0:00:00")):$(this).html(d)}}),a.startCountdownTimer()},PoliticoElectionHomepageDataBlockView.prototype.getNextSecond=function(a,b){a=new Date(a),b=new Date(b);var c=new Date;a.setUTCSeconds(c.getUTCSeconds()),a.setUTCMinutes(c.getUTCMinutes());var d=electionApp.model.getDateDifference(a,b);return 24*d.days+d.hours+":"+(d.minutes<10?"0"+d.minutes:d.minutes)+":"+(d.seconds<10?"0"+d.seconds:d.seconds)},PoliticoElectionHomepageDataBlockView.prototype.viewMoreDonuts=function(){var a=this;a.viewingMore?(a.viewingMore=!1,a.$elem.siblings(".donuts__more-option").find("a").html('View More <span class="sr-only">race(s)</span>'),$(".donut").slice(12).each(function(){$(this).addClass("is-hidden")})):(a.viewingMore=!0,a.$elem.siblings(".donuts__more-option").find("a").html('View Less <span class="sr-only">race(s)</span>'),$(".donut").slice(12).each(function(){$(this).removeClass("is-hidden")}))},PoliticoElectionHomepageDataBlockView.prototype.changeOffice=function(a,b){var c=this;c.options.selected.race=a,c.init()},PoliticoElectionHomepageDataBlockView.prototype.resize=function(){},PoliticoElectionHomepageDataBlockView.prototype.init=function(){var a=this;a.donutManager={raceNums:[],donuts:{}};var b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i=d.race,j="All",k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null;a.$menu=a.$elem.closest(".super").find(".js-menu-selected-office"),a.$menu.find("li.subnav[data-office="+d.race+"]").addClass("current"),a.$menu.find("li.subnav[data-office="+d.race+"] a").addClass("color-inverted"),b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K={dem:0,ind:0,gop:0,none:100},L="",M=0,N=0,O={},P="",Q="",R="",S="",T="",U=!0,V=electionApp.model.getDateEasternTime(electionApp.model.getServerDate(!0)),W="";for(M;M<c.length;M++){for(n=c[M],o=n.data,p=n.config,p.date,j=o.stateAbb,q=o.fips,j+q,q<10&&q>0?"0"+q:q,i=o.officeID,r=p.raceType,s=p.date,k=o.special,l=o.runoff,m=o.recall,p.bitly,I=electionApp.model.getPollsClosingDate(p),T=electionApp.model.getLastUpdatedText(!1,!0,I),U=I.getTime()<=V.getTime(),t="H"===i?electionApp.statesInfo[j].apabb+" "+getDistrictTitle(j,q,"html"):electionApp.statesInfo[j].name,u=o.precinctsPercent,v=electionApp.model.getSortedRaceVotesByVoteCount(o,e,f),W="",K={dem:0,ind:0,gop:0,none:100},R='<div class="donut__candidate-section">',L="",N=0;N<v.length;N++)w=v[N],x=w.votecount,y=w.votepercent,z=w.winner,A=w.runoff,B=w.candID,C=electionApp.model.getCandidateURL(B,e,f),D=electionApp.model.getCandidateFirstIntial(B,e,f),E=(""!==D?D+". ":"")+electionApp.model.getCandidateLastName(B,e,f),F=w.party,0===N&&(L=E),"Dem"===F||"GOP"===F?K[F.toLowerCase()]+=y:K.ind+=y,0!==N&&1!==N||(R+='<div class="donut__candidate">',R+=""!==C?'<a class="donut__candidate-name" href="'+C+'">':'<span class="donut__candidate-name">',R+='<span class="name-combo"><span class="token type-'+getPartyClass(F)+'"><abbr title="'+getPartyName(F,!1)+'">'+getPartySingleCharacter(F)+"</abbr></span> ",(z||A)&&(R+='<span class="token type-winner"><b aria-hidden="true" class="icon icon-check"></b><span class="icon-text">Winner</span></span> '),R+=E+(A?"*":"")+"</span>",R+=""!==C?"</a>":"</span>",R+='<p class="donut__candidate-results">'+electionApp.model.formatNumberDecimal(y)+"%</p></div>",0==N?(H=y,G=x):1==N&&(H===y?H=!0:(H=Math.round(10*(H-y))/10,-1===H.toString().indexOf(".")&&(H=H.toString()+".0")),G-=x));R+="</div>",u>0&&u<100?K.none=100/(u/100)-100:(0===u&&(K.dem=0,K.gop=0,K.ind=0),K.none=K.dem+K.gop+K.ind===0?100:0),S="",
""!==o.winningParty?S+='<div class="donut__chart-info"><p class="donut__result"><span class="token type-winner"><b aria-hidden="true" class="icon icon-check"></b></span></p><p class="donut__description">'+L+'</p><p class="donut__metadata">Win</p></div>':o.hasRunoff?S+='<div class="donut__chart-info is-runoff"><p class="donut__description">Runoff</p></div>':o.hasResults||U?!o.hasResults&&U?S+='<div class="donut__chart-info is-results-soon"><p class="donut__metadata">Results coming soon</p></div>':S+="boolean"==typeof H&&!0===H?'<div class="donut__chart-info is-within-votes"><p class="donut__metadata">Within</p><p class="donut__result">'+electionApp.model.formatNumberCommas(G)+'</p><p class="donut__metadata">votes</p></div>':'<div class="donut__chart-info"><p class="donut__result">+'+H+'%</p><p class="donut__description">'+L+'</p><p class="donut__metadata">LEAD</p></div>':(J=electionApp.model.getDateDifference(V,I),S+='<div class="donut__chart-info"><p class="donut__result js-donut-countdown" data-start="'+electionApp.model.getServerDate(!0).toUTCString()+'" data-end="'+I.toUTCString()+'">'+(24*J.days+J.hours)+":"+(J.minutes<10?"0"+J.minutes:J.minutes)+":"+(J.seconds<10?"0"+J.seconds:J.seconds)+'</p><p class="donut__description">Polls close</p><p class="donut__metadata">'+T+"</p></div>"),W=getPartyName(o.winningParty,!0),"Democrat"!==W&&"Republican"!==W&&""!==o.winningParty&&(W="Independent"),P+='<section class="donut'+(M>11?" is-hidden":"")+(""!==o.winningParty?" winner is-"+W.toLowerCase():"")+'" data-racenum="'+p.raceNum+'" data-stateabb="'+j+'"><a class="donut__state" href="'+getDetailedResultsURL(e,g,f,j,i,r,s,k,l,m)+'">'+t+'</a><p class="donut__reporting">'+u+'% reporting</p><div class="donut__chart js-donut"><svg width="110px" height="110px"></svg>'+S+"</div>"+R+"</section>",W="Independent"===W?"Ind":getPartyAbb(o.winningParty),O={inner:{type:"values",values:[{class:""!==o.winningParty?"is-"+W.toLowerCase():"is-none",value:100}]},outer:{type:"values",values:[{class:"is-dem",value:K.dem},{class:"is-ind",value:K.ind},{class:"is-gop",value:K.gop},{class:"is-none",value:K.none}]}},a.donutManager.raceNums.push(p.raceNum),a.donutManager.donuts[p.raceNum]=new PoliticoDonutChart(a.$elem,"section.donut[data-racenum="+p.raceNum+"][data-stateabb="+j+"] .js-donut svg",O)}for(a.$elem.html(P),a.viewingMore=!1,a.initComplete?a.$elem.siblings(".donuts__more-option").find("a").html('View More <span class="sr-only">race(s)</span>'):(Q='<div class="donuts__more-option'+(a.donutManager.raceNums.length>12?"":" is-hidden")+'"><a href="#">View More <span class="sr-only">race(s)</span></a></div>',a.$elem.after(Q)),a.donutManager.raceNums.length>12?a.$elem.siblings(".donuts__more-option").removeClass("is-hidden"):a.$elem.siblings(".donuts__more-option").addClass("is-hidden"),M=0;M<a.donutManager.raceNums.length;M++)a.donutManager.donuts[a.donutManager.raceNums[M]].init();a.initComplete||a.initEvents(),a.addEvents()},PoliticoElectionHomepageDataBlockView.prototype.update=function(){var a=this,b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i=d.race,j="All",k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null;b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H={dem:0,ind:0,gop:0,none:100},I="",J=0,K=0,L={},M="",N="",O="",P="",Q=!0,R=electionApp.model.getDateEasternTime(electionApp.model.getServerDate(!0)),S="";for(J;J<c.length;J++){for(n=c[J],o=n.data,p=n.config,p.date,j=o.stateAbb,q=o.fips,j+q,q<10&&q>0?"0"+q:q,i=o.officeID,p.raceType,k=o.special,l=o.runoff,m=o.recall,p.bitly,F=electionApp.model.getPollsClosingDate(p),P=electionApp.model.getLastUpdatedText(!1,!0,F),Q=F.getTime()<=R.getTime(),"H"===i?electionApp.statesInfo[j].apabb+" "+getDistrictTitle(j,q,"html"):electionApp.statesInfo[j].name,O="",r=o.precinctsPercent,s=electionApp.model.getSortedRaceVotesByVoteCount(o,e,f),H={dem:0,ind:0,gop:0,none:100},M='<div class="donut__candidate-section">',I="",K=0;K<s.length;K++)t=s[K],u=t.votecount,v=t.votepercent,w=t.winner,x=t.runoff,y=t.candID,z=electionApp.model.getCandidateURL(y,e,f),A=electionApp.model.getCandidateFirstIntial(y,e,f),B=(""!==A?A+". ":"")+electionApp.model.getCandidateLastName(y,e,f),C=t.party,0===K&&(I=B),"Dem"===C||"GOP"===C?H[C.toLowerCase()]+=v:H.ind+=v,0!==K&&1!==K||(M+='<div class="donut__candidate">',M+=""!==z?'<a class="donut__candidate-name" href="'+z+'">':'<span class="donut__candidate-name">',M+='<span class="name-combo"><span class="token type-'+getPartyClass(C)+'"><abbr title="'+getPartyName(C,!1)+'">'+getPartySingleCharacter(C)+"</abbr></span> ",(w||x)&&(M+='<span class="token type-winner"><b aria-hidden="true" class="icon icon-check"></b><span class="icon-text">Winner</span></span> '),M+=B+(x?"*":"")+"</span>",M+=""!==z?"</a>":"</span>",M+='<p class="donut__candidate-results">'+electionApp.model.formatNumberDecimal(v)+"%</p></div>",0==K?(E=v,D=u):1==K&&(E===v?E=!0:(E=Math.round(10*(E-v))/10,-1===E.toString().indexOf(".")&&(E=E.toString()+".0")),D-=u));M+="</div>",r>0&&r<100?H.none=100/(r/100)-100:(0===r&&(H.dem=0,H.gop=0,H.ind=0),H.none=H.dem+H.gop+H.ind===0?100:0),S=a.$elem.find("section[data-racenum="+p.raceNum+"]"),S.attr("class","donut"),N="",""!==o.winningParty?(O=getPartyName(o.winningParty,!0),"Democrat"!==O&&"Republican"!==O&&""!==o.winningParty&&(O="Independent"),S.addClass("winner is-"+O.toLowerCase()),N+='<div class="donut__chart-info"><p class="donut__result"><span class="token type-winner"><b aria-hidden="true" class="icon icon-check"></b></span></p><p class="donut__description">'+I+'</p><p class="donut__metadata">Win</p></div>'):o.hasRunoff?N+='<div class="donut__chart-info is-runoff"><p class="donut__description">Runoff</p></div>':o.hasResults||Q?!o.hasResults&&Q?N+='<div class="donut__chart-info is-results-soon"><p class="donut__metadata">Results coming soon</p></div>':N+="boolean"==typeof E&&!0===E?'<div class="donut__chart-info is-within-votes"><p class="donut__metadata">Within</p><p class="donut__result">'+electionApp.model.formatNumberCommas(D)+'</p><p class="donut__metadata">votes</p></div>':'<div class="donut__chart-info"><p class="donut__result">+'+E+'%</p><p class="donut__description">'+I+'</p><p class="donut__metadata">LEAD</p></div>':(G=electionApp.model.getDateDifference(F,R),N+='<div class="donut__chart-info"><p class="donut__result js-donut-countdown" data-start="'+electionApp.model.getServerDate(!0).toUTCString()+'" data-end="'+F.toUTCString()+'">'+(24*G.days+G.hours)+":"+(G.minutes<10?"0"+G.minutes:G.minutes)+":"+(G.seconds<10?"0"+G.seconds:G.seconds)+'</p><p class="donut__description">Polls close</p><p class="donut__metadata">'+P+"</p></div>"),J>11&&!a.viewingMore&&S.addClass("is-hidden"),O="Independent"===O?"Ind":getPartyAbb(o.winningParty),L={inner:{type:"values",values:[{class:""!==o.winningParty?"is-"+O.toLowerCase():"is-none",value:100}]},outer:{type:"values",values:[{class:"is-dem",value:H.dem},{class:"is-ind",value:H.ind},{class:"is-gop",value:H.gop},{class:"is-none",value:H.none}]}},a.$elem.find("section[data-racenum="+p.raceNum+"][data-stateabb="+j+"] .donut__reporting").html(r+"% reporting"),a.$elem.find("section[data-racenum="+p.raceNum+"][data-stateabb="+j+"] .donut__candidate-section").remove(),a.$elem.find("section[data-racenum="+p.raceNum+"][data-stateabb="+j+"] .js-donut").after(M),a.$elem.find("section[data-racenum="+p.raceNum+"][data-stateabb="+j+"] .donut__chart-info").replaceWith(N),a.donutManager.donuts.hasOwnProperty(p.raceNum)&&a.donutManager.donuts[p.raceNum].update(L)}},PoliticoDonutChart.prototype.init=function(){var a=this;a.elem=a.$elem.find(a.selector)[0];var b=d3.select(a.elem).attr("version","1.1").attr("viewBox","0 0 "+a.dimensions.width+" "+a.dimensions.height).attr("preserveAspectRatio","xMinYMin meet").attr("class","donut__chart-svg").append("g").attr("transform","translate("+a.dimensions.width/2+","+a.dimensions.height/2+")"),c=d3.select(a.elem).append("g").attr("transform","translate("+a.dimensions.width/2+","+a.dimensions.height/2+")");a.innerpath=b.selectAll("path").data(a.pie(a.data.inner.values)).enter().append("path"),a.innerpath.attr("class",function(a,b){return a.data.class}).transition().duration(500).attr("d",function(b,c){return a.innerArc(b,c)}).each(function(a,b){this._current=a}),a.outerpath=c.selectAll("path").data(a.pie(a.data.outer.values)).enter().append("path"),a.outerpath.attr("class",function(a,b){return a.data.class}).transition().duration(500).attr("d",a.arc).each(function(a,b){this._current=a})},PoliticoDonutChart.prototype.update=function(a){var b=this;b.outerpath.data(b.pie(a.outer.values)).transition().duration(750).attrTween("d",b.arcTween),b.innerpath.data(b.pie(a.inner.values)).attr("class",function(a,b){return a.data.class})},PoliticoElectionHomepagePrimariesView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionHomepagePrimariesView.prototype.initEvents=function(){var a=this;a.$elem.find(".races-menu.js-menu-selected-state select").on("change",a,a.stateClicked),a.$elem.find(".races-menu.js-menu-selected-office select").on("change",a,a.officeClicked)},PoliticoElectionHomepagePrimariesView.prototype.addEvents=function(){var a=this;a.$elem.find(".races-menu.js-menu-selected-district ul li").on("click",a,a.districtClicked),a.$elem.find(".races-menu.js-menu-selected-district select").on("change",a,a.districtClicked)},PoliticoElectionHomepagePrimariesView.prototype.removeEvents=function(){var a=this;a.$elem.find(".races-menu.js-menu-selected-district ul li").off("click"),a.$elem.find(".races-menu.js-menu-selected-district select").off("change")},PoliticoElectionHomepagePrimariesView.prototype.stateClicked=function(a){a.preventDefault();var b=a.data,c=$(this),d=void 0!==a.target.value,e=d?a.target.value:c.attr("data-stateAbb"),f=c.hasClass("current")&&!d,g=b.$elem.find(".races-menu ul li");if(!f&&electionApp.statesInfo.hasOwnProperty(e)){g.removeClass("current");var h=b.hasSelectedOffice(e);b.options.selected.state=e,setSelected(e),h.selected.race!=b.options.selected.race&&(b.options.selected.race=h.selected.race,setSelected(b.options.selected.state,b.options.selected.race)),"H"==b.options.selected.race&&(b.options.selected.district=h.selected.district,b.setAvailableDistricts(h.offices.H)),b.setAvailableOffices(h.offices),d?c=g.siblings("[data-stateAbb="+e+"]"):(b.$elem.find(".races-menu.js-menu-selected-state  select option").removeAttr("selected"),b.$elem.find(".races-menu.js-menu-selected-state  select option[value="+e+"]").attr("selected","")),c.addClass("current"),addTasks([{task:"changeState",params:[e]}]),electionApp.model.loadData()}},PoliticoElectionHomepagePrimariesView.prototype.officeClicked=function(a){a.preventDefault();var b=a.data,c=b.options.selected,d=$(this),e=void 0!==a.target.value,f=e?a.target.value:d.attr("data-officeID"),g=d.hasClass("current")&&!e,h=b.$elem.find(".races-menu ul li"),i=c.race;if(!g){if(h.removeClass("current"),e?d=h.siblings("[data-officeID="+f+"]"):(b.$elem.find(".races-menu.js-menu-selected-office select option").removeAttr("selected"),b.$elem.find(".races-menu.js-menu-selected-office select option[value="+officeID+"]").attr("selected","")),d.addClass("current"),b.options.selected.race=f,setSelected(b.options.selected.state,f),"H"==f){var j=b.hasSelectedOffice(c.state);b.$elem.find(".js-menu-districts").show(),b.options.selected.district=j.selected.district,b.setAvailableDistricts(j.offices.H)}else b.$elem.find(".js-menu-districts").hide();addTasks([{task:"changeOffice",params:[f,i]}]),electionApp.model.loadData()}},PoliticoElectionHomepagePrimariesView.prototype.districtClicked=function(a){a.preventDefault();var b=a.data,c=$(this),d=void 0!==a.target.value,e=d?a.target.value:c.attr("data-fips"),f=c.hasClass("current")&&!d,g=b.$elem.find(".races-menu.js-menu-selected-district ul li");f||e==b.options.selected.district||(g.removeClass("current"),d?c=g.siblings("[data-fips="+e+"]"):(b.$elem.find(".races-menu.js-menu-selected-district  select option").removeAttr("selected"),b.$elem.find(".races-menu.js-menu-selected-district  select option[value="+e+"]").attr("selected","")),c.addClass("current"),b.options.selected.district=e,addTasks([{task:"changeDistrict",params:[e]}]),electionApp.model.loadData())},PoliticoElectionHomepagePrimariesView.prototype.setAvailableOffices=function(a){var b=this,c=b.options.selected,d="",e=b.$elem.find(".js-menu-selected-office select"),f=["P","S","H","G","I","L","M"],g=0;for(g;g<f.length;g++)officeID=f[g],a.hasOwnProperty(officeID)&&(d+="<option"+(officeID===c.race?" selected":"")+' value="'+officeID+'">'+getOfficeName(officeID)+"</option>");if("H"==c.race&&a.hasOwnProperty("H")){var h=b.hasSelectedOffice(c.state);b.$elem.find(".js-menu-districts").show(),b.setAvailableDistricts(h.offices.H)}else b.$elem.find(".js-menu-districts").hide();e.html(d)},PoliticoElectionHomepagePrimariesView.prototype.setAvailableDistricts=function(a){var b=this,c=b.options.selected,d="",e="",f=b.$elem.find(".js-menu-selected-district ul"),g=b.$elem.find(".js-menu-selected-district select");for(districtIndex=0,districts=a.districts,districts.sort(function(a,b){return a.fips-b.fips}),districtIndex;districtIndex<districts.length;districtIndex++)district=districts[districtIndex],d+="<li"+(c.district==district.fips?' class="current"':"")+' data-fips="'+district.fips+'"><a href="#">'+c.state+"-"+district.fipsStr+"</a></li>",e+="<option "+(c.district==district.fips?" selected":"")+' value="'+district.fips+'">'+c.state+"-"+district.fipsStr+"</option>";b.removeEvents(),f.html(d),g.html(e),b.addEvents()},PoliticoElectionHomepagePrimariesView.prototype.hasSelectedOffice=function(a){var b,c=this,d=[],e=[],f=c.options.selected,g=f.year,h=f.yearType,i=f.yearSeason,j=f.date,k="All",l="All",m="boolean"==typeof f.special?f.special:null,n="boolean"==typeof f.runoff?f.runoff:null,o="boolean"==typeof f.recall?f.recall:null;d=electionApp.model.getRaceNums(g,i,h,j,k,l,m,n,o,!0,null),e=electionApp.model.getRacesByRaceNums(g,d,null);var p,q,r,s,t,u,v,w,x,y,z=!1,A={},B=[],C=0,D=["P","S","H","G","I","L","M"],E=99;for(C;C<e.length;C++)p=e[C],q=p.data,r=p.config,s=r.date,l=q.stateAbb,t=q.fips,u=l+t,v=t<10&&t>0?"0"+t:t,k=q.officeID,w=r.raceType,m=q.special,n=q.runoff,o=q.recall,r.bitly,x=electionApp.statesInfo[l].name,A.hasOwnProperty(l)||(A[l]={},B.push({stateName:x,stateAbb:l})),A[l].hasOwnProperty(k)||(A[l][k]={}),"H"==k?(A[l][k].hasOwnProperty(u)||(A[l][k][u]={},A[l][k].hasOwnProperty("districts")||(A[l][k].districts=[]),A[l][k].districts.push({fips:t,stateAbbFIPS:u,fipsStr:v})),A[l][k][u].hasOwnProperty(w)||(A[l][k][u][w]={}),A[l][k][u][w]=p):A[l][k].hasOwnProperty(w)||(A[l][k][w]={},A[l][k][w]=p),a==l&&f.date==s&&f.race==k&&("H"!=f.race||"H"==f.race&&(f.district==t||!z&&t<E))&&(f.district==t&&"H"==f.race||"H"!=f.race?(z=!0,b=k,"H"==f.race&&(E=t)):"H"==f.race&&!z&&t<E&&(E=t));if(!z&&A.hasOwnProperty(a))for(y=0;y<D.length;y++)if(k=D[y],A[a].hasOwnProperty(k)){b=k;break}return{selected:{race:b,district:E},offices:A[a]}},PoliticoElectionHomepagePrimariesView.prototype.resize=function(){if(this.options.isUniversalApp){var a=document.getElementsByTagName("html")[0].scrollHeight;window.parent.postMessage(["setHeight",a,"major"],"*")}},PoliticoElectionHomepagePrimariesView.prototype.init=function(){var a=this,b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i="All",j="All",k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null,n="";b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var o,p,q,r,s,t,u,v,w,x,y,z,A,B={},C=!1,D={},E=[],F=0,G=["P","S","H","G","I","L","M"],H=0;for(F;F<c.length;F++)o=c[F],p=o.data,q=o.config,r=q.date,j=p.stateAbb,s=p.fips,t=j+s,u=s<10&&s>0?"0"+s:s,i=p.officeID,v=q.raceType,k=p.special,l=p.runoff,m=p.recall,q.bitly,x=electionApp.statesInfo[j].name,D.hasOwnProperty(j)||(D[j]={},E.push({stateName:x,stateAbb:j})),D[j].hasOwnProperty(i)||(D[j][i]={}),"H"==i?(D[j][i].hasOwnProperty(t)||(D[j][i][t]={},D[j][i].hasOwnProperty("districts")||(D[j][i].districts=[]),D[j][i].districts.push({fips:s,stateAbbFIPS:t,fipsStr:u})),D[j][i][t].hasOwnProperty(v)||(D[j][i][t][v]={}),D[j][i][t][v]=o):D[j][i].hasOwnProperty(v)||(D[j][i][v]={},D[j][i][v]=o),d.state==j&&d.date==r&&d.race==i&&("H"==d.race&&d.district==s||"H"!=d.race)&&(B[p.raceTypeID]={data:p,config:q},n=getDetailedResultsURL(e,g,f,j,i,v,r,k,l,m),w=electionApp.model.getDelegateExplainer(j),C=!0);E.sort(function(a,b){return a.stateName>b.stateName?1:a.stateName<b.stateName?-1:0});var I=B.hasOwnProperty("D"),J=B.hasOwnProperty("E"),K=B.hasOwnProperty("R"),L=B.hasOwnProperty("S"),M=(I||J)&&(K||L),N=M?"layout-split":"",O='<div class="races-bar">'+(a.options.eyebrow.link?'<a href="'+a.options.eyebrow.link+'">':"")+"<h5>"+(a.options.eyebrow.title?a.options.eyebrow.title:"")+"</h5>"+(a.options.eyebrow.link?"</a>":"");if(O+='<div class="races-filters">',C&&E.length>1){for(O+='<div class="races-menu races-menu-select js-menu-selected-state"><select>',stateAbbIndex=0,stateAbbIndex;stateAbbIndex<E.length;stateAbbIndex++)O+="<option"+(E[stateAbbIndex].stateAbb===d.state?" selected":"")+' value="'+E[stateAbbIndex].stateAbb+'">'+E[stateAbbIndex].stateName+"</option>";O+="</select></div>"}for(O+='<div class="races-menu races-menu-select js-menu-selected-office"><select>',y=0;y<G.length;y++)i=G[y],D[d.state].hasOwnProperty(i)&&(O+="<option"+(i===d.race?" selected":"")+' value="'+i+'">'+getOfficeName(i)+"</option>");if(O+="</select></div></div>",O+="</div>",C){if(O+='<article class="results-group" data-fips="0"><header class="results-header"><div class="title"><h1>'+a.getHomepageHeader(B,d.race)+'</h1></div><div class="actions"><a href="'+n+'">Detailed Results</a></div></header>',O+='<div class="sub-races-bar js-menu-districts"'+("H"!=d.race?' style="display: none;"':"")+'><div class="races-filters"><div class="races-menu sub-races-menu js-menu-selected-district"><label>Key House Races:</label><ul>',"H"==d.race&&D[d.state].hasOwnProperty("H"))for(H=0,z=D[d.state].H.districts,H;H<z.length;H++)A=z[H],O+="<li"+(d.district==A.fips?' class="current"':"")+' data-fips="'+A.fips+'"><a href="#">'+d.state+"-"+A.fipsStr+"</a></li>";if(O+="</ul><select>","H"==d.race&&D[d.state].hasOwnProperty("H"))for(H=0;H<z.length;H++)A=z[H],O+="<option "+(d.district==A.fips?" selected":"")+' value="'+A.fips+'">'+d.state+"-"+A.fipsStr+"</option>";O+="</select></div></div></div>",a.options.map&&(O+='<div class="media">',O+='<a href="'+n+'"><div class="media__img map-container"><div class="map-object js-live-results"></div><dl class="map-legend"><dt class="no-results">No Results</dt><dt class="partial">Partial Results</dt><dt class="complete">Full Results</dt></dl><div class="swatch complete"></div></div>',O+="</a>"),O+='<div class="results-dataset'+(a.options.map?" media__bd":"")+'"><div class="results-row '+N+'">'+a.getResultsHTML(B)+"</div>",O+='<footer class="results-footer"><div class="clear"><span class="updated">'+a.getLastUpdatedHTML()+'</span><div class="text-key"><dl></dl></div></div>',"P"==a.options.selected.race&&(O+='<p class="fs-12">'+w+"</p>"),O+="</footer></div>",a.options.map&&(O+="</div>"),O+="</article>"}O+='<div class="sponsor">'+a.options.sponsored.title+(""!=a.options.sponsored.link?' <a href="'+a.options.sponsored.link+'">':"")+(""!=a.options.sponsored.image?' <img src="'+a.options.sponsored.image+'">':"")+(""!=a.options.sponsored.link?"</a>":"")+"</div>",a.$elem.html(O),C&&(a.options.map&&(a.map=new PoliticoElectionMapView(a.options,$(".election-results .results-group .map-object")),a.map.init()),a.initEvents(),a.addEvents())},PoliticoElectionHomepagePrimariesView.prototype.changeState=function(a){var b=this;b.options.map&&b.map.changeState(a);var c=[],d=[],e=b.options.selected,f=e.year,g=e.yearType,h=e.yearSeason,i=e.date,j="All",a="All",k="boolean"==typeof e.special?e.special:null,l="boolean"==typeof e.runoff?e.runoff:null,m="boolean"==typeof e.recall?e.recall:null,n="";c=electionApp.model.getRaceNums(f,h,g,i,j,a,k,l,m,!0,null),d=electionApp.model.getRacesByRaceNums(f,c,null);var o,p,q,r,s,t,u,v,w={},x=!1,y={},z=[],A=0;for(A;A<d.length;A++)o=d[A],p=o.data,q=o.config,r=q.date,a=p.stateAbb,s=p.fips,s<10&&s>0?"0"+s:s,j=p.officeID,t=q.raceType,k=p.special,l=p.runoff,m=p.recall,q.bitly,v=electionApp.statesInfo[a].name,y.hasOwnProperty(a)||(y[a]={},z.push({stateName:v,stateAbb:a})),y[a].hasOwnProperty(j)||(y[a][j]={}),y[a][j].hasOwnProperty(t)||(y[a][j][t]={}),y[a][j][t]=o,e.state==a&&e.date==r&&e.race==j&&(w[p.raceTypeID]={data:p,config:q},n=getDetailedResultsURL(f,h,g,a,j,t,r,k,l,m),x=!0,u=electionApp.model.getDelegateExplainer(a));var B=w.hasOwnProperty("D"),C=w.hasOwnProperty("E"),D=w.hasOwnProperty("R"),E=w.hasOwnProperty("S"),F=(B||C)&&(D||E);x&&(b.$elem.find(".results-header .title h1").html(b.getHomepageHeader(w,e.race)),b.$elem.find(".results-header .actions a").attr("href",n),b.options.map&&b.$elem.find(".media > a").attr("href",n),b.$elem.find(".results-footer p.fs-12").html(u),$(".results-dataset .results-row").html(b.getResultsHTML(w)),F?$(".results-dataset .results-row").addClass("layout-split"):$(".results-dataset .results-row").removeClass("layout-split"))},PoliticoElectionHomepagePrimariesView.prototype.changeOffice=function(a,b){var c=this;c.options.map&&("H"==b&&"H"!=a||"H"!=b&&"H"==a)&&c.map.changeState(c.options.selected.state);var d=[],e=[],f=c.options.selected,g=f.year,h=f.yearType,i=f.yearSeason,j=f.date,a="All",k="All",l="boolean"==typeof f.special?f.special:null,m="boolean"==typeof f.runoff?f.runoff:null,n="boolean"==typeof f.recall?f.recall:null,o="";d=electionApp.model.getRaceNums(g,i,h,j,a,k,l,m,n,!0,null),e=electionApp.model.getRacesByRaceNums(g,d,null);var p,q,r,s,t,u,v,w,x,y,z={},A=!1,B={},C=[],D=0;for(D;D<e.length;D++)p=e[D],q=p.data,r=p.config,s=r.date,k=q.stateAbb,t=q.fips,u=k+t,v=t<10&&t>0?"0"+t:t,a=q.officeID,w=r.raceType,l=q.special,m=q.runoff,n=q.recall,r.bitly,y=electionApp.statesInfo[k].name,B.hasOwnProperty(k)||(B[k]={},C.push({stateName:y,stateAbb:k})),B[k].hasOwnProperty(a)||(B[k][a]={}),"H"==a?(B[k][a].hasOwnProperty(u)||(B[k][a][u]={},B[k][a].hasOwnProperty("districts")||(B[k][a].districts=[]),B[k][a].districts.push({fips:t,stateAbbFIPS:u,fipsStr:v})),B[k][a][u].hasOwnProperty(w)||(B[k][a][u][w]={}),B[k][a][u][w]=p):B[k][a].hasOwnProperty(w)||(B[k][a][w]={},B[k][a][w]=p),f.state==k&&f.date==s&&f.race==a&&("H"==f.race&&f.district==t||"H"!=f.race)&&(z[q.raceTypeID]={data:q,config:r},o=getDetailedResultsURL(g,i,h,k,a,w,s,l,m,n),A=!0,x=electionApp.model.getDelegateExplainer(k));var E=z.hasOwnProperty("D"),F=z.hasOwnProperty("E"),G=z.hasOwnProperty("R"),H=z.hasOwnProperty("S"),I=(E||F)&&(G||H);A&&(c.$elem.find(".results-header .title h1").html(c.getHomepageHeader(z,f.race)),c.$elem.find(".results-header .actions a").attr("href",o),c.options.map&&c.$elem.find(".media > a").attr("href",o),c.$elem.find(".results-footer p.fs-12").html(x),$(".results-dataset .results-row").html(c.getResultsHTML(z)),I?$(".results-dataset .results-row").addClass("layout-split"):$(".results-dataset .results-row").removeClass("layout-split"))},PoliticoElectionHomepagePrimariesView.prototype.changeDistrict=function(a){var b=this,c=[],d=[],e=b.options.selected,f=e.year,g=e.yearType,h=e.yearSeason,i=e.date,j="All",k="All",l="boolean"==typeof e.special?e.special:null,m="boolean"==typeof e.runoff?e.runoff:null,n="boolean"==typeof e.recall?e.recall:null,o="";c=electionApp.model.getRaceNums(f,h,g,i,j,k,l,m,n,!0,null),d=electionApp.model.getRacesByRaceNums(f,c,null);var p,q,r,s,t,u,v,w,x,y,z={},A=!1,B={},C=[],D=0;for(D;D<d.length;D++)p=d[D],q=p.data,r=p.config,s=r.date,k=q.stateAbb,t=q.fips,u=k+t,v=t<10&&t>0?"0"+t:t,j=q.officeID,w=r.raceType,l=q.special,m=q.runoff,n=q.recall,r.bitly,y=electionApp.statesInfo[k].name,B.hasOwnProperty(k)||(B[k]={},C.push({stateName:y,stateAbb:k})),B[k].hasOwnProperty(j)||(B[k][j]={}),"H"==j?(B[k][j].hasOwnProperty(u)||(B[k][j][u]={},B[k][j].hasOwnProperty("districts")||(B[k][j].districts=[]),B[k][j].districts.push({fips:t,stateAbbFIPS:u,fipsStr:v})),B[k][j][u].hasOwnProperty(w)||(B[k][j][u][w]={}),B[k][j][u][w]=p):B[k][j].hasOwnProperty(w)||(B[k][j][w]={},B[k][j][w]=p),e.state==k&&e.date==s&&e.race==j&&("H"==e.race&&e.district==t||"H"!=e.race)&&(z[q.raceTypeID]={data:q,config:r},o=getDetailedResultsURL(f,h,g,k,j,w,s,l,m,n),A=!0,x=electionApp.model.getDelegateExplainer(k));var E=z.hasOwnProperty("D"),F=z.hasOwnProperty("E"),G=z.hasOwnProperty("R"),H=z.hasOwnProperty("S"),I=(E||F)&&(G||H);A&&(b.$elem.find(".results-header .title h1").html(b.getHomepageHeader(z,e.race)),b.$elem.find(".results-header .actions a").attr("href",o),b.options.map&&b.$elem.find(".media > a").attr("href",o),b.$elem.find(".results-footer p.fs-12").html(x),$(".results-dataset .results-row").html(b.getResultsHTML(z)),I?$(".results-dataset .results-row").addClass("layout-split"):$(".results-dataset .results-row").removeClass("layout-split"))},PoliticoElectionHomepagePrimariesView.prototype.update=function(){var a=this,b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i="All",j="All",k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null;b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var n,o,p,q,r,s,t,u,v,w={},x=!1,y={},z=[],A=0;for(A;A<c.length;A++)n=c[A],o=n.data,p=n.config,q=p.date,j=o.stateAbb,r=o.fips,s=j+r,t=r<10&&r>0?"0"+r:r,i=o.officeID,u=p.raceType,k=o.special,l=o.runoff,m=o.recall,p.bitly,v=electionApp.statesInfo[j].name,y.hasOwnProperty(j)||(y[j]={},z.push({stateName:v,stateAbb:j})),y[j].hasOwnProperty(i)||(y[j][i]={}),"H"==i?(y[j][i].hasOwnProperty(s)||(y[j][i][s]={},y[j][i].hasOwnProperty("districts")||(y[j][i].districts=[]),y[j][i].districts.push({fips:r,stateAbbFIPS:s,fipsStr:t})),y[j][i][s].hasOwnProperty(u)||(y[j][i][s][u]={}),y[j][i][s][u]=n):y[j][i].hasOwnProperty(u)||(y[j][i][u]={},y[j][i][u]=n),d.state==j&&d.date==q&&d.race==i&&("H"==d.race&&d.district==r||"H"!=d.race)&&(w[o.raceTypeID]={data:o,config:p},getDetailedResultsURL(e,g,f,j,i,u,q,k,l,m),x=!0,electionApp.model.getDelegateExplainer(j));z.sort(function(a,b){return a.stateName>b.stateName?1:a.stateName<b.stateName?-1:0});a.options.eyebrow.link&&a.options.eyebrow.link,a.options.eyebrow.title&&a.options.eyebrow.title,a.options.eyebrow.link;x&&$(".results-dataset .results-row").html(a.getResultsHTML(w)),a.$elem.find("footer .updated").html(a.getLastUpdatedHTML()),a.resize()},PoliticoElectionHomepagePrimariesView.prototype.getResultsHTML=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=v.options.selected.year,x=v.options.selected.yearType,y=0,z=0,A=0,B=a.hasOwnProperty("D"),C=a.hasOwnProperty("E"),D=a.hasOwnProperty("R"),E=a.hasOwnProperty("S"),F=(B||C)&&(D||E),G=0,H=0,I="",J="",K="",L="",M=["D","E","R","S"],N=0;for(N;N<M.length;N++)if(h=M[N],a.hasOwnProperty(h)){for(b=a[h].data,c=a[h].config,d=b.raceNum,e=b.stateAbb,f=b.officeID,g=b.raceTypeID,k=b.precinctsPercent,i=b.fips,j=i>999,z=b.ev,y=b.numEVsWon,m=electionApp.model.getSortedRaceVotesByVoteCount(b,w,x,!1,!1,!0),J=F?" "+(0==H?"pos-alpha":"pos-beta"):" pos-omega",K="","D"==g||"E"==g?(K="democrat",L="Democratic"):"R"!=g&&"S"!=g||(K="republican",L="Republican"),I+='<div class="results-data'+J+" contains-"+K+'" data-racenum="'+d.split(e)[1]+'" data-stateabb="'+e+'"><div class="results-meta"><div class="title"><h5>'+L+'</h5><p class="reporting">'+k+'% Reporting</p></div><div class="actions"><a href="'+getTwitterLink(getTwitterJSON(w,x,b,c,m))+'" class="twitter" target="_blank"><b aria-hidden="true" class="icon icon-twitter"></b> <span class="icon-text">Tweet</span></a></div></div>',"P"==f&&"P"==x&&(I+='<div class="results-headings"><p class="pos-1">Delegates Allocated: '+y+"/"+z+"</p>",y>0&&(I+='<p class="pos-2">Delegates</p>'),I+="</div>"),I+='<table class="results-table"><tbody>',l=0,G=0,l;l<m.length&&!(G>5);l++)n=m[l],s=electionApp.model.formatNumberDecimal(n.votepercent),t=electionApp.model.formatNumberCommas(n.votecount),A=n.ev>0?n.ev:"",u=n.winner,o=n.candID,p=electionApp.model.getCandidateURL(o,w,x),r=electionApp.model.getCandidateFirstIntial(o,w,x),q=(""!==r?r+". ":"")+electionApp.model.getCandidateLastName(o,w,x),I+='<tr class="type-'+K+(l>5?" is-hidden":"")+'"><th scope="row" class="results-name">',""!=p&&(I+='<a href="'+p+'">'),I+='<span class="name-combo">',u&&(I+='<span class="token token-winner"><b aria-hidden="true" class="icon icon-check"></b><span class="icon-text">Winner</span></span> '),I+=q+"</span>",""!=p&&(I+="</a>"),I+='</th><td class="results-percentage"><span class="percentage-combo"><span class="number">'+s+'%</span><span class="graph"><span class="bar"><span class="index" style="width:'+s+'%;"></span></span></span></span></td><td class="results-popular">'+t+"</td>","P"==f&&"P"==x&&y>0&&!j&&(I+='<td class="delegates-cell">'+(0!==A?A:"")+"</td>"),I+="</tr>",G++;I+="</tbody></table>",I+="</div>",H++}return I},PoliticoElectionHomepagePrimariesView.prototype.getHomepageHeader=function(a,b){var c,d,e=a.hasOwnProperty("D"),f=a.hasOwnProperty("E"),g=a.hasOwnProperty("R"),h=a.hasOwnProperty("S"),i=(e||f)&&(g||h),j=["D","E","R","S"],k=0;for(k;k<j.length;k++)if(c=j[k],a.hasOwnProperty(c)){d=a[c].data.stateAbb;break}var l="",m=" "+getOfficeName(b),n="";return i?n=e||g?" Primaries":" Caucuses":(l=e||f?" Democratic":" Republican",n=e||g?" Primary":" Caucus"),electionApp.statesInfo[d].name+l+m+n},PoliticoElectionHomepagePrimariesView.prototype.getLastUpdatedHTML=function(){return"Updated: "+electionApp.model.getLastUpdatedText(!0,!0)+" | Source: AP"},PoliticoElectionSmallHomepageView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionSmallHomepageView.prototype.initEvents=function(){var a=this;a.$elem.find(".races-menu ul li").on("click",a,a.stateClicked),a.$elem.find(".races-menu select").on("change",a,a.stateClicked)},PoliticoElectionSmallHomepageView.prototype.stateClicked=function(a){a.preventDefault();var b=a.data,c=$(this),d=void 0!==a.target.value,e=d?a.target.value:c.attr("data-stateAbb"),f=c.hasClass("current")&&!d,g=b.$elem.find(".races-menu ul li");!f&&electionApp.statesInfo.hasOwnProperty(e)&&(g.removeClass("current"),d?c=g.siblings("[data-stateAbb="+e+"]"):(b.$elem.find(".races-menu select option").removeAttr("selected"),b.$elem.find(".races-menu select option[value="+e+"]").attr("selected","")),c.addClass("current"),b.options.selected.state=e,setSelected(e),addTasks([{task:"changeState",params:[e]}]),electionApp.model.loadData())},PoliticoElectionSmallHomepageView.prototype.addEvents=function(){},PoliticoElectionSmallHomepageView.prototype.removeEvents=function(){},PoliticoElectionSmallHomepageView.prototype.resize=function(){},PoliticoElectionSmallHomepageView.prototype.init=function(){var a=this,b=(a.options.candidatePicks,[]),c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i="All",j="All",k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null,n="";b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var o,p,q,r,s,t,u,v={},w=!1,x={},y=[],z=0;for(z;z<c.length;z++)o=c[z],p=o.data,q=o.config,r=q.date,j=p.stateAbb,s=p.fips,s<10&&s>0?"0"+s:s,i=p.officeID,t=q.raceType,k=p.special,l=p.runoff,m=p.recall,q.bitly,u=electionApp.statesInfo[j].name,x.hasOwnProperty(j)||(x[j]={},y.push({stateName:u,stateAbb:j})),x[j].hasOwnProperty(i)||(x[j][i]={}),x[j][i].hasOwnProperty(t)||(x[j][i][t]={}),x[j][i][t]=o,d.state==j&&d.date==r&&d.race==i&&(v[p.raceTypeID]={data:p,config:q},n=getDetailedResultsURL(e,g,f,j,i,t,r,k,l,m),w=!0,
electionApp.model.getDelegateExplainer(j));y.sort(function(a,b){return a.stateName>b.stateName?1:a.stateName<b.stateName?-1:0});var A=v.hasOwnProperty("D"),B=v.hasOwnProperty("E"),C=v.hasOwnProperty("R"),D=v.hasOwnProperty("S"),E=(A||B)&&(C||D),F=E?"has-two-parties":"has-one-party",G='<div class="races-bar">'+(a.options.eyebrow.link?'<a href="'+a.options.eyebrow.link+'">':"")+"<h5>"+(a.options.eyebrow.title?a.options.eyebrow.title:"")+"</h5>"+(a.options.eyebrow.link?"</a>":"");if(w&&y.length>1){G+='<div class="races-menu">KEY RACES: <ul>';var H=0;for(H;H<y.length;H++)G+="<li"+(y[H].stateAbb===d.state?' class="current"':"")+' data-stateAbb="'+y[H].stateAbb+'"><a href="#">'+y[H].stateName+"</a> </li>";for(G+="</ul><select>",H=0;H<y.length;H++)G+="<option"+(y[H].stateAbb===d.state?" selected":"")+' value="'+y[H].stateAbb+'">'+y[H].stateName+"</option>";G+="</select></div>"}G+="</div>",w&&(G+='<article class="results-group '+F+'" data-fips="0"><header class="results-header"><div class="title"><h1>'+a.getHomepageHeader(v)+'</h1></div><div class="actions"><a href="'+n+'">Detailed Results</a></div></header>',G+='<div class="results-dataset"><div class="results-row">'+a.getResultsHTML(v)+"</div></div>",G+='<footer class="results-footer"><span class="updated">'+a.getLastUpdatedHTML()+'</span><div class="text-key"><dl></dl></div>',G+="</footer>",G+="</article>"),G+='<div class="sponsor">'+a.options.sponsored.title+(""!=a.options.sponsored.link?' <a href="'+a.options.sponsored.link+'">':"")+(""!=a.options.sponsored.image?' <img src="'+a.options.sponsored.image+'">':"")+(""!=a.options.sponsored.link?"</a>":"")+"</div>",a.$elem.html(G),w&&a.initEvents()},PoliticoElectionSmallHomepageView.prototype.changeState=function(a){var b=this,c=[],d=[],e=b.options.selected,f=e.year,g=e.yearType,h=e.yearSeason,i=e.date,j="All",a="All",k="boolean"==typeof e.special?e.special:null,l="boolean"==typeof e.runoff?e.runoff:null,m="boolean"==typeof e.recall?e.recall:null,n="";c=electionApp.model.getRaceNums(f,h,g,i,j,a,k,l,m,!0,null),d=electionApp.model.getRacesByRaceNums(f,c,null);var o,p,q,r,s,t,u,v={},w=!1,x={},y=[],z=0;for(z;z<d.length;z++)o=d[z],p=o.data,q=o.config,r=q.date,a=p.stateAbb,s=p.fips,s<10&&s>0?"0"+s:s,j=p.officeID,t=q.raceType,k=p.special,l=p.runoff,m=p.recall,q.bitly,u=electionApp.statesInfo[a].name,x.hasOwnProperty(a)||(x[a]={},y.push({stateName:u,stateAbb:a})),x[a].hasOwnProperty(j)||(x[a][j]={}),x[a][j].hasOwnProperty(t)||(x[a][j][t]={}),x[a][j][t]=o,e.state==a&&e.date==r&&e.race==j&&(v[p.raceTypeID]={data:p,config:q},n=getDetailedResultsURL(f,h,g,a,j,t,r,k,l,m),w=!0,electionApp.model.getDelegateExplainer(a));var A=v.hasOwnProperty("D"),B=v.hasOwnProperty("E"),C=v.hasOwnProperty("R"),D=v.hasOwnProperty("S"),E=(A||B)&&(C||D),F=E?"has-two-parties":"has-one-party";w&&(b.$elem.find(".results-header .title h1").html(b.getHomepageHeader(v)),b.$elem.find(".results-header .actions a").attr("href",n),b.$elem.find(".results-dataset .results-row").html(b.getResultsHTML(v)),b.$elem.find("article.results-group").removeClass("has-two-parties").removeClass("has-one-party"),b.$elem.find("article.results-group").addClass(F))},PoliticoElectionSmallHomepageView.prototype.update=function(){var a=this,b=[],c=[],d=a.options.selected,e=d.year,f=d.yearType,g=d.yearSeason,h=d.date,i="All",j="All",k="boolean"==typeof d.special?d.special:null,l="boolean"==typeof d.runoff?d.runoff:null,m="boolean"==typeof d.recall?d.recall:null,n="";b=electionApp.model.getRaceNums(e,g,f,h,i,j,k,l,m,!0,null),c=electionApp.model.getRacesByRaceNums(e,b,null);var o,p,q,r,s,t,u,v={},w=!1,x={},y=[],z=0;for(z;z<c.length;z++)o=c[z],p=o.data,q=o.config,r=q.date,j=p.stateAbb,s=p.fips,s<10&&s>0?"0"+s:s,i=p.officeID,t=q.raceType,k=p.special,l=p.runoff,m=p.recall,q.bitly,u=electionApp.statesInfo[j].name,x.hasOwnProperty(j)||(x[j]={},y.push({stateName:u})),x[j].hasOwnProperty(i)||(x[j][i]={}),x[j][i].hasOwnProperty(t)||(x[j][i][t]={}),x[j][i][t]=o,d.state==j&&d.date==r&&d.race==i&&(v[p.raceTypeID]={data:p,config:q},n=getDetailedResultsURL(e,g,f,j,i,t,r,k,l,m),w=!0,electionApp.model.getDelegateExplainer(j));y.sort(function(a,b){return a.stateName>b.stateName?1:a.stateName<b.stateName?-1:0}),w&&(a.$elem.find(".results-header .title h1").html(a.getHomepageHeader(v)),a.$elem.find(".results-header .actions a").attr("href",n),a.$elem.find(".results-dataset .results-row").html(a.getResultsHTML(v))),a.$elem.find("footer .updated").html(a.getLastUpdatedHTML())},PoliticoElectionSmallHomepageView.prototype.getResultsHTML=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this,v=u.options.selected.year,w=u.options.selected.yearType,x=(a.hasOwnProperty("D"),a.hasOwnProperty("E"),a.hasOwnProperty("R"),a.hasOwnProperty("S"),0),y=0,z="",A="",B="",C=["D","E","R","S"],D=0;for(D;D<C.length;D++)if(g=C[D],a.hasOwnProperty(g)){for(b=a[g].data,c=a[g].config,d=b.raceNum,e=b.stateAbb,b.officeID,f=b.raceTypeID,i=b.precinctsPercent,h=b.fips,h>999,b.ev,b.numEVsWon,m=u.options.candidatePicks.hasOwnProperty(d)?u.options.candidatePicks[d]:{},k=b.hasResults?electionApp.model.getSortedRaceVotesByVoteCount(b,v,w,!1,!1,!0):electionApp.model.getSortedRaceVotesByVoteCount(b,v,w,!1,!1,!0,!0),A="","D"==f||"E"==f?(A="democrat",B="Democratic"):"R"!=f&&"S"!=f||(A="republican",B="Republican"),z+='<div class="results-data contains-'+A+'" data-racenum="'+d.split(e)[1]+'" data-stateabb="'+e+'"><div class="results-meta"><div class="title"><h5>'+B+'</h5><p class="reporting">'+i+'% Reporting</p></div><div class="actions"><a href="'+getTwitterLink(getTwitterJSON(v,w,b,c,k))+'" class="twitter" target="_blank"><b aria-hidden="true" class="icon icon-twitter"></b> <span class="icon-text">Tweet</span></a></div></div>',z+='<table class="results-table"><tbody>',j=0,x=0,z+='<tr class="type-'+A+'">',j;j<k.length&&!(x>2);j++)l=k[j],r=electionApp.model.formatNumberDecimal(l.votepercent),s=electionApp.model.formatNumberCommas(l.votecount),l.ev>0?l.ev:"",t=l.winner,n=l.candID,o=electionApp.model.getCandidateURL(n,v,w),candidateImageURL=electionApp.model.getCandidateImageURL(n,v,w),q=electionApp.model.getCandidateFirstIntial(n,v,w),p=(""!==q?q+". ":"")+electionApp.model.getCandidateLastName(n,v,w),(b.hasResults||!b.hasResults&&m.hasOwnProperty(n))&&(z+="<td>",""!=o&&(z+='<a href="'+o+'">'),z+='<div class="headshot"><img src="'+candidateImageURL+'" alt=""></div><div class="headshot-caption"><p class="name">',t&&(z+='<span class="token token-winner"><b aria-hidden="true" class="icon icon-check"></b><span class="icon-text">Winner</span></span> '),z+=p,""!=o&&(z+="</a>"),z+='</p><p class="percent">'+r+'%</p><p class="popular">'+s+"</p></div></td>",x++);z+="</tr></tbody></table></div>",y++}return z},PoliticoElectionSmallHomepageView.prototype.getHomepageHeader=function(a){var b,c,d=a.hasOwnProperty("D"),e=a.hasOwnProperty("E"),f=a.hasOwnProperty("R"),g=a.hasOwnProperty("S"),h=(d||e)&&(f||g),i=["D","E","R","S"],j=0;for(j;j<i.length;j++)if(b=i[j],a.hasOwnProperty(b)){c=a[b].data.stateAbb;break}var k="",l="";return h?l=d||f?" Primaries":" Caucuses":(k=d||e?" Democratic":" Republican",l=d||f?" Primary":" Caucus"),electionApp.statesInfo[c].name+k+" Presidential"+l},PoliticoElectionSmallHomepageView.prototype.getLastUpdatedHTML=function(){return"Updated: "+electionApp.model.getLastUpdatedText(!0,!0)+" | Source: AP"},PoliticoElectionHubPage.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionMapView.prototype=Object.create(PoliticoElectionView.prototype),PoliticoElectionMapView.prototype.init=function(){var a,b=this,c={shortcuts:{show:!0}},d="",e={showNationalDistricts:!1,showLabels:!0,detailedSubunits:d,showOnInit:!1},f={stateAbb:"",fips:"",type:"",enabled:!1},g=new Date,h={baseURL:b.options.path.lines,cacheBust:g.getUTCFullYear().toString()+(g.getUTCMonth()+1).toString()+g.getUTCDate().toString()+g.getUTCHours().toString()+"0000"},i={};a=void 0!==b.options.selected.homepageState&&b.options.isHomepage?b.options.selected.homepageState:b.options.selected.state;var j=("KS"==a||"MN"==a)&&!b.options.isUS&&"2016"==b.options.selected.year&&"P"==b.options.selected.race&&"P"==b.options.selected.yearType;"US"!=a&&""!=a&&(f.fips=0,f.stateAbb=a,f.type="state",f.enabled=!1,d=j?"districts":"H"==b.options.selected.race?"districts":"counties",e.detailedSubunits=d),b.options.mapShowNationalDistricts&&("H"==b.options.selected.race||b.options.isHomepage)&&(b.options.isHomepage?e.loadNationalDistricts=!0:e.showNationalDistricts=!0,"H"==b.options.selected.race&&(c.shortcuts.show=!1,e.showLabels=!1,e.mapClickable={state:!1,district:!0,county:!1},addTasks([{task:"showNationalDistricts"}])));var k="",l=f.stateAbb,m=parseInt(b.options.selected.date);if(electionApp.vectorVersions.hasOwnProperty(l)&&electionApp.vectorVersions[l].hasOwnProperty(d)){var n=0;for(n;n<electionApp.vectorVersions[l][d].length&&m>parseInt(electionApp.vectorVersions[l][d][n]);n++)k=electionApp.vectorVersions[l][d][n]}h.version=k,"P"===f.raceType&&b.options.isHomepage&&(e.showLabels=!1,e.mapClickable={state:!1,district:!1,county:!1}),"P"===f.raceType&&electionApp.options.isHomepage&&(i.strokeWidth={selectedState:4,selectedStateOver:4,subunit:2,subunitOver:2});var o,p,q;b.options.isHomepage&&"P"===f.raceType?(o=function(a,b){},p=function(a,b){},q=function(a,b){}):(o=function(a,b){stateClicked(d3.select(d3.event.target).datum().properties.stateAbb)},p=function(a,b){var c=d3.select(d3.event.target).datum().properties;countyClicked(c.stateAbb,parseInt(c.FIPS),c.NAME.replace(/\|/gi," "))},q=function(a,b){var c=d3.select(d3.event.target).datum().properties;districtClicked(c.stateAbb,parseInt(c.CONG_DIST))}),electionApp.map=new PoliticoMap({config:c,vectorfiles:h,functionality:e,selected:f,css:i,enabledStateClicked:o,enabledCountyClicked:p,enabledDistrictClicked:q})},PoliticoElectionMapView.prototype.changeState=function(a){var b,c=this,d=("KS"==a||"MN"==a)&&!c.options.isUS&&"2016"==c.options.selected.year&&"P"==c.options.selected.race&&"P"==c.options.selected.yearType;d||"H"==c.options.selected.race?(b={functionality:{detailedSubunits:"districts"}},electionApp.map.setOptions(b)):(b={functionality:{detailedSubunits:"counties"}},electionApp.map.setOptions(b)),addTasks([{task:"zoomToStateAbb",params:[a]}]),electionApp.map.gotoAndLoadDetailedStateAbb(a)},PoliticoElectionMapView.prototype.changeOffice=function(a,b){var c,d=this,e=!1;"H"==a?(e=!0,c={config:{shortcuts:{show:!1}},functionality:{detailedSubunits:"districts",showNationalDistricts:!0,showLabels:!1,mapClickable:{state:!1,district:!0,county:!1}}}):("H"==b&&(e=!0),c={config:{shortcuts:{show:!0}},functionality:{detailedSubunits:"",showNationalDistricts:!1,showLabels:!0,mapClickable:{state:!0,district:!1,county:!1}}}),d.options.selected.race=a,electionApp.map.setOptions(c),"H"==d.options.selected.race&&(electionApp.map.hideLabels(),electionApp.map.refreshShortcuts()),electionApp.map.refreshVectors(d.options.selected.state,e)},electionApp._viewManager=new PoliticoElectionViewManager,new PoliticoElectionApp}}(PoliticoElectionApp=window.PoliticoElectionApp||{},jQuery);